import{y as xt,p as i,z as Pt,R as u,a as s,w as Ft,A as kt}from"./chunk-WWGJGFF6-BXEJCw1g.js";import{F as Mt,G as Be,_ as Dt,b as Nt,c as Le,d as lt,C as Me,e as ge,f as ae,H as At,g as Gt,h as Bt,i as Tt,j as Ot,k as jt,l as It,R as Wt,m as Lt,T as Ut,n as Ht,o as Vt,p as _t,q as $t,r as zt,s as Kt,t as xe,v as Jt,w as qt,x as Yt,y as Qt,z as Zt,B as Xt,D as es,I as Te,V as ts,J as ss,K as rs,L as ut,O as ns,P as os,u as as,E as is}from"./main.esm-y48SfkWO.js";import{a as dt,R as cs}from"./index-CKtN93q8.js";var Oe={exports:{}};var Je;function ls(){return Je||(Je=1,(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a="",c=0;c<arguments.length;c++){var l=arguments[c];l&&(a=o(a,n(l)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var l in a)t.call(a,l)&&a[l]&&(c=o(c,l));return c}function o(a,c){return c?a?a+" "+c:a+c:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Oe)),Oe.exports}var us=ls();const De=xt(us);function ds(){return i.jsx(Pt,{to:`mailto:${Mt}`,className:De("feedback-overlay","bg-stone-950","dark:bg-stone-200","text-stone-200","dark:text-stone-950","hover:bg-stone-700","dark:hover:bg-stone-400"),children:"Feedback"})}const ps=[0,40,50,60,70,80,90,100,110,120],ms=e=>ps.filter(t=>t<=e),hs=(e,t)=>!t[e]||!t[e][0]?0:t[e][0].length,Ie={[Be.Women]:"Women",[Be.Men]:"Men",[Be.NonBinary]:"Non-Binary"},fs=e=>{const t=["th","st","nd","rd"],r=e%100;return t[(r-20)%10]||t[r]||t[0]},pt=e=>{const t=Math.floor(e/1e3),r=Math.floor(t/3600),n=Math.floor(t%3600/60),o=t%60,a=[];return a.push(r.toString().padStart(2,"0")),a.push(n.toString().padStart(2,"0")),a.push(o.toString().padStart(2,"0")),a.join(":")},Cs=(e,t,r)=>{try{const n=t.find(o=>o.eventCode===e);return n?!t.some(o=>o.teamCode===r&&new Date(o.startDateTime).valueOf()<new Date(n.startDateTime).valueOf()):!1}catch(n){return console.error("Error in isFirstRaceWithTeam:",{races:t},n),!1}},qe={1:"ðŸ¥‡",2:"ðŸ¥ˆ",3:"ðŸ¥‰"};function mt({n:e,ordinal:t=!1}){return i.jsxs("span",{className:"place",children:[qe[e]?qe[e]+" ":"",e,t?fs(e):""]})}var Z=u.createContext({}),ht=u.createContext("default"),we=(e,t,r,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const a=e.newAgStackInstance();let c,l,d=!1;return a.then(h=>{if(d){t.destroyBean(h);return}c=h,l=c.getGui(),r.appendChild(l),Ye(n,c)}),()=>{d=!0,c&&(l?.remove(),t.destroyBean(c),n&&Ye(n,void 0))}},Ye=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const r=e;r.current=t}},ne=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),oe=class ft{constructor(...t){this.classesMap={};for(const r of t)this.classesMap[r]=!0}setClass(t,r){if(!!this.classesMap[t]==r)return this;const o=new ft;return o.classesMap={...this.classesMap},o.classesMap[t]=r,o}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ve=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,r=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},We=u.version?.split(".")[0],Ct=We==="16"||We==="17";function gs(){return We==="19"}var Pe=!1;function vs(e){return Pe||setTimeout(()=>Pe=!1,0),Pe=!0,e()}var Se=(e,t)=>{!Ct&&e&&!Pe?cs.flushSync(t):t()},ys=e=>{Ct?e():u.startTransition(e)};function Rs(e,t,r){return u.useSyncExternalStore?u.useSyncExternalStore(e,t):r}function ke(e,t,r){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(r||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const n=[],o=[],a=new Map,c=new Map;for(let l=0;l<t.length;l++){const d=t[l];c.set(d.instanceId,d)}for(let l=0;l<e.length;l++){const d=e[l];a.set(d.instanceId,d),c.has(d.instanceId)&&n.push(d)}for(let l=0;l<t.length;l++){const d=t[l],h=d.instanceId;a.has(h)||o.push(d)}return n.length===e.length&&o.length===0?e:n.length===0&&o.length===t.length?t:n.length===0?o:o.length===0?n:[...n,...o]}var gt=s.forwardRef((e,t)=>{const{registry:r,context:n}=s.useContext(Z),o=s.useRef(null),a=s.useRef(null),c=s.useRef(null),l=s.useRef(null),d=s.useRef(null),h=s.useRef(),[p,E]=s.useState(),[R,m]=s.useState(),[b,v]=s.useState(),[g,f]=s.useState(()=>new oe),[k,M]=s.useState(()=>new oe("ag-hidden")),[S,C]=s.useState(()=>new oe("ag-hidden")),[I,G]=s.useState(()=>new oe("ag-invisible"));s.useImperativeHandle(t,()=>({refresh(){return!1}})),s.useLayoutEffect(()=>we(p,n,a.current),[p]);const _=s.useCallback(L=>{if(o.current=L,!L||n.isDestroyed()){h.current=n.destroyBean(h.current);return}const D={setInnerRenderer:(N,H)=>{E(N),v(H)},setChildCount:N=>m(N),toggleCss:(N,H)=>f(A=>A.setClass(N,H)),setContractedDisplayed:N=>C(H=>H.setClass("ag-hidden",!N)),setExpandedDisplayed:N=>M(H=>H.setClass("ag-hidden",!N)),setCheckboxVisible:N=>G(H=>H.setClass("ag-invisible",!N)),setCheckboxSpacing:N=>G(H=>H.setClass("ag-group-checkbox-spacing",N))},U=r.createDynamicBean("groupCellRendererCtrl",!0);U&&(h.current=n.createBean(U),h.current.init(D,L,c.current,l.current,d.current,gt,e))},[]),O=s.useMemo(()=>`ag-cell-wrapper ${g.toString()}`,[g]),B=s.useMemo(()=>`ag-group-expanded ${k.toString()}`,[k]),y=s.useMemo(()=>`ag-group-contracted ${S.toString()}`,[S]),x=s.useMemo(()=>`ag-group-checkbox ${I.toString()}`,[I]),w=p?.componentFromFramework,j=w?p.componentClass:void 0,P=p==null&&b!=null,J=Dt(b);return u.createElement("span",{className:O,ref:_,...e.colDef?{}:{role:h.current?.getCellAriaRole()}},u.createElement("span",{className:B,ref:l}),u.createElement("span",{className:y,ref:d}),u.createElement("span",{className:x,ref:c}),u.createElement("span",{className:"ag-group-value",ref:a},P?J:w?u.createElement(j,{...p.params}):null),u.createElement("span",{className:"ag-group-child-count"},R))}),Qe=gt,Ue=s.createContext({setMethods:()=>{}}),Ss=e=>{const{initialProps:t,addUpdateCallback:r,CustomComponentClass:n,setMethods:o}=e,[{key:a,...c},l]=s.useState(t);return s.useEffect(()=>{r(d=>l(d))},[]),u.createElement(Ue.Provider,{value:{setMethods:o}},u.createElement(n,{key:a,...c}))},ws=s.memo(Ss),bs=0;function Ze(){return`agPortalKey_${++bs}`}var vt=class{constructor(e,t,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Ze(),this.portalKey=Ze(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(o=>{this.resolveInstanceCreated=o})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),r=document.createElement(t||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!r){setTimeout(()=>this.callMethod(e,t));return}const n=r[e];if(n)return n.apply(r,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=dt.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return s.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Ne(e,t,r){for(const n of e){const o=t[n];o&&(r[n]=o)}}var ie=class extends vt{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=ws}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Ne(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Es=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},xs=class extends ie{refresh(e){this.sourceParams=e,this.refreshProps()}},Ps=class extends ie{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Fs=class extends ie{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:r,shake:n}=this;return e.label=t,e.icon=r,e.shake=n,e}},ks=class extends ie{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new ae(r=>{this.resolveFilterPassCallback=r});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},Ms=class extends ie{constructor(){super(...arguments),this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function yt(e,t){e.parentFilterInstance(r=>{(r.setModel(t)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Ds=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Ne(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),yt(this.floatingFilterParams,e)}},Ns=class extends ie{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),yt(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},As=class extends ie{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Gs=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Bs=class extends ie{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Ts=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Os=class extends ie{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function He(){Le(231)}var js=1e3,Is=class{constructor(e,t,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||js}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,r){this.portals=[...this.portals,e],this.waitForInstance(t,r),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,r=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Se(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,r)})}}},Ws=({ctrl:e})=>{const t=e.isAlive(),{context:r}=s.useContext(Z),[n,o]=s.useState(),[a,c]=s.useState(),l=s.useRef(),d=s.useRef(null),h=s.useRef(null),p=s.useRef(null),E=s.useRef(),R=s.useRef();t&&!R.current&&(R.current=new Me(()=>d.current));const m=s.useCallback(f=>{if(d.current=f,!f||!e.isAlive()||r.isDestroyed()){l.current=r.destroyBean(l.current);return}l.current=r.createBean(new ge);const k=()=>{const S=e.getSelectAllGui();S&&(h.current?.insertAdjacentElement("afterend",S),l.current.addDestroyFunc(()=>S.remove()))},M={setWidth:S=>{d.current&&(d.current.style.width=S)},toggleCss:(S,C)=>R.current.toggleCss(S,C),setUserStyles:S=>c(S),setAriaSort:S=>{d.current&&(S?Jt(d.current,S):qt(d.current))},setUserCompDetails:S=>o(S),getUserCompInstance:()=>E.current||void 0,refreshSelectAllGui:k,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(M,f,h.current,p.current,l.current),k()},[]);s.useLayoutEffect(()=>we(n,r,p.current,E),[n]),s.useEffect(()=>{e.setDragSource(d.current)},[n]);const b=s.useMemo(()=>!!(n?.componentFromFramework&&ve(n.componentClass)),[n]),v=n?.componentFromFramework,g=n?.componentClass;return u.createElement("div",{ref:m,style:a,className:"ag-header-cell",role:"columnheader"},u.createElement("div",{ref:h,className:"ag-header-cell-resize",role:"presentation"}),u.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},v?b?u.createElement(g,{...n.params}):u.createElement(g,{...n.params,ref:E}):null))},Ls=s.memo(Ws),Us=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Ne(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Hs=({ctrl:e})=>{const{context:t,gos:r}=s.useContext(Z),[n,o]=s.useState(),[a,c]=s.useState(()=>new oe("ag-header-cell","ag-floating-filter")),[l,d]=s.useState(()=>new oe),[h,p]=s.useState(()=>new oe("ag-floating-filter-button","ag-hidden")),[E,R]=s.useState("false"),[m,b]=s.useState(),[,v]=s.useState(1),g=s.useRef(),f=s.useRef(null),k=s.useRef(null),M=s.useRef(null),S=s.useRef(null),C=s.useRef(),I=s.useRef(),G=N=>{N!=null&&C.current&&C.current(N)},_=s.useCallback(N=>{if(f.current=N,!N||!e.isAlive()||t.isDestroyed()){g.current=t.destroyBean(g.current);return}g.current=t.createBean(new ge),I.current=new ae(A=>{C.current=A});const H={toggleCss:(A,W)=>c(Y=>Y.setClass(A,W)),setUserStyles:A=>o(A),addOrRemoveBodyCssClass:(A,W)=>d(Y=>Y.setClass(A,W)),setButtonWrapperDisplayed:A=>{p(W=>W.setClass("ag-hidden",!A)),R(A?"false":"true")},setWidth:A=>{f.current&&(f.current.style.width=A)},setCompDetails:A=>b(A),getFloatingFilterComp:()=>I.current?I.current:null,setMenuIcon:A=>S.current?.appendChild(A)};e.setComp(H,N,S.current,k.current,g.current)},[]);s.useLayoutEffect(()=>we(m,t,k.current,G),[m]);const O=s.useMemo(()=>a.toString(),[a]),B=s.useMemo(()=>l.toString(),[l]),y=s.useMemo(()=>h.toString(),[h]),x=s.useMemo(()=>!!(m&&m.componentFromFramework&&ve(m.componentClass)),[m]),w=s.useMemo(()=>r.get("reactiveCustomComponents"),[]),j=s.useMemo(()=>r.get("enableFilterHandlers"),[]),[P,J]=s.useState();s.useEffect(()=>{if(m?.componentFromFramework)if(w){const N=j?Us:Ds,H=new N(m.params,()=>v(A=>A+1));G(H),J(H)}else He()},[m]);const L=P?.getProps(),D=m?.componentFromFramework,U=m?.componentClass;return u.createElement("div",{ref:_,style:n,className:O,role:"gridcell"},u.createElement("div",{ref:k,className:B,role:"presentation"},D?w?L&&u.createElement(Ue.Provider,{value:{setMethods:N=>P.setMethods(N)}},u.createElement(U,{...L})):u.createElement(U,{...m.params,ref:x?()=>{}:G}):null),u.createElement("div",{ref:M,"aria-hidden":E,className:y,role:"presentation"},u.createElement("button",{ref:S,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Vs=s.memo(Hs),_s=({ctrl:e})=>{const{context:t}=s.useContext(Z),[r,n]=s.useState(),[o,a]=s.useState(()=>new oe),[c,l]=s.useState(()=>new oe),[d,h]=s.useState("false"),[p,E]=s.useState(),[R,m]=s.useState(),b=s.useRef(),v=s.useRef(null),g=s.useRef(null),f=s.useRef(null),k=s.useRef(),M=s.useCallback(O=>{if(v.current=O,!O||!e.isAlive()||t.isDestroyed()){b.current=t.destroyBean(b.current);return}b.current=t.createBean(new ge);const B={setWidth:y=>{v.current&&(v.current.style.width=y)},toggleCss:(y,x)=>a(w=>w.setClass(y,x)),setUserStyles:y=>n(y),setHeaderWrapperHidden:y=>{const x=f.current;x&&(y?x.style.setProperty("display","none"):x.style.removeProperty("display"))},setHeaderWrapperMaxHeight:y=>{const x=f.current;x&&(y!=null?x.style.setProperty("max-height",`${y}px`):x.style.removeProperty("max-height"),x.classList.toggle("ag-header-cell-comp-wrapper-limited-height",y!=null))},setUserCompDetails:y=>m(y),setResizableDisplayed:y=>{l(x=>x.setClass("ag-hidden",!y)),h(y?"false":"true")},setAriaExpanded:y=>E(y),getUserCompInstance:()=>k.current||void 0};e.setComp(B,O,g.current,f.current,b.current)},[]);s.useLayoutEffect(()=>we(R,t,f.current),[R]),s.useEffect(()=>{v.current&&e.setDragSource(v.current)},[R]);const S=s.useMemo(()=>!!(R?.componentFromFramework&&ve(R.componentClass)),[R]),C=s.useMemo(()=>"ag-header-group-cell "+o.toString(),[o]),I=s.useMemo(()=>"ag-header-cell-resize "+c.toString(),[c]),G=R?.componentFromFramework,_=R?.componentClass;return u.createElement("div",{ref:M,style:r,className:C,role:"columnheader","aria-expanded":p},u.createElement("div",{ref:f,className:"ag-header-cell-comp-wrapper",role:"presentation"},G?S?u.createElement(_,{...R.params}):u.createElement(_,{...R.params,ref:k}):null),u.createElement("div",{ref:g,"aria-hidden":d,className:I}))},$s=s.memo(_s),zs=({ctrl:e})=>{const{gos:t,context:r}=s.useContext(Z),{topOffset:n,rowHeight:o}=s.useMemo(()=>e.getTopAndHeight(),[]),a=s.useMemo(()=>t.get("tabIndex"),[]),[c,l]=s.useState(()=>e.getAriaRowIndex()),d=e.headerRowClass,[h,p]=s.useState(()=>o+"px"),[E,R]=s.useState(()=>n+"px"),m=s.useRef(null),[b,v]=s.useState(()=>e.getUpdatedHeaderCtrls()),g=s.useRef(),f=s.useRef(null),k=s.useCallback(C=>{if(f.current=C,!C||!e.isAlive()||r.isDestroyed()){g.current=r.destroyBean(g.current);return}g.current=r.createBean(new ge);const I={setHeight:G=>p(G),setTop:G=>R(G),setHeaderCtrls:(G,_,O)=>{const B=m.current,y=ke(B,G,_);y!==B&&(m.current=y,Se(O,()=>v(y)))},setWidth:G=>{f.current&&(f.current.style.width=G)},setRowIndex:G=>{l(G)}};e.setComp(I,g.current,!1)},[]),M=s.useMemo(()=>({height:h,top:E}),[h,E]),S=s.useCallback(C=>{switch(e.type){case"group":return u.createElement($s,{ctrl:C,key:C.instanceId});case"filter":return u.createElement(Vs,{ctrl:C,key:C.instanceId});default:return u.createElement(Ls,{ctrl:C,key:C.instanceId})}},[]);return u.createElement("div",{ref:k,className:d,role:"row",style:M,tabIndex:a,"aria-rowindex":c},b.map(S))},Ks=s.memo(zs),Js=({pinned:e})=>{const[t,r]=s.useState(!0),[n,o]=s.useState([]),{context:a}=s.useContext(Z),c=s.useRef(null),l=s.useRef(null),d=s.useRef(),h=e==="left",p=e==="right",E=!h&&!p,R=s.useCallback(v=>{if(c.current=v,!v||a.isDestroyed()){d.current=a.destroyBean(d.current);return}d.current=a.createBean(new At(e));const g={setDisplayed:r,setCtrls:f=>o(f),setCenterWidth:f=>{l.current&&(l.current.style.width=f)},setViewportScrollLeft:f=>{c.current&&(c.current.scrollLeft=f)},setPinnedContainerWidth:f=>{c.current&&(c.current.style.width=f,c.current.style.minWidth=f,c.current.style.maxWidth=f)}};d.current.setComp(g,c.current)},[]),m=t?"":"ag-hidden",b=()=>n.map(v=>u.createElement(Ks,{ctrl:v,key:v.instanceId}));return h?u.createElement("div",{ref:R,className:"ag-pinned-left-header "+m,"aria-hidden":!t,role:"rowgroup"},b()):p?u.createElement("div",{ref:R,className:"ag-pinned-right-header "+m,"aria-hidden":!t,role:"rowgroup"},b()):E?u.createElement("div",{ref:R,className:"ag-header-viewport "+m,role:"rowgroup",tabIndex:-1},u.createElement("div",{ref:l,className:"ag-header-container",role:"presentation"},b())):null},je=s.memo(Js),qs=()=>{const[e,t]=s.useState(()=>new oe),[r,n]=s.useState(),{context:o}=s.useContext(Z),a=s.useRef(null),c=s.useRef(),l=s.useCallback(p=>{if(a.current=p,!p||o.isDestroyed()){c.current=o.destroyBean(c.current);return}c.current=o.createBean(new Gt);const E={toggleCss:(R,m)=>t(b=>b.setClass(R,m)),setHeightAndMinHeight:R=>n(R)};c.current.setComp(E,p,p)},[]),d=s.useMemo(()=>"ag-header "+e.toString(),[e]),h=s.useMemo(()=>({height:r,minHeight:r}),[r]);return u.createElement("div",{ref:l,className:d,style:h,role:"presentation"},u.createElement(je,{pinned:"left"}),u.createElement(je,{pinned:null}),u.createElement(je,{pinned:"right"}))},Ys=s.memo(qs),Qs=(e,t)=>{s.useEffect(()=>{const r=t.current;if(r){const n=r.parentElement;if(n){const o=document.createComment(e);return n.insertBefore(o,r),()=>{o.remove()}}}},[e])},he=Qs,Zs=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Ne(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},Xs=e=>{const t=s.useRef(e),r=s.useRef(),n=s.useRef(!1),o=s.useRef(!1),[,a]=s.useState(0);n.current&&(o.current=!0),s.useEffect(()=>(n.current||(r.current=t.current(),n.current=!0),a(c=>c+1),()=>{o.current&&r.current?.()}),[])},er=e=>{const[t,r]=s.useState(),n=s.useContext(Z),{context:o,popupSvc:a,gos:c,editSvc:l}=n,{editDetails:d,cellCtrl:h,eParentCell:p}=e;return Xs(()=>{const{compDetails:E}=d,R=c.get("stopEditingWhenCellsLoseFocus");let m,b;if(!o.isDestroyed()){b=o.createBean(l.createPopupEditorWrapper(E.params));const v=b.getGui();if(e.jsChildComp){const C=e.jsChildComp.getGui();C&&v.appendChild(C)}const{column:g,rowNode:f}=h,k={column:g,rowNode:f,type:"popupCellEditor",eventSource:p,ePopup:v,position:d.popupPosition,keepWithinBounds:!0},M=a?.positionPopupByComponent.bind(a,k),S=a?.addPopup({modal:R,eChild:v,closeOnEsc:!0,closedCallback:()=>{h.onPopupEditorClosed()},anchorToElement:p,positionCallback:M,ariaOwns:p});m=S?S.hideFunc:void 0,r(b),e.jsChildComp?.afterGuiAttached?.()}return()=>{m?.(),o.destroyBean(b)}}),s.useLayoutEffect(()=>()=>{h.isCellFocused()&&t?.getGui().contains(Bt(n))&&p.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?dt.createPortal(e.wrappedContent,t.getGui()):null},Xe=s.memo(er),tr=(e,t,r)=>{const{compProxy:n}=e;r(n);const o=n.getProps(),a=ve(t);return u.createElement(Ue.Provider,{value:{setMethods:c=>n.setMethods(c)}},a?u.createElement(t,{...o}):u.createElement(t,{...o,ref:c=>n.setRef(c)}))},et=(e,t,r)=>e.compProxy?tr(e,t,r):u.createElement(t,{...e.compDetails.params,ref:r}),sr=(e,t,r,n,o)=>{const a=e.compDetails,c=a.componentClass,l=a.componentFromFramework&&!e.popup,d=a.componentFromFramework&&e.popup,h=!a.componentFromFramework&&e.popup;return l?et(e,c,t):d?u.createElement(Xe,{editDetails:e,cellCtrl:n,eParentCell:r,wrappedContent:et(e,c,t)}):h&&o?u.createElement(Xe,{editDetails:e,cellCtrl:n,eParentCell:r,jsChildComp:o}):null},rr=(e,t,r,n,o,a,c=!1)=>{const{context:l}=s.useContext(Z),d=s.useCallback(()=>{const h=o.current;if(!h)return;const p=h.getGui();p&&p.parentElement&&p.remove(),l.destroyBean(h),o.current=void 0},[]);s.useEffect(()=>{const h=e!=null&&!c,p=e?.compDetails&&!e.compDetails.componentFromFramework,E=t&&r==null;if(!(h&&p&&!E)){d();return}const m=e.compDetails;if(o.current){const v=o.current,f=v.refresh!=null&&e.force==!1?v.refresh(m.params):!1;if(f===!0||f===void 0)return;d()}m.newAgStackInstance().then(v=>{if(!v)return;const g=v.getGui();if(!g)return;(t?r:a.current).appendChild(g),o.current=v})},[e,t,n,c]),s.useEffect(()=>d,[])},Rt=rr,nr=({cellCtrl:e,parent:t})=>{const r=s.useRef(),n=s.useMemo(()=>{const{loadingComp:o}=e.getDeferLoadingCellRenderer();return o?{value:void 0,compDetails:o,force:!1}:void 0},[e]);if(Rt(n,!1,void 0,1,r,t),n?.compDetails?.componentFromFramework){const o=n.compDetails.componentClass;return u.createElement(o,{...n.compDetails.params})}return u.createElement(u.Fragment,null)},or=({cellCtrl:e,printLayout:t,editingCell:r})=>{const n=s.useContext(Z),{context:o}=n,{column:{colIdSanitised:a},instanceId:c}=e,l=s.useRef(),[d,h]=s.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[p,E]=s.useState(),[R,m]=s.useState(1),[b,v]=s.useState(),[g,f]=s.useState(!1),[k,M]=s.useState(!1),[S,C]=s.useState(!1),[I,G]=s.useState(),_=s.useMemo(()=>e.isForceWrapper(),[e]),O=s.useMemo(()=>e.getCellAriaRole(),[e]),B=s.useRef(null),y=s.useRef(null),x=s.useRef(null),w=s.useRef(),j=s.useRef(),P=s.useRef(),J=s.useRef([]),L=s.useRef(),D=s.useRef(),[U,N]=s.useState(0),H=s.useCallback(T=>{D.current=T,N(V=>V+1)},[]),A=d!=null&&(g||S||k)&&(p==null||!!p.popup),W=_||A,Y=s.useMemo(()=>e.getCellValueClass(),[e]),le=s.useCallback(T=>{if(j.current=T,T){const V=T.isCancelBeforeStart&&T.isCancelBeforeStart();setTimeout(()=>{V?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(T))})}},[e]),X=s.useRef();X.current||(X.current=new Me(()=>B.current));const fe=!!p&&!p.popup;Rt(d,W,D.current,U,w,B,fe);const Ce=s.useRef();s.useLayoutEffect(()=>{const T=Ce.current,V=d;if(Ce.current=d,T==null||T.compDetails==null||V==null||V.compDetails==null)return;L.current?.refreshVisibility();const Q=T.compDetails,q=V.compDetails;if(Q.componentClass!=q.componentClass||x.current?.refresh==null)return;x.current.refresh(q.params)!=!0&&m(z=>z+1)},[d]),s.useLayoutEffect(()=>{if(!(p&&!p.compDetails.componentFromFramework)||o.isDestroyed())return;const V=p.compDetails,Q=p.popup===!0,q=V.newAgStackInstance();return q.then(F=>{if(!F)return;const z=F.getGui();le(F),Q||((_?P:B).current?.appendChild(z),F.afterGuiAttached?.()),G(F)}),()=>{q.then(F=>{const z=F.getGui();e.disableEditorTooltipFeature(),o.destroyBean(F),le(void 0),G(void 0),z?.remove()})}},[p]);const ye=s.useCallback(T=>{if(P.current=T,!T||o.isDestroyed()||!e.isAlive()){const q=J.current;J.current=[];for(const F of q)F();return}let V;const Q=q=>{q&&(T.insertAdjacentElement("afterbegin",q.getGui()),J.current.push(()=>{Yt(q.getGui()),o.destroyBean(q),L.current===V&&(L.current=void 0)}))};g&&Q(e.createSelectionCheckbox()),S&&Q(e.createDndSource()),k&&(V=e.createRowDragComp(),L.current=V,V&&(Q(V),V.refreshVisibility()))},[e,o,S,k,g]),$=s.useCallback(()=>{const T=!e.isCellSpanning()||y.current,V=B.current;if(!V||!T||!e||!e.isAlive()||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new ge);const Q={toggleCss:(F,z)=>X.current.toggleCss(F,z),setUserStyles:F=>v(F),getFocusableElement:()=>B.current,setIncludeSelection:F=>f(F),setIncludeRowDrag:F=>M(F),setIncludeDndSource:F=>C(F),getCellEditor:()=>j.current??null,getCellRenderer:()=>x.current??w.current,getParentOfValue:()=>D.current??P.current??B.current,setRenderDetails:(F,z,te)=>{const ue=()=>{h(se=>se?.compDetails!==F||se?.value!==z||se?.force!==te?{value:z,compDetails:F,force:te}:se)};if(F?.params?.deferRender&&!e.rowNode.group){const{loadingComp:se,onReady:Re}=e.getDeferLoadingCellRenderer();if(se){h({value:void 0,compDetails:se,force:!1}),Re.then(()=>ys(ue));return}}ue()},setEditDetails:(F,z,te,ue)=>{if(F){let se;F.componentFromFramework&&(ue?se=new Zs(F.params,()=>m(Re=>Re+1)):He()),E({compDetails:F,popup:z,popupPosition:te,compProxy:se}),z||h(void 0)}else e.hasBrowserFocus()&&Q.getFocusableElement().focus({preventScroll:!0}),j.current=void 0,E(void 0)},refreshEditStyles:(F,z)=>{if(!B.current)return;const{current:te}=X;te.toggleCss("ag-cell-value",!W),te.toggleCss("ag-cell-inline-editing",!!F&&!z),te.toggleCss("ag-cell-popup-editing",!!F&&!!z),te.toggleCss("ag-cell-not-inline-editing",!F||!!z)}},q=P.current||void 0;e.setComp(Q,V,y.current??void 0,q,t,r,l.current)},[]),me=s.useCallback(T=>{B.current=T,$()},[]),ee=s.useCallback(T=>{y.current=T,$()},[]),ce=s.useMemo(()=>!!(d?.compDetails?.componentFromFramework&&ve(d.compDetails.componentClass)),[d]);s.useLayoutEffect(()=>{if(!B.current)return;const{current:T}=X;T.toggleCss("ag-cell-value",!W),T.toggleCss("ag-cell-inline-editing",!!p&&!p.popup),T.toggleCss("ag-cell-popup-editing",!!p&&!!p.popup),T.toggleCss("ag-cell-not-inline-editing",!p||!!p.popup)});const de=()=>{const{compDetails:T,value:V}=d;if(!T)return V?.toString?.()??V;if(T.componentFromFramework){const Q=T.componentClass;return u.createElement(s.Suspense,{fallback:u.createElement(nr,{cellCtrl:e,parent:B})},ce?u.createElement(Q,{...T.params,key:R}):u.createElement(Q,{...T.params,key:R,ref:x}))}},pe=()=>{const T=()=>d==null?null:W?u.createElement("span",{role:"presentation",id:`cell-${c}`,className:Y,ref:H},de()):de(),V=Q=>sr(Q,le,B.current,e,I);return p!=null?p.popup?u.createElement(u.Fragment,null,T(),V(p)):V(p):T()},Ee=()=>u.createElement("div",{ref:me,style:b,role:O,"col-id":a},W?u.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ye},pe()):pe());return e.isCellSpanning()?u.createElement("div",{ref:ee,className:"ag-spanned-cell-wrapper",role:"presentation"},Ee()):Ee()},ar=s.memo(or),ir=({rowCtrl:e,containerType:t})=>{const{context:r,gos:n,editSvc:o}=s.useContext(Z),a=s.useContext(ht)==="default",c=s.useRef(),l=s.useRef(e.getDomOrder()),d=e.isFullWidth(),h=e.rowNode.displayed,[p,E]=s.useState(()=>h?e.rowNode.getRowIndexString():null),[R,m]=s.useState(()=>e.rowId),[b,v]=s.useState(()=>e.businessKey),[g,f]=s.useState(()=>e.rowStyles),k=s.useRef(null),[M,S]=s.useState(()=>null),[C,I]=s.useState(),[G,_]=s.useState(()=>h?e.getInitialRowTop(t):void 0),[O,B]=s.useState(()=>h?e.getInitialTransform(t):void 0),y=s.useRef(null),x=s.useRef(),w=s.useRef(),j=s.useRef(!1),[P,J]=s.useState(0);s.useEffect(()=>{if(j.current||!C||P>10)return;const $=y.current?.firstChild;$?(e.setupDetailRowAutoHeight($),j.current=!0):J(me=>me+1)},[C,P]);const L=s.useRef();L.current||(L.current=new Me(()=>y.current));const D=s.useRef(()=>{}),U=s.useCallback($=>(D.current=$,()=>{D.current=()=>{}}),[]),N=Rs(U,()=>k.current,[]),H=a?N:M,A=s.useCallback($=>{if(y.current=$,c.current=$?r.createBean(new ge):r.destroyBean(c.current),!$){e.unsetComp(t);return}if(!e.isAlive()||r.isDestroyed())return;const me={setTop:_,setTransform:B,toggleCss:(ee,ce)=>L.current.toggleCss(ee,ce),setDomOrder:ee=>l.current=ee,setRowIndex:E,setRowId:m,setRowBusinessKey:v,setUserStyles:f,setCellCtrls:(ee,ce)=>{const de=k.current,pe=ke(de,ee,l.current);pe!==de&&(k.current=pe,a?D.current():Se(ce,()=>S(pe)))},showFullWidth:ee=>{w.current=ee.params,I(ee)},getFullWidthCellRenderer:()=>x.current,getFullWidthCellRendererParams:()=>w.current,refreshFullWidth:ee=>{const ce=ee();return w.current=ce,fe.current?(I(de=>({...de,params:ce})),!0):!x.current||!x.current.refresh?!1:x.current.refresh(ce)}};e.setComp(me,$,t,c.current)},[]);s.useLayoutEffect(()=>we(C,r,y.current,x),[C]);const W=s.useMemo(()=>{const $={top:G,transform:O};return Object.assign($,g),$},[G,O,g]),Y=d&&C?.componentFromFramework,le=!d&&H!=null,X=s.useMemo(()=>!!(C?.componentFromFramework&&ve(C.componentClass)),[C]),fe=s.useRef(!1);s.useEffect(()=>{fe.current=X&&!!C&&!!n.get("reactiveCustomComponents")},[X,C]);const Ce=()=>H?.map($=>u.createElement(ar,{cellCtrl:$,editingCell:o?.isEditing($,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:$.instanceId})),ye=()=>{const $=C.componentClass;return X?u.createElement($,{...C.params}):u.createElement($,{...C.params,ref:x})};return u.createElement("div",{ref:A,role:"row",style:W,"row-index":p,"row-id":R,"row-business-key":b},le?Ce():Y?ye():null)},tt=s.memo(ir),cr=({name:e})=>{const{context:t,gos:r}=s.useContext(Z),n=s.useMemo(()=>Tt(e),[e]),o=s.useRef(null),a=s.useRef(null),c=s.useRef(null),l=s.useRef([]),d=s.useRef([]),[h,p]=s.useState(()=>[]),E=!!r.get("enableCellSpan")&&!!n.getSpannedRowCtrls,R=s.useRef([]),m=s.useRef([]),[b,v]=s.useState(()=>[]),g=s.useRef(!1),f=s.useRef(),k=s.useMemo(()=>ne("ag-viewport",Ot(e)),[e]),M=s.useMemo(()=>ne(jt(e)),[e]),S=s.useMemo(()=>ne("ag-spanning-container",It(e)),[e]),C=n.type==="center"||E,I=C?o:a;he(" AG Row Container "+e+" ",I);const G=s.useCallback(()=>{const P=!C||o.current!=null,J=a.current!=null,L=!E||c.current!=null;return P&&J&&L},[]),_=s.useCallback(()=>o.current==null&&a.current==null&&c.current==null,[]),O=s.useCallback(()=>{if(_()&&(f.current=t.destroyBean(f.current)),!t.isDestroyed()&&G()){const P=D=>{const U=ke(d.current,l.current,g.current);U!==d.current&&(d.current=U,Se(D,()=>p(U)))},J=D=>{const U=ke(m.current,R.current,g.current);U!==m.current&&(m.current=U,Se(D,()=>v(U)))},L={setHorizontalScroll:D=>{o.current&&(o.current.scrollLeft=D)},setViewportHeight:D=>{o.current&&(o.current.style.height=D)},setRowCtrls:({rowCtrls:D,useFlushSync:U})=>{const N=!!U&&l.current.length>0&&D.length>0;l.current=D,P(N)},setSpannedRowCtrls:(D,U)=>{const N=!!U&&R.current.length>0&&D.length>0;R.current=D,J(N)},setDomOrder:D=>{g.current!=D&&(g.current=D,P(!1))},setContainerWidth:D=>{a.current&&(a.current.style.width=D)},setOffsetTop:D=>{a.current&&(a.current.style.transform=`translateY(${D})`)}};f.current=t.createBean(new Wt(e)),f.current.setComp(L,a.current,c.current??void 0,o.current)}},[G,_]),B=s.useCallback(P=>{a.current=P,O()},[O]),y=s.useCallback(P=>{c.current=P,O()},[O]),x=s.useCallback(P=>{o.current=P,O()},[O]),w=()=>u.createElement("div",{className:M,ref:B,role:C?"presentation":"rowgroup"},h.map(P=>u.createElement(tt,{rowCtrl:P,containerType:n.type,key:P.instanceId})));if(!C)return w();const j=()=>u.createElement("div",{className:S,ref:y,role:"presentation"},b.map(P=>u.createElement(tt,{rowCtrl:P,containerType:n.type,key:P.instanceId})));return u.createElement("div",{className:k,ref:x,role:"rowgroup"},w(),E?j():null)},lr=s.memo(cr),ur=()=>{const e=s.useContext(Z),{context:t,overlays:r}=e,[n,o]=s.useState(""),[a,c]=s.useState(0),[l,d]=s.useState(0),[h,p]=s.useState("0px"),[E,R]=s.useState("0px"),[m,b]=s.useState("100%"),[v,g]=s.useState("0px"),[f,k]=s.useState("0px"),[M,S]=s.useState("100%"),[C,I]=s.useState(!0),[G,_]=s.useState(!0),[O,B]=s.useState(null),[y,x]=s.useState(""),[w,j]=s.useState(null),[P,J]=s.useState("ag-layout-normal"),L=s.useRef();L.current||(L.current=new Me(()=>D.current));const D=s.useRef(null),U=s.useRef(null),N=s.useRef(null),H=s.useRef(null),A=s.useRef(null),W=s.useRef(null),Y=s.useRef(null),le=s.useRef([]),X=s.useRef([]);he(" AG Grid Body ",D),he(" AG Pinned Top ",U),he(" AG Sticky Top ",N),he(" AG Middle ",W),he(" AG Pinned Bottom ",Y);const fe=s.useCallback(F=>{if(D.current=F,!F||t.isDestroyed()){le.current=t.destroyBeans(le.current);for(const K of X.current)K();X.current=[];return}const z=(K,re)=>{K.appendChild(re),X.current.push(()=>re.remove())},te=K=>{const re=t.createBean(new K);return le.current.push(re),re},ue=(K,re,Et)=>{z(K,document.createComment(Et)),z(K,te(re).getGui())};ue(F,Xt," AG Fake Horizontal Scroll ");const se=r?.getOverlayWrapperCompClass();se&&ue(F,se," AG Overlay Wrapper "),A.current&&ue(A.current,es," AG Fake Vertical Scroll ");const Re={setRowAnimationCssOnBodyViewport:o,setColumnCount:K=>{D.current&&Zt(D.current,K)},setRowCount:K=>{D.current&&Qt(D.current,K)},setTopHeight:c,setBottomHeight:d,setStickyTopHeight:p,setStickyTopTop:R,setStickyTopWidth:b,setTopInvisible:I,setBottomInvisible:_,setColumnMovingCss:(K,re)=>L.current.toggleCss(K,re),updateLayoutClasses:J,setAlwaysVerticalScrollClass:B,setPinnedTopBottomOverflowY:x,setCellSelectableCss:(K,re)=>j(re?K:null),setBodyViewportWidth:K=>{W.current&&(W.current.style.width=K)},registerBodyViewportResizeListener:K=>{if(W.current){const re=lt(e,W.current,K);X.current.push(()=>re())}},setStickyBottomHeight:g,setStickyBottomBottom:k,setStickyBottomWidth:S,setGridRootRole:K=>F.setAttribute("role",K)},Ke=t.createBean(new Lt);le.current.push(Ke),Ke.setComp(Re,F,W.current,U.current,Y.current,N.current,H.current)},[]),Ce=s.useMemo(()=>ne("ag-root","ag-unselectable",P),[P]),ye=s.useMemo(()=>ne("ag-body-viewport",n,P,O,w),[n,P,O,w]),$=s.useMemo(()=>ne("ag-body",P),[P]),me=s.useMemo(()=>ne("ag-floating-top",C?"ag-invisible":null,w),[w,C]),ee=s.useMemo(()=>ne("ag-sticky-top",w),[w]),ce=s.useMemo(()=>ne("ag-sticky-bottom",v==="0px"?"ag-invisible":null,w),[w,v]),de=s.useMemo(()=>ne("ag-floating-bottom",G?"ag-invisible":null,w),[w,G]),pe=s.useMemo(()=>({height:a,minHeight:a,overflowY:y}),[a,y]),Ee=s.useMemo(()=>({height:h,top:E,width:m}),[h,E,m]),T=s.useMemo(()=>({height:v,bottom:f,width:M}),[v,f,M]),V=s.useMemo(()=>({height:l,minHeight:l,overflowY:y}),[l,y]),Q=F=>u.createElement(lr,{name:F,key:`${F}-container`}),q=({section:F,children:z,className:te,style:ue})=>u.createElement("div",{ref:F,className:te,role:"presentation",style:ue},z.map(Q));return u.createElement("div",{ref:fe,className:Ce},u.createElement(Ys,null),q({section:U,className:me,style:pe,children:["topLeft","topCenter","topRight","topFullWidth"]}),u.createElement("div",{className:$,ref:A,role:"presentation"},q({section:W,className:ye,children:["left","center","right","fullWidth"]})),q({section:N,className:ee,style:Ee,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),q({section:H,className:ce,style:T,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),q({section:Y,className:de,style:V,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},dr=s.memo(ur),pr=(e,t)=>{const{children:r,eFocusableElement:n,onTabKeyDown:o,gridCtrl:a,forceFocusOutWhenTabGuardsAreEmpty:c,isEmpty:l}=e,{context:d}=s.useContext(Z),h=s.useRef(null),p=s.useRef(null),E=s.useRef(),R=f=>{const k=f==null?void 0:parseInt(f,10).toString();for(const M of[h,p])k===void 0?M.current?.removeAttribute("tabindex"):M.current?.setAttribute("tabindex",k)};s.useImperativeHandle(t,()=>({forceFocusOutOfContainer(f){E.current?.forceFocusOutOfContainer(f)}}));const m=s.useCallback(()=>{const f=h.current,k=p.current;if(!f&&!k||d.isDestroyed()){E.current=d.destroyBean(E.current);return}if(f&&k){const M={setTabIndex:R};E.current=d.createBean(new Ut({comp:M,eTopGuard:f,eBottomGuard:k,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:c,focusInnerElement:S=>a.focusInnerElement(S),isEmpty:l}))}},[]),b=s.useCallback(f=>{h.current=f,m()},[m]),v=s.useCallback(f=>{p.current=f,m()},[m]),g=f=>{const k=f==="top"?Te.TAB_GUARD_TOP:Te.TAB_GUARD_BOTTOM;return u.createElement("div",{className:`${Te.TAB_GUARD} ${k}`,role:"presentation",ref:f==="top"?b:v})};return u.createElement(u.Fragment,null,g("top"),r,g("bottom"))},mr=s.forwardRef(pr),hr=s.memo(mr),fr=({context:e})=>{const[t,r]=s.useState(""),[n,o]=s.useState(""),[a,c]=s.useState(null),[l,d]=s.useState(null),[h,p]=s.useState(!1),[E,R]=s.useState(),m=s.useRef(),b=s.useRef(null),v=s.useRef(),[g,f]=s.useState(null),k=s.useRef(()=>{}),M=s.useRef(),S=s.useRef([]),C=s.useCallback(()=>{},[]);he(" AG Grid ",b);const I=s.useCallback(x=>{if(b.current=x,m.current=x?e.createBean(new Ht):e.destroyBean(m.current),!x||e.isDestroyed())return;const w=m.current;k.current=w.focusInnerElement.bind(w);const j={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:P=>{if(!P&&M.current?.isDisplayed()){M.current.forceFocusOutOfContainer(P);return}v.current?.forceFocusOutOfContainer(P)},updateLayoutClasses:o,getFocusableContainers:()=>{const P=[],J=b.current?.querySelector(".ag-root");J&&P.push({getGui:()=>J});for(const L of S.current)L.isDisplayed()&&P.push(L);return P},setCursor:c,setUserSelect:d};w.setComp(j,x,x),p(!0)},[]);s.useEffect(()=>{const x=m.current,w=b.current;if(!E||!x||!g||!w||e.isDestroyed())return;const j=[],{watermarkSelector:P,paginationSelector:J,sideBarSelector:L,statusBarSelector:D,gridHeaderDropZonesSelector:U}=x.getOptionalSelectors(),N=[];if(U){const A=e.createBean(new U.component),W=A.getGui();w.insertAdjacentElement("afterbegin",W),N.push(W),j.push(A)}if(L){const A=e.createBean(new L.component),W=A.getGui(),Y=g.querySelector(".ag-tab-guard-bottom");Y&&(Y.insertAdjacentElement("beforebegin",W),N.push(W)),j.push(A),S.current.push(A)}const H=A=>{const W=e.createBean(new A),Y=W.getGui();return w.insertAdjacentElement("beforeend",Y),N.push(Y),j.push(W),W};if(D&&H(D.component),J){const A=H(J.component);M.current=A,S.current.push(A)}return P&&H(P.component),()=>{e.destroyBeans(j);for(const A of N)A.remove()}},[E,g,e]);const G=s.useMemo(()=>ne("ag-root-wrapper",t,n),[t,n]),_=s.useMemo(()=>ne("ag-root-wrapper-body","ag-focus-managed",n),[n]),O=s.useMemo(()=>({userSelect:l??"",WebkitUserSelect:l??"",cursor:a??""}),[l,a]),B=s.useCallback(x=>{v.current=x,R(x!==null)},[]),y=s.useCallback(()=>!m.current?.isFocusable(),[]);return u.createElement("div",{ref:I,className:G,style:O,role:"presentation"},u.createElement("div",{className:_,ref:f,role:"presentation"},h&&g&&!e.isDestroyed()&&u.createElement(Z.Provider,{value:e.getBeans()},u.createElement(hr,{ref:B,eFocusableElement:g,onTabKeyDown:C,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:y},u.createElement(dr,null)))))},Cr=s.memo(fr),gr=class extends rs{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},St={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},vr={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...St},wt=new Set(Object.keys(vr)),yr=new Set(Object.keys(St)),bt=e=>{const t=s.useRef(),r=s.useRef(null),n=s.useRef(null),o=s.useRef([]),a=s.useRef([]),c=s.useRef(e),l=s.useRef(),d=s.useRef(),h=s.useRef(!1),[p,E]=s.useState(void 0),[,R]=s.useState(0),m=s.useRef(),b=M=>{const S=r.current?.classList,C=(I="")=>I.trim().split(/\s+/g).filter(Boolean);if(m.current!==M){for(const I of C(m.current))S?.contains(I)&&S.remove(I);for(const I of C(M))S?.contains(I)||S?.add(I);m.current=M}};s.useLayoutEffect(()=>{b(e.className)},[e.className]);const v=s.useCallback(M=>{if(r.current=M,b(e.className),!M){for(const w of o.current)w();o.current.length=0;return}const S=e.modules||[];n.current||(n.current=new Is(()=>R(w=>w+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{n.current?.destroy(),n.current=null}));const C=$t(e.gridOptions,e,Object.keys(e).filter(w=>!wt.has(w))),I=()=>{if(h.current){const w=()=>l.current?.shouldQueueUpdates()?void 0:a.current.shift();let j=w();for(;j;)j(),j=w()}},G=new br(I);l.current=G;const _=new gr,O={providedBeanInstances:{frameworkCompWrapper:new Sr(n.current,C),renderStatus:_},modules:S,frameworkOverrides:G,setThemeOnGridDiv:!0},B=w=>{E(w),w.createBean(_),o.current.push(()=>{w.destroy()}),w.getBean("ctrlsSvc").whenReady({addDestroyFunc:j=>{o.current.push(j)}},()=>{if(w.isDestroyed())return;const j=t.current;j&&e.passGridApi?.(j)})},y=w=>{w.getBean("ctrlsSvc").whenReady({addDestroyFunc:j=>{o.current.push(j)}},()=>{for(const j of a.current)j();a.current.length=0,h.current=!0})},x=new zt;C.gridId??(C.gridId=d.current),t.current=x.create(M,C,B,y,O),o.current.push(()=>{t.current=void 0}),t.current&&(d.current=t.current.getGridId())},[]),g=s.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),f=s.useCallback(M=>{h.current&&!l.current?.shouldQueueUpdates()?M():a.current.push(M)},[]);s.useEffect(()=>{const M=Rr(c.current,e);c.current=e,f(()=>{t.current&&Kt(M,t.current)})},[e]);const k=!u.useSyncExternalStore||xe(e,"renderingMode")==="legacy"?"legacy":"default";return u.createElement("div",{style:g,ref:v},u.createElement(ht.Provider,{value:k},p&&!p.isDestroyed()?u.createElement(Cr,{key:p.instanceId,context:p}):null,n.current?.getPortals()??null))};function Rr(e,t){const r={};for(const n of Object.keys(t)){if(wt.has(n)){yr.has(n)&&Le(274,{prop:n});continue}const o=t[n];e[n]!==o&&(r[n]=o)}return r}var Sr=class extends ss{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const r=this.gridOptions;if(xe(r,"reactiveCustomComponents")){const c=(l=>{switch(l){case"filter":return xe(r,"enableFilterHandlers")?Ms:ks;case"floatingFilterComponent":return xe(r,"enableFilterHandlers")?As:Ns;case"dateComponent":return Ps;case"dragAndDropImageComponent":return Fs;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return xs;case"statusPanel":return Ts;case"toolPanel":return Os;case"menuItem":return Bs;case"cellRenderer":return Es;case"innerHeaderComponent":return Gs}})(t.name);if(c)return new c(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":He();break}const o=!t.cellRenderer&&t.name!=="toolPanel";return new vt(e,this.parent,t,o)}},wr=s.forwardRef((e,t)=>{const r=s.useContext(Z),{registry:n,context:o,gos:a,rowModel:c}=r,[l,d]=s.useState(()=>new oe),[h,p]=s.useState(()=>new oe),[E,R]=s.useState(),[m,b]=s.useState(),v=s.useRef(),g=s.useRef(null),f=s.useRef(),k=s.useMemo(()=>Nt(e.api.getGridId(),E?.rowModelType??"clientSide"),[e]),M=s.useMemo(()=>l.toString()+" ag-details-row",[l]),S=s.useMemo(()=>h.toString()+" ag-details-grid",[h]);t&&s.useImperativeHandle(t,()=>({refresh(){return v.current?.refresh()??!1}})),e.template&&Le(230);const C=s.useCallback(G=>{if(g.current=G,!G||o.isDestroyed()){v.current=o.destroyBean(v.current),f.current?.();return}const _={toggleCss:(B,y)=>d(x=>x.setClass(B,y)),toggleDetailGridCss:(B,y)=>p(x=>x.setClass(B,y)),setDetailGrid:B=>R(B),setRowData:B=>b(B),getGui:()=>g.current},O=n.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(o.createBean(O),O.init(_,e),v.current=O,a.get("detailRowAutoHeight"))){const B=()=>{if(g.current==null)return;const y=g.current.clientHeight;y!=null&&y>0&&setTimeout(()=>{e.node.setRowHeight(y),(Vt(a)||_t(a))&&c.onRowHeightChanged()},0)};f.current=lt(r,G,B),B()}},[]),I=s.useCallback(G=>{v.current?.registerDetailWithMaster(G)},[]);return u.createElement("div",{className:M,ref:C},E&&u.createElement(bt,{className:S,...E,modules:k,rowData:m,passGridApi:I}))}),br=class extends ts{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Qe,agGroupRowRenderer:Qe,agDetailCellRenderer:wr},this.wrapIncoming=(t,r)=>r==="ensureVisible"?vs(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return gs()}},Er=class extends s.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return u.createElement(bt,{...this.props,passGridApi:this.setGridApi})}};const xr=12;function Ae({rowData:e,columnDefs:t}){const r=e.length>xr;return i.jsx("div",{className:r?"table-container-large":"table-container",children:i.jsx(Er,{tooltipShowDelay:0,rowData:e,columnDefs:t,autoSizeStrategy:{type:"fitCellContents"},domLayout:r?"normal":"autoHeight"})})}const Fe=e=>i.jsx(mt,{n:e.value,ordinal:!1}),Pr=e=>e.value?i.jsx("span",{className:"welcome-symbol",children:"ðŸ‘‹"}):i.jsx(i.Fragment,{}),Fr=[{headerName:"Place Overall",field:"overallPlace",cellRenderer:Fe},{headerName:"Place in Gender",field:"genderPlace",cellRenderer:Fe},{headerName:"Place in Age Group",field:"ageGroupPlace",cellRenderer:Fe},{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Gender",field:"gender"},{headerName:"Pace",field:"pace"},{headerName:"Overall Time",field:"overallTime"},{headerName:"Age",field:"age"},{headerName:"Place in Gender (Age Graded)",field:"ageGradePlace"},{headerName:"Percent (Age Graded)",field:"ageGradePercent"},{headerName:"City",field:"city"},{headerName:"State",field:"stateProvince"},{headerName:"Country",field:"countryCode"}];function kr({eventCode:e,results:t,runners:r}){const n={valueGetter:o=>{const a=o.data?.runnerId;if(a===void 0)return!1;const c=r[a];return Cs(e,c,ut)},cellRenderer:Pr,tooltipValueGetter:o=>o.value?"First race with NBR!":""};return i.jsx(Ae,{rowData:t,columnDefs:[n,...Fr]})}function be({children:e}){return i.jsx("section",{className:"bg-stone-200 dark:bg-stone-800 text-stone-950 dark:text-stone-200",children:e})}const Ve=De("bg-stone-300","dark:bg-stone-600"),Mr=De("bg-stone-100","dark:bg-stone-700");function Ge({count:e,className:t}){return i.jsx("div",{className:De("count-badge",t),children:e})}function Dr({eventCode:e,results:t,gender:r,runners:n}){const o=hs(r,t);if(o===0)return i.jsx(i.Fragment,{});const a=t[r];return i.jsx("div",{className:"gender-finishers bg-white dark:bg-stone-900",children:Object.entries(a).map(([c,l])=>i.jsxs("div",{className:"level-finishers",children:[i.jsxs("h4",{children:[i.jsx(i.Fragment,{children:c==="0"?`Overall ${Ie[r]}`:`Masters ${c}+`})," ",i.jsx(Ge,{count:c==="0"?o:l.length,className:Mr})]}),i.jsx(kr,{eventCode:e,results:l,runners:n})]},`finishers-${r}-${c}`))})}function st({data:e}){let t;if(e===void 0)t=i.jsx("p",{children:"Loading..."});else if(e===null)t=i.jsx("p",{children:"Error loading results"});else{const{results:r,runners:n}=e.document;if(r.items.length===0)return i.jsx(i.Fragment,{});const o={};Object.values(r.items).forEach(a=>{o[a.gender]||(o[a.gender]={}),ms(a.age).forEach(l=>{o[a.gender][l]||(o[a.gender][l]=[]),o[a.gender][l].push(a)})}),t=i.jsxs(i.Fragment,{children:[i.jsxs("h2",{children:["Total Finishers"," ",i.jsx(Ge,{count:r.items.length,className:Ve})]}),ns.map(a=>i.jsx(Dr,{eventCode:e.document.event.eventCode,results:o,gender:a,runners:n},a))]})}return i.jsx("div",{id:"overall-results",children:i.jsx(be,{children:t})})}const Nr=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Finish Time",field:"finishTime",valueFormatter:e=>pt(e.value)}];function Ar({runners:e}){return i.jsx(Ae,{rowData:e,columnDefs:Nr})}function rt({data:e}){let t;if(e===void 0)t=i.jsx("p",{children:"Loading..."});else if(e===null)t=i.jsx("p",{children:"Error loading awards"});else{const{awards:r}=e.document;if(r.length===0)return i.jsx(i.Fragment,{});t=i.jsxs(i.Fragment,{children:[i.jsx("h2",{children:"Awards"}),r.map(n=>{const o=n.minimumAge===0?`Open Class ${Ie[n.teamGender]}`:`Master's ${Ie[n.teamGender]} ${n.minimumAge}+`;return i.jsxs("div",{children:[i.jsx("h3",{children:o}),pt(n.summaryTime)," -"," ",i.jsx(mt,{n:n.teamOrder,ordinal:!0})," Place",i.jsx(Ar,{runners:n.runners.items})]},`award-${n.teamCode}-${n.teamGender}-${n.minimumAge}`)})]})}return i.jsx("div",{id:"awards",children:i.jsx(be,{children:t})})}function nt({data:e}){let t;if(e===void 0)t=i.jsx("p",{children:"Loading..."});else if(e===null)t=i.jsx("p",{children:"Error loading event details"});else{const{event:r}=e.document;t=i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:[i.jsx("b",{children:"Date and Time: "}),r&&new Date(r.startDateTime).toLocaleString("en-US",{dateStyle:"full",timeStyle:"medium"})]}),r?.venue&&i.jsxs("p",{children:[i.jsx("b",{children:"Location: "}),r.venue]}),r?.weather&&i.jsxs("p",{children:[i.jsx("b",{children:"Weather: "}),r.weather]})]})}return i.jsx("div",{id:"event-details",children:i.jsx(be,{children:t})})}function Gr({nyrrPrSetters:e,firstTimeWithNBR:t,topTenFinishers:r,firstRaceOfDistanceWithNyrr:n,data:o}){return o===void 0||o===null||e===void 0||e===null||t===void 0||t===null||n===void 0||n===null||r===void 0||r===null||`${JSON.stringify({nyrrPrSetters:e,firstTimeWithNBR:t,topTenFinishers:r},void 0,2)}`.slice(0,1e3),i.jsx(i.Fragment,{})}const ot=e=>{if(e===void 0)return 1/0;const t=e.split(":").map(n=>parseFloat(n));let r=0;return t.length===3?(r+=t[0]*3600,r+=t[1]*60,r+=t[2]):t.length===2?(r+=t[0]*60,r+=t[1]):t.length===1&&(r+=t[0]),r},at=(e,t)=>{const r=ot(e),n=ot(t);return r<n},_e=(e,t)=>{const r=new Date(e).valueOf(),n=new Date(t).valueOf();return r<n},$e=(e,t)=>{const r=t.find(n=>n.eventCode===e.eventCode);return r?r.isVirtual:!1},Br=(e,t)=>{const{event:r,results:n}=e.document,{items:o}=n,{distanceName:a}=r,c=[];return o.forEach(l=>{const{runnerId:d,overallTime:h}=l,p=e.document.runners[d].filter(m=>m.distanceName===a);let E=!0;const R=p.reduce((m,b)=>{if(E){if(b.eventCode===r.eventCode||$e(b,t))return m;if(_e(b.startDateTime,r.startDateTime))if(E&&at(b.actualTime,h)){E=!1;return}else return m===void 0||at(b.actualTime,m.actualTime)?b:m;return m}},void 0);E&&R!==void 0&&c.push({finisher:l,fastestPreviousRace:R})}),c},Tr=(e,t,r)=>{const{event:n,runners:o}=e.document,a=[];return Object.entries(o).forEach(([c,l])=>{l.some(h=>h.teamCode===t&&_e(h.startDateTime,n.startDateTime)&&!$e(h,r))||a.push(parseInt(c,10))}),a},Or=(e,t)=>{const{event:r,runners:n}=e.document,o=[];return Object.entries(n).forEach(([a,c])=>{c.some(d=>d.distanceName===r.distanceName&&_e(d.startDateTime,r.startDateTime)&&!$e(d,t))||o.push(parseInt(a,10))}),o},jr=e=>e.document.results.items.filter(t=>t.ageGroupPlace<=10).map(t=>t.runnerId),it=e=>{const t=e.split(":").map(Number);let r=0;return t.length===3?(r+=t[0]*3600,r+=t[1]*60,r+=t[2]):t.length===2?(r+=t[0]*60,r+=t[1]):t.length===1&&(r+=t[0]),r},Ir=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return[t.toString().padStart(2,"0"),r.toString().padStart(2,"0"),n.toString().padStart(2,"0")].join(":")},Wr=[{headerName:"First Name",field:"finisher.firstName"},{headerName:"Last Name",field:"finisher.lastName"},{headerName:"PR Time",field:"finisher.overallTime"},{headerName:"Previous Fastest Time",field:"fastestPreviousRace.actualTime"},{headerName:"Previous Fastest Race",field:"fastestPreviousRace.eventName"},{headerName:"Date of Previous Fastest Race",field:"fastestPreviousRace.startDateTime",valueFormatter:e=>new Date(e.value).toLocaleDateString()},{headerName:"Improvement",valueGetter:e=>{const t=e.data?.finisher?.overallTime,r=e.data?.fastestPreviousRace?.actualTime;if(t&&r){const n=it(t);return it(r)-n}return 0},valueFormatter:e=>{const t=e.value;return t>0?Ir(t):"N/A"}}];function Lr({personalRecords:e}){return i.jsx(Ae,{columnDefs:Wr,rowData:e})}function Ur({data:e,personalRecords:t}){let r;if(e===void 0)r=i.jsx("p",{children:"Loading..."});else if(t===void 0)r=i.jsx("p",{children:"Loading..."});else if(e===null)r=i.jsx("p",{children:"Error loading personal records"});else if(t===null)r=i.jsx("p",{children:"Error loading personal records"});else{if(t.length===0)return i.jsx(i.Fragment,{});r=i.jsxs(i.Fragment,{children:[i.jsxs("h2",{children:["Personal Records (with NYRR)"," ",i.jsx(Ge,{count:t.length,className:Ve})]}),i.jsx(Lr,{personalRecords:t})]})}return i.jsx("div",{id:"personal-records",children:i.jsx(be,{children:r})})}function Hr({results:e,finisherIds:t,columns:r}){const n=t.map(o=>e.items.find(a=>a.runnerId===o)).filter(o=>o!==void 0);return i.jsx(Ae,{columnDefs:r,rowData:n})}const Vr=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase();function ze({data:e,finisherIds:t,title:r,columns:n}){let o;if(e===void 0)o=i.jsx("p",{children:"Loading..."});else if(t===void 0)o=i.jsx("p",{children:"Loading..."});else if(e===null)o=i.jsxs("p",{children:["Error loading ",r]});else if(t===null)o=i.jsxs("p",{children:["Error loading ",r]});else{if(t.length===0)return i.jsx(i.Fragment,{});o=i.jsxs(i.Fragment,{children:[i.jsxs("h2",{children:[r," ",i.jsx(Ge,{count:t.length,className:Ve})]}),i.jsx(Hr,{results:e.document.results,finisherIds:t,columns:n})]})}return i.jsx("div",{id:Vr(r),children:i.jsx(be,{children:o})})}function ct({data:e,finisherIds:t}){const r=[{headerName:"Age Group Place",field:"ageGroupPlace",cellRenderer:Fe},{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Age",field:"age"},{headerName:"Gender",field:"gender"},{headerName:"Overall Time",field:"overallTime"}];return i.jsx(ze,{finisherIds:t,title:"Top Ten Finishers",columns:r,data:e})}function _r({data:e,finisherIds:t}){const r=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"}];return i.jsx(ze,{finisherIds:t,title:"First Race With NBR",columns:r,data:e})}function $r({data:e,finisherIds:t}){const r=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"}];return i.jsx(ze,{finisherIds:t,title:`First ${e?.document.event.distanceUnitCode} With NYRR`,columns:r,data:e})}const zr="team-stats-api-teamstats-121655350650",Kr="us-east-1",Jr=`https://${zr}.s3.${Kr}.amazonaws.com`,qr=os.create({baseURL:Jr});function Yr({eventCode:e}){const t=as(async()=>(await qr.get(`/${e}.json`)).data,[e]),r=s.useContext(is),n=t&&jr(t);if(t?.document.event.isVirtual)return i.jsxs("div",{className:"content",children:[i.jsx(nt,{data:t}),i.jsx(rt,{data:t}),i.jsx(ct,{data:t,finisherIds:n}),i.jsx(st,{data:t})]});const o=t&&r&&Tr(t,ut,r.items),a=t&&r&&Or(t,r.items),c=t&&r&&Br(t,r.items);return i.jsxs("div",{className:"content",children:[i.jsx(nt,{data:t}),i.jsx(Gr,{data:t,nyrrPrSetters:c,firstTimeWithNBR:o,topTenFinishers:n,firstRaceOfDistanceWithNyrr:a}),i.jsx(rt,{data:t}),i.jsx(Ur,{data:t,personalRecords:c}),i.jsx(ct,{data:t,finisherIds:n}),i.jsx(_r,{data:t,finisherIds:o}),i.jsx($r,{data:t,finisherIds:a}),i.jsx(st,{data:t})]})}const en=Ft(function(){const{eventCode:t}=kt();return t?i.jsxs(i.Fragment,{children:[i.jsx(Yr,{eventCode:t}),i.jsx(ds,{})]}):i.jsx("div",{children:"Something went wrong"})});export{en as default};
