import{p as C,R as c,a as t,w as it,y as ut}from"./chunk-WWGJGFF6-Ddys8Jpy.js";import{G as xe,_ as dt,a as pt,b as Ne,c as Ke,C as ke,E as ge,d as ae,H as mt,e as ht,f as ft,g as Ct,h as gt,i as yt,j as vt,R as Rt,k as St,T as wt,l as bt,m as Et,n as Pt,o as Mt,p as kt,q as Ft,r as Ee,s as xt,t as Gt,v as Dt,w as At,x as Bt,F as Ot,y as Nt,z as Ge,V as It,B as Wt,D as Tt,I as jt,J as Ut,K as Ht,u as Lt}from"./main.esm-DoOjzeRY.js";import{a as Je,R as Vt}from"./index-BM8RSyYd.js";const _t=[0,40,50,60,70,80,90,100,110,120],$t=e=>_t.filter(s=>s<=e),zt=(e,s)=>!s[e]||!s[e][0]?0:s[e][0].length,Be={[xe.Women]:"Women",[xe.Men]:"Men",[xe.NonBinary]:"Non-Binary"},Kt=e=>{const s=["th","st","nd","rd"],r=e%100;return s[(r-20)%10]||s[r]||s[0]},qe=e=>{const s=Math.floor(e/1e3),r=Math.floor(s/3600),n=Math.floor(s%3600/60),o=s%60,a=[];return a.push(r.toString().padStart(2,"0")),a.push(n.toString().padStart(2,"0")),a.push(o.toString().padStart(2,"0")),a.join(":")},Jt=(e,s,r)=>{try{const n=s.find(o=>o.eventCode===e);return n?!s.some(o=>o.teamCode===r&&new Date(o.startDateTime).valueOf()<new Date(n.startDateTime).valueOf()):!1}catch(n){return console.error("Error in isFirstRaceWithTeam:",{races:s},n),!1}},Ue={1:"ðŸ¥‡",2:"ðŸ¥ˆ",3:"ðŸ¥‰"};function Qe({n:e,ordinal:s=!1}){return C.jsxs("span",{className:"place",children:[Ue[e]?Ue[e]+" ":"",e,s?Kt(e):""]})}var X=c.createContext({}),Ye=c.createContext("default"),we=(e,s,r,n)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const a=e.newAgStackInstance();let i,l,u=!1;return a.then(m=>{if(u){s.destroyBean(m);return}i=m,l=i.getGui(),r.appendChild(l),He(n,i)}),()=>{u=!0,i&&(l?.remove(),s.destroyBean(i),n&&He(n,void 0))}},He=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},ne=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),oe=class Xe{constructor(...s){this.classesMap={};for(const r of s)this.classesMap[r]=!0}setClass(s,r){if(!!this.classesMap[s]==r)return this;const o=new Xe;return o.classesMap={...this.classesMap},o.classesMap[s]=r,o}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ye=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},Oe=c.version?.split(".")[0],Ze=Oe==="16"||Oe==="17";function qt(){return Oe==="19"}var Pe=!1;function Qt(e){return Pe||setTimeout(()=>Pe=!1,0),Pe=!0,e()}var Se=(e,s)=>{!Ze&&e&&!Pe?Vt.flushSync(s):s()},Yt=e=>{Ze?e():c.startTransition(e)};function Xt(e,s,r){return c.useSyncExternalStore?c.useSyncExternalStore(e,s):r}function Me(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const n=[],o=[],a=new Map,i=new Map;for(let l=0;l<s.length;l++){const u=s[l];i.set(u.instanceId,u)}for(let l=0;l<e.length;l++){const u=e[l];a.set(u.instanceId,u),i.has(u.instanceId)&&n.push(u)}for(let l=0;l<s.length;l++){const u=s[l],m=u.instanceId;a.has(m)||o.push(u)}return n.length===e.length&&o.length===0?e:n.length===0&&o.length===s.length?s:n.length===0?o:o.length===0?n:[...n,...o]}var et=t.forwardRef((e,s)=>{const{registry:r,context:n}=t.useContext(X),o=t.useRef(null),a=t.useRef(null),i=t.useRef(null),l=t.useRef(null),u=t.useRef(null),m=t.useRef(),[d,P]=t.useState(),[b,h]=t.useState(),[k,y]=t.useState(),[g,p]=t.useState(()=>new oe),[F,x]=t.useState(()=>new oe("ag-hidden")),[R,f]=t.useState(()=>new oe("ag-hidden")),[T,B]=t.useState(()=>new oe("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>we(d,n,a.current),[d]);const _=t.useCallback(U=>{if(o.current=U,!U||n.isDestroyed()){m.current=n.destroyBean(m.current);return}const G={setInnerRenderer:(D,L)=>{P(D),y(L)},setChildCount:D=>h(D),toggleCss:(D,L)=>p(A=>A.setClass(D,L)),setContractedDisplayed:D=>f(L=>L.setClass("ag-hidden",!D)),setExpandedDisplayed:D=>x(L=>L.setClass("ag-hidden",!D)),setCheckboxVisible:D=>B(L=>L.setClass("ag-invisible",!D)),setCheckboxSpacing:D=>B(L=>L.setClass("ag-group-checkbox-spacing",D))},H=r.createDynamicBean("groupCellRendererCtrl",!0);H&&(m.current=n.createBean(H),m.current.init(G,U,i.current,l.current,u.current,et,e))},[]),I=t.useMemo(()=>`ag-cell-wrapper ${g.toString()}`,[g]),O=t.useMemo(()=>`ag-group-expanded ${F.toString()}`,[F]),v=t.useMemo(()=>`ag-group-contracted ${R.toString()}`,[R]),w=t.useMemo(()=>`ag-group-checkbox ${T.toString()}`,[T]),S=d?.componentFromFramework,W=S?d.componentClass:void 0,E=d==null&&k!=null,J=dt(k);return c.createElement("span",{className:I,ref:_,...e.colDef?{}:{role:m.current?.getCellAriaRole()}},c.createElement("span",{className:O,ref:l}),c.createElement("span",{className:v,ref:u}),c.createElement("span",{className:w,ref:i}),c.createElement("span",{className:"ag-group-value",ref:a},E?J:S?c.createElement(W,{...d.params}):null),c.createElement("span",{className:"ag-group-child-count"},b))}),Le=et,Ie=t.createContext({setMethods:()=>{}}),Zt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:n,setMethods:o}=e,[{key:a,...i},l]=t.useState(s);return t.useEffect(()=>{r(u=>l(u))},[]),c.createElement(Ie.Provider,{value:{setMethods:o}},c.createElement(n,{key:a,...i}))},es=t.memo(Zt),ts=0;function Ve(){return`agPortalKey_${++ts}`}var tt=class{constructor(e,s,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Ve(),this.portalKey=Ve(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(o=>{this.resolveInstanceCreated=o})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const n=r[e];if(n)return n.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{this.componentInstance=s,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Je.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Fe(e,s,r){for(const n of e){const o=s[n];o&&(r[n]=o)}}var ce=class extends tt{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=es}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Fe(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},ss=class extends ce{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},rs=class extends ce{refresh(e){this.sourceParams=e,this.refreshProps()}},ns=class extends ce{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},os=class extends ce{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:n}=this;return e.label=s,e.icon=r,e.shake=n,e}},as=class extends ce{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const s=new ae(r=>{this.resolveFilterPassCallback=r});this.setModel(e).then(()=>{s.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},cs=class extends ce{constructor(){super(...arguments),this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function st(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var ls=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),st(this.floatingFilterParams,e)}},is=class extends ce{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),st(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},us=class extends ce{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},ds=class extends ce{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ps=class extends ce{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},ms=class extends ce{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},hs=class extends ce{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function We(){Ne(231)}var fs=1e3,Cs=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||fs}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Se(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},gs=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(X),[n,o]=t.useState(),[a,i]=t.useState(),l=t.useRef(),u=t.useRef(null),m=t.useRef(null),d=t.useRef(null),P=t.useRef(),b=t.useRef();s&&!b.current&&(b.current=new ke(()=>u.current));const h=t.useCallback(p=>{if(u.current=p,!p||!e.isAlive()||r.isDestroyed()){l.current=r.destroyBean(l.current);return}l.current=r.createBean(new ge);const F=()=>{const R=e.getSelectAllGui();R&&(m.current?.insertAdjacentElement("afterend",R),l.current.addDestroyFunc(()=>R.remove()))},x={setWidth:R=>{u.current&&(u.current.style.width=R)},toggleCss:(R,f)=>b.current.toggleCss(R,f),setUserStyles:R=>i(R),setAriaSort:R=>{u.current&&(R?xt(u.current,R):Gt(u.current))},setUserCompDetails:R=>o(R),getUserCompInstance:()=>P.current||void 0,refreshSelectAllGui:F,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(x,p,m.current,d.current,l.current),F()},[]);t.useLayoutEffect(()=>we(n,r,d.current,P),[n]),t.useEffect(()=>{e.setDragSource(u.current)},[n]);const k=t.useMemo(()=>!!(n?.componentFromFramework&&ye(n.componentClass)),[n]),y=n?.componentFromFramework,g=n?.componentClass;return c.createElement("div",{ref:h,style:a,className:"ag-header-cell",role:"columnheader"},c.createElement("div",{ref:m,className:"ag-header-cell-resize",role:"presentation"}),c.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},y?k?c.createElement(g,{...n.params}):c.createElement(g,{...n.params,ref:P}):null))},ys=t.memo(gs),vs=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Rs=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(X),[n,o]=t.useState(),[a,i]=t.useState(()=>new oe("ag-header-cell","ag-floating-filter")),[l,u]=t.useState(()=>new oe),[m,d]=t.useState(()=>new oe("ag-floating-filter-button","ag-hidden")),[P,b]=t.useState("false"),[h,k]=t.useState(),[,y]=t.useState(1),g=t.useRef(),p=t.useRef(null),F=t.useRef(null),x=t.useRef(null),R=t.useRef(null),f=t.useRef(),T=t.useRef(),B=D=>{D!=null&&f.current&&f.current(D)},_=t.useCallback(D=>{if(p.current=D,!D||!e.isAlive()||s.isDestroyed()){g.current=s.destroyBean(g.current);return}g.current=s.createBean(new ge),T.current=new ae(A=>{f.current=A});const L={toggleCss:(A,j)=>i(Q=>Q.setClass(A,j)),setUserStyles:A=>o(A),addOrRemoveBodyCssClass:(A,j)=>u(Q=>Q.setClass(A,j)),setButtonWrapperDisplayed:A=>{d(j=>j.setClass("ag-hidden",!A)),b(A?"false":"true")},setWidth:A=>{p.current&&(p.current.style.width=A)},setCompDetails:A=>k(A),getFloatingFilterComp:()=>T.current?T.current:null,setMenuIcon:A=>R.current?.appendChild(A)};e.setComp(L,D,R.current,F.current,g.current)},[]);t.useLayoutEffect(()=>we(h,s,F.current,B),[h]);const I=t.useMemo(()=>a.toString(),[a]),O=t.useMemo(()=>l.toString(),[l]),v=t.useMemo(()=>m.toString(),[m]),w=t.useMemo(()=>!!(h&&h.componentFromFramework&&ye(h.componentClass)),[h]),S=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),W=t.useMemo(()=>r.get("enableFilterHandlers"),[]),[E,J]=t.useState();t.useEffect(()=>{if(h?.componentFromFramework)if(S){const D=W?vs:ls,L=new D(h.params,()=>y(A=>A+1));B(L),J(L)}else We()},[h]);const U=E?.getProps(),G=h?.componentFromFramework,H=h?.componentClass;return c.createElement("div",{ref:_,style:n,className:I,role:"gridcell"},c.createElement("div",{ref:F,className:O,role:"presentation"},G?S?U&&c.createElement(Ie.Provider,{value:{setMethods:D=>E.setMethods(D)}},c.createElement(H,{...U})):c.createElement(H,{...h.params,ref:w?()=>{}:B}):null),c.createElement("div",{ref:x,"aria-hidden":P,className:v,role:"presentation"},c.createElement("button",{ref:R,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Ss=t.memo(Rs),ws=({ctrl:e})=>{const{context:s}=t.useContext(X),[r,n]=t.useState(),[o,a]=t.useState(()=>new oe),[i,l]=t.useState(()=>new oe),[u,m]=t.useState("false"),[d,P]=t.useState(),[b,h]=t.useState(),k=t.useRef(),y=t.useRef(null),g=t.useRef(null),p=t.useRef(null),F=t.useRef(),x=t.useCallback(I=>{if(y.current=I,!I||!e.isAlive()||s.isDestroyed()){k.current=s.destroyBean(k.current);return}k.current=s.createBean(new ge);const O={setWidth:v=>{y.current&&(y.current.style.width=v)},toggleCss:(v,w)=>a(S=>S.setClass(v,w)),setUserStyles:v=>n(v),setHeaderWrapperHidden:v=>{const w=p.current;w&&(v?w.style.setProperty("display","none"):w.style.removeProperty("display"))},setHeaderWrapperMaxHeight:v=>{const w=p.current;w&&(v!=null?w.style.setProperty("max-height",`${v}px`):w.style.removeProperty("max-height"),w.classList.toggle("ag-header-cell-comp-wrapper-limited-height",v!=null))},setUserCompDetails:v=>h(v),setResizableDisplayed:v=>{l(w=>w.setClass("ag-hidden",!v)),m(v?"false":"true")},setAriaExpanded:v=>P(v),getUserCompInstance:()=>F.current||void 0};e.setComp(O,I,g.current,p.current,k.current)},[]);t.useLayoutEffect(()=>we(b,s,p.current),[b]),t.useEffect(()=>{y.current&&e.setDragSource(y.current)},[b]);const R=t.useMemo(()=>!!(b?.componentFromFramework&&ye(b.componentClass)),[b]),f=t.useMemo(()=>"ag-header-group-cell "+o.toString(),[o]),T=t.useMemo(()=>"ag-header-cell-resize "+i.toString(),[i]),B=b?.componentFromFramework,_=b?.componentClass;return c.createElement("div",{ref:x,style:r,className:f,role:"columnheader","aria-expanded":d},c.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},B?R?c.createElement(_,{...b.params}):c.createElement(_,{...b.params,ref:F}):null),c.createElement("div",{ref:g,"aria-hidden":u,className:T}))},bs=t.memo(ws),Es=({ctrl:e})=>{const{gos:s,context:r}=t.useContext(X),{topOffset:n,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),a=t.useMemo(()=>s.get("tabIndex"),[]),[i,l]=t.useState(()=>e.getAriaRowIndex()),u=e.headerRowClass,[m,d]=t.useState(()=>o+"px"),[P,b]=t.useState(()=>n+"px"),h=t.useRef(null),[k,y]=t.useState(()=>e.getUpdatedHeaderCtrls()),g=t.useRef(),p=t.useRef(null),F=t.useCallback(f=>{if(p.current=f,!f||!e.isAlive()||r.isDestroyed()){g.current=r.destroyBean(g.current);return}g.current=r.createBean(new ge);const T={setHeight:B=>d(B),setTop:B=>b(B),setHeaderCtrls:(B,_,I)=>{const O=h.current,v=Me(O,B,_);v!==O&&(h.current=v,Se(I,()=>y(v)))},setWidth:B=>{p.current&&(p.current.style.width=B)},setRowIndex:B=>{l(B)}};e.setComp(T,g.current,!1)},[]),x=t.useMemo(()=>({height:m,top:P}),[m,P]),R=t.useCallback(f=>{switch(e.type){case"group":return c.createElement(bs,{ctrl:f,key:f.instanceId});case"filter":return c.createElement(Ss,{ctrl:f,key:f.instanceId});default:return c.createElement(ys,{ctrl:f,key:f.instanceId})}},[]);return c.createElement("div",{ref:F,className:u,role:"row",style:x,tabIndex:a,"aria-rowindex":i},k.map(R))},Ps=t.memo(Es),Ms=({pinned:e})=>{const[s,r]=t.useState(!0),[n,o]=t.useState([]),{context:a}=t.useContext(X),i=t.useRef(null),l=t.useRef(null),u=t.useRef(),m=e==="left",d=e==="right",P=!m&&!d,b=t.useCallback(y=>{if(i.current=y,!y||a.isDestroyed()){u.current=a.destroyBean(u.current);return}u.current=a.createBean(new mt(e));const g={setDisplayed:r,setCtrls:p=>o(p),setCenterWidth:p=>{l.current&&(l.current.style.width=p)},setViewportScrollLeft:p=>{i.current&&(i.current.scrollLeft=p)},setPinnedContainerWidth:p=>{i.current&&(i.current.style.width=p,i.current.style.minWidth=p,i.current.style.maxWidth=p)}};u.current.setComp(g,i.current)},[]),h=s?"":"ag-hidden",k=()=>n.map(y=>c.createElement(Ps,{ctrl:y,key:y.instanceId}));return m?c.createElement("div",{ref:b,className:"ag-pinned-left-header "+h,"aria-hidden":!s,role:"rowgroup"},k()):d?c.createElement("div",{ref:b,className:"ag-pinned-right-header "+h,"aria-hidden":!s,role:"rowgroup"},k()):P?c.createElement("div",{ref:b,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},c.createElement("div",{ref:l,className:"ag-header-container",role:"presentation"},k())):null},De=t.memo(Ms),ks=()=>{const[e,s]=t.useState(()=>new oe),[r,n]=t.useState(),{context:o}=t.useContext(X),a=t.useRef(null),i=t.useRef(),l=t.useCallback(d=>{if(a.current=d,!d||o.isDestroyed()){i.current=o.destroyBean(i.current);return}i.current=o.createBean(new ht);const P={toggleCss:(b,h)=>s(k=>k.setClass(b,h)),setHeightAndMinHeight:b=>n(b)};i.current.setComp(P,d,d)},[]),u=t.useMemo(()=>"ag-header "+e.toString(),[e]),m=t.useMemo(()=>({height:r,minHeight:r}),[r]);return c.createElement("div",{ref:l,className:u,style:m,role:"presentation"},c.createElement(De,{pinned:"left"}),c.createElement(De,{pinned:null}),c.createElement(De,{pinned:"right"}))},Fs=t.memo(ks),xs=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const n=r.parentElement;if(n){const o=document.createComment(e);return n.insertBefore(o,r),()=>{o.remove()}}}},[e])},he=xs,Gs=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},Ds=e=>{const s=t.useRef(e),r=t.useRef(),n=t.useRef(!1),o=t.useRef(!1),[,a]=t.useState(0);n.current&&(o.current=!0),t.useEffect(()=>(n.current||(r.current=s.current(),n.current=!0),a(i=>i+1),()=>{o.current&&r.current?.()}),[])},As=e=>{const[s,r]=t.useState(),n=t.useContext(X),{context:o,popupSvc:a,gos:i,editSvc:l}=n,{editDetails:u,cellCtrl:m,eParentCell:d}=e;return Ds(()=>{const{compDetails:P}=u,b=i.get("stopEditingWhenCellsLoseFocus");let h,k;if(!o.isDestroyed()){k=o.createBean(l.createPopupEditorWrapper(P.params));const y=k.getGui();if(e.jsChildComp){const f=e.jsChildComp.getGui();f&&y.appendChild(f)}const{column:g,rowNode:p}=m,F={column:g,rowNode:p,type:"popupCellEditor",eventSource:d,ePopup:y,position:u.popupPosition,keepWithinBounds:!0},x=a?.positionPopupByComponent.bind(a,F),R=a?.addPopup({modal:b,eChild:y,closeOnEsc:!0,closedCallback:()=>{m.onPopupEditorClosed()},anchorToElement:d,positionCallback:x,ariaOwns:d});h=R?R.hideFunc:void 0,r(k),e.jsChildComp?.afterGuiAttached?.()}return()=>{h?.(),o.destroyBean(k)}}),t.useLayoutEffect(()=>()=>{m.isCellFocused()&&s?.getGui().contains(ft(n))&&d.focus({preventScroll:!0})},[s]),s&&e.wrappedContent?Je.createPortal(e.wrappedContent,s.getGui()):null},_e=t.memo(As),Bs=(e,s,r)=>{const{compProxy:n}=e;r(n);const o=n.getProps(),a=ye(s);return c.createElement(Ie.Provider,{value:{setMethods:i=>n.setMethods(i)}},a?c.createElement(s,{...o}):c.createElement(s,{...o,ref:i=>n.setRef(i)}))},$e=(e,s,r)=>e.compProxy?Bs(e,s,r):c.createElement(s,{...e.compDetails.params,ref:r}),Os=(e,s,r,n,o)=>{const a=e.compDetails,i=a.componentClass,l=a.componentFromFramework&&!e.popup,u=a.componentFromFramework&&e.popup,m=!a.componentFromFramework&&e.popup;return l?$e(e,i,s):u?c.createElement(_e,{editDetails:e,cellCtrl:n,eParentCell:r,wrappedContent:$e(e,i,s)}):m&&o?c.createElement(_e,{editDetails:e,cellCtrl:n,eParentCell:r,jsChildComp:o}):null},Ns=(e,s,r,n,o,a,i=!1)=>{const{context:l}=t.useContext(X),u=t.useCallback(()=>{const m=o.current;if(!m)return;const d=m.getGui();d&&d.parentElement&&d.remove(),l.destroyBean(m),o.current=void 0},[]);t.useEffect(()=>{const m=e!=null&&!i,d=e?.compDetails&&!e.compDetails.componentFromFramework,P=s&&r==null;if(!(m&&d&&!P)){u();return}const h=e.compDetails;if(o.current){const y=o.current,p=y.refresh!=null&&e.force==!1?y.refresh(h.params):!1;if(p===!0||p===void 0)return;u()}h.newAgStackInstance().then(y=>{if(!y)return;const g=y.getGui();if(!g)return;(s?r:a.current).appendChild(g),o.current=y})},[e,s,n,i]),t.useEffect(()=>u,[])},rt=Ns,Is=({cellCtrl:e,parent:s})=>{const r=t.useRef(),n=t.useMemo(()=>{const{loadingComp:o}=e.getDeferLoadingCellRenderer();return o?{value:void 0,compDetails:o,force:!1}:void 0},[e]);if(rt(n,!1,void 0,1,r,s),n?.compDetails?.componentFromFramework){const o=n.compDetails.componentClass;return c.createElement(o,{...n.compDetails.params})}return c.createElement(c.Fragment,null)},Ws=({cellCtrl:e,printLayout:s,editingCell:r})=>{const n=t.useContext(X),{context:o}=n,{column:{colIdSanitised:a},instanceId:i}=e,l=t.useRef(),[u,m]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[d,P]=t.useState(),[b,h]=t.useState(1),[k,y]=t.useState(),[g,p]=t.useState(!1),[F,x]=t.useState(!1),[R,f]=t.useState(!1),[T,B]=t.useState(),_=t.useMemo(()=>e.isForceWrapper(),[e]),I=t.useMemo(()=>e.getCellAriaRole(),[e]),O=t.useRef(null),v=t.useRef(null),w=t.useRef(null),S=t.useRef(),W=t.useRef(),E=t.useRef(),J=t.useRef([]),U=t.useRef(),G=t.useRef(),[H,D]=t.useState(0),L=t.useCallback(N=>{G.current=N,D(V=>V+1)},[]),A=u!=null&&(g||R||F)&&(d==null||!!d.popup),j=_||A,Q=t.useMemo(()=>e.getCellValueClass(),[e]),ie=t.useCallback(N=>{if(W.current=N,N){const V=N.isCancelBeforeStart&&N.isCancelBeforeStart();setTimeout(()=>{V?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(N))})}},[e]),Z=t.useRef();Z.current||(Z.current=new ke(()=>O.current));const fe=!!d&&!d.popup;rt(u,j,G.current,H,S,O,fe);const Ce=t.useRef();t.useLayoutEffect(()=>{const N=Ce.current,V=u;if(Ce.current=u,N==null||N.compDetails==null||V==null||V.compDetails==null)return;U.current?.refreshVisibility();const Y=N.compDetails,q=V.compDetails;if(Y.componentClass!=q.componentClass||w.current?.refresh==null)return;w.current.refresh(q.params)!=!0&&h(z=>z+1)},[u]),t.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework)||o.isDestroyed())return;const V=d.compDetails,Y=d.popup===!0,q=V.newAgStackInstance();return q.then(M=>{if(!M)return;const z=M.getGui();ie(M),Y||((_?E:O).current?.appendChild(z),M.afterGuiAttached?.()),B(M)}),()=>{q.then(M=>{const z=M.getGui();e.disableEditorTooltipFeature(),o.destroyBean(M),ie(void 0),B(void 0),z?.remove()})}},[d]);const ve=t.useCallback(N=>{if(E.current=N,!N||o.isDestroyed()||!e.isAlive()){const q=J.current;J.current=[];for(const M of q)M();return}let V;const Y=q=>{q&&(N.insertAdjacentElement("afterbegin",q.getGui()),J.current.push(()=>{Dt(q.getGui()),o.destroyBean(q),U.current===V&&(U.current=void 0)}))};g&&Y(e.createSelectionCheckbox()),R&&Y(e.createDndSource()),F&&(V=e.createRowDragComp(),U.current=V,V&&(Y(V),V.refreshVisibility()))},[e,o,R,F,g]),$=t.useCallback(()=>{const N=!e.isCellSpanning()||v.current,V=O.current;if(!V||!N||!e||!e.isAlive()||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new ge);const Y={toggleCss:(M,z)=>Z.current.toggleCss(M,z),setUserStyles:M=>y(M),getFocusableElement:()=>O.current,setIncludeSelection:M=>p(M),setIncludeRowDrag:M=>x(M),setIncludeDndSource:M=>f(M),getCellEditor:()=>W.current??null,getCellRenderer:()=>w.current??S.current,getParentOfValue:()=>G.current??E.current??O.current,setRenderDetails:(M,z,te)=>{const ue=()=>{m(se=>se?.compDetails!==M||se?.value!==z||se?.force!==te?{value:z,compDetails:M,force:te}:se)};if(M?.params?.deferRender&&!e.rowNode.group){const{loadingComp:se,onReady:Re}=e.getDeferLoadingCellRenderer();if(se){m({value:void 0,compDetails:se,force:!1}),Re.then(()=>Yt(ue));return}}ue()},setEditDetails:(M,z,te,ue)=>{if(M){let se;M.componentFromFramework&&(ue?se=new Gs(M.params,()=>h(Re=>Re+1)):We()),P({compDetails:M,popup:z,popupPosition:te,compProxy:se}),z||m(void 0)}else e.hasBrowserFocus()&&Y.getFocusableElement().focus({preventScroll:!0}),W.current=void 0,P(void 0)},refreshEditStyles:(M,z)=>{if(!O.current)return;const{current:te}=Z;te.toggleCss("ag-cell-value",!j),te.toggleCss("ag-cell-inline-editing",!!M&&!z),te.toggleCss("ag-cell-popup-editing",!!M&&!!z),te.toggleCss("ag-cell-not-inline-editing",!M||!!z)}},q=E.current||void 0;e.setComp(Y,V,v.current??void 0,q,s,r,l.current)},[]),me=t.useCallback(N=>{O.current=N,$()},[]),ee=t.useCallback(N=>{v.current=N,$()},[]),le=t.useMemo(()=>!!(u?.compDetails?.componentFromFramework&&ye(u.compDetails.componentClass)),[u]);t.useLayoutEffect(()=>{if(!O.current)return;const{current:N}=Z;N.toggleCss("ag-cell-value",!j),N.toggleCss("ag-cell-inline-editing",!!d&&!d.popup),N.toggleCss("ag-cell-popup-editing",!!d&&!!d.popup),N.toggleCss("ag-cell-not-inline-editing",!d||!!d.popup)});const de=()=>{const{compDetails:N,value:V}=u;if(!N)return V?.toString?.()??V;if(N.componentFromFramework){const Y=N.componentClass;return c.createElement(t.Suspense,{fallback:c.createElement(Is,{cellCtrl:e,parent:O})},le?c.createElement(Y,{...N.params,key:b}):c.createElement(Y,{...N.params,key:b,ref:w}))}},pe=()=>{const N=()=>u==null?null:j?c.createElement("span",{role:"presentation",id:`cell-${i}`,className:Q,ref:L},de()):de(),V=Y=>Os(Y,ie,O.current,e,T);return d!=null?d.popup?c.createElement(c.Fragment,null,N(),V(d)):V(d):N()},be=()=>c.createElement("div",{ref:me,style:k,role:I,"col-id":a},j?c.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ve},pe()):pe());return e.isCellSpanning()?c.createElement("div",{ref:ee,className:"ag-spanned-cell-wrapper",role:"presentation"},be()):be()},Ts=t.memo(Ws),js=({rowCtrl:e,containerType:s})=>{const{context:r,gos:n,editSvc:o}=t.useContext(X),a=t.useContext(Ye)==="default",i=t.useRef(),l=t.useRef(e.getDomOrder()),u=e.isFullWidth(),m=e.rowNode.displayed,[d,P]=t.useState(()=>m?e.rowNode.getRowIndexString():null),[b,h]=t.useState(()=>e.rowId),[k,y]=t.useState(()=>e.businessKey),[g,p]=t.useState(()=>e.rowStyles),F=t.useRef(null),[x,R]=t.useState(()=>null),[f,T]=t.useState(),[B,_]=t.useState(()=>m?e.getInitialRowTop(s):void 0),[I,O]=t.useState(()=>m?e.getInitialTransform(s):void 0),v=t.useRef(null),w=t.useRef(),S=t.useRef(),W=t.useRef(!1),[E,J]=t.useState(0);t.useEffect(()=>{if(W.current||!f||E>10)return;const $=v.current?.firstChild;$?(e.setupDetailRowAutoHeight($),W.current=!0):J(me=>me+1)},[f,E]);const U=t.useRef();U.current||(U.current=new ke(()=>v.current));const G=t.useRef(()=>{}),H=t.useCallback($=>(G.current=$,()=>{G.current=()=>{}}),[]),D=Xt(H,()=>F.current,[]),L=a?D:x,A=t.useCallback($=>{if(v.current=$,i.current=$?r.createBean(new ge):r.destroyBean(i.current),!$){e.unsetComp(s);return}if(!e.isAlive()||r.isDestroyed())return;const me={setTop:_,setTransform:O,toggleCss:(ee,le)=>U.current.toggleCss(ee,le),setDomOrder:ee=>l.current=ee,setRowIndex:P,setRowId:h,setRowBusinessKey:y,setUserStyles:p,setCellCtrls:(ee,le)=>{const de=F.current,pe=Me(de,ee,l.current);pe!==de&&(F.current=pe,a?G.current():Se(le,()=>R(pe)))},showFullWidth:ee=>{S.current=ee.params,T(ee)},getFullWidthCellRenderer:()=>w.current,getFullWidthCellRendererParams:()=>S.current,refreshFullWidth:ee=>{const le=ee();return S.current=le,fe.current?(T(de=>({...de,params:le})),!0):!w.current||!w.current.refresh?!1:w.current.refresh(le)}};e.setComp(me,$,s,i.current)},[]);t.useLayoutEffect(()=>we(f,r,v.current,w),[f]);const j=t.useMemo(()=>{const $={top:B,transform:I};return Object.assign($,g),$},[B,I,g]),Q=u&&f?.componentFromFramework,ie=!u&&L!=null,Z=t.useMemo(()=>!!(f?.componentFromFramework&&ye(f.componentClass)),[f]),fe=t.useRef(!1);t.useEffect(()=>{fe.current=Z&&!!f&&!!n.get("reactiveCustomComponents")},[Z,f]);const Ce=()=>L?.map($=>c.createElement(Ts,{cellCtrl:$,editingCell:o?.isEditing($,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:$.instanceId})),ve=()=>{const $=f.componentClass;return Z?c.createElement($,{...f.params}):c.createElement($,{...f.params,ref:w})};return c.createElement("div",{ref:A,role:"row",style:j,"row-index":d,"row-id":b,"row-business-key":k},ie?Ce():Q?ve():null)},ze=t.memo(js),Us=({name:e})=>{const{context:s,gos:r}=t.useContext(X),n=t.useMemo(()=>Ct(e),[e]),o=t.useRef(null),a=t.useRef(null),i=t.useRef(null),l=t.useRef([]),u=t.useRef([]),[m,d]=t.useState(()=>[]),P=!!r.get("enableCellSpan")&&!!n.getSpannedRowCtrls,b=t.useRef([]),h=t.useRef([]),[k,y]=t.useState(()=>[]),g=t.useRef(!1),p=t.useRef(),F=t.useMemo(()=>ne("ag-viewport",gt(e)),[e]),x=t.useMemo(()=>ne(yt(e)),[e]),R=t.useMemo(()=>ne("ag-spanning-container",vt(e)),[e]),f=n.type==="center"||P,T=f?o:a;he(" AG Row Container "+e+" ",T);const B=t.useCallback(()=>{const E=!f||o.current!=null,J=a.current!=null,U=!P||i.current!=null;return E&&J&&U},[]),_=t.useCallback(()=>o.current==null&&a.current==null&&i.current==null,[]),I=t.useCallback(()=>{if(_()&&(p.current=s.destroyBean(p.current)),!s.isDestroyed()&&B()){const E=G=>{const H=Me(u.current,l.current,g.current);H!==u.current&&(u.current=H,Se(G,()=>d(H)))},J=G=>{const H=Me(h.current,b.current,g.current);H!==h.current&&(h.current=H,Se(G,()=>y(H)))},U={setHorizontalScroll:G=>{o.current&&(o.current.scrollLeft=G)},setViewportHeight:G=>{o.current&&(o.current.style.height=G)},setRowCtrls:({rowCtrls:G,useFlushSync:H})=>{const D=!!H&&l.current.length>0&&G.length>0;l.current=G,E(D)},setSpannedRowCtrls:(G,H)=>{const D=!!H&&b.current.length>0&&G.length>0;b.current=G,J(D)},setDomOrder:G=>{g.current!=G&&(g.current=G,E(!1))},setContainerWidth:G=>{a.current&&(a.current.style.width=G)},setOffsetTop:G=>{a.current&&(a.current.style.transform=`translateY(${G})`)}};p.current=s.createBean(new Rt(e)),p.current.setComp(U,a.current,i.current??void 0,o.current)}},[B,_]),O=t.useCallback(E=>{a.current=E,I()},[I]),v=t.useCallback(E=>{i.current=E,I()},[I]),w=t.useCallback(E=>{o.current=E,I()},[I]),S=()=>c.createElement("div",{className:x,ref:O,role:f?"presentation":"rowgroup"},m.map(E=>c.createElement(ze,{rowCtrl:E,containerType:n.type,key:E.instanceId})));if(!f)return S();const W=()=>c.createElement("div",{className:R,ref:v,role:"presentation"},k.map(E=>c.createElement(ze,{rowCtrl:E,containerType:n.type,key:E.instanceId})));return c.createElement("div",{className:F,ref:w,role:"rowgroup"},S(),P?W():null)},Hs=t.memo(Us),Ls=()=>{const e=t.useContext(X),{context:s,overlays:r}=e,[n,o]=t.useState(""),[a,i]=t.useState(0),[l,u]=t.useState(0),[m,d]=t.useState("0px"),[P,b]=t.useState("0px"),[h,k]=t.useState("100%"),[y,g]=t.useState("0px"),[p,F]=t.useState("0px"),[x,R]=t.useState("100%"),[f,T]=t.useState(!0),[B,_]=t.useState(!0),[I,O]=t.useState(null),[v,w]=t.useState(""),[S,W]=t.useState(null),[E,J]=t.useState("ag-layout-normal"),U=t.useRef();U.current||(U.current=new ke(()=>G.current));const G=t.useRef(null),H=t.useRef(null),D=t.useRef(null),L=t.useRef(null),A=t.useRef(null),j=t.useRef(null),Q=t.useRef(null),ie=t.useRef([]),Z=t.useRef([]);he(" AG Grid Body ",G),he(" AG Pinned Top ",H),he(" AG Sticky Top ",D),he(" AG Middle ",j),he(" AG Pinned Bottom ",Q);const fe=t.useCallback(M=>{if(G.current=M,!M||s.isDestroyed()){ie.current=s.destroyBeans(ie.current);for(const K of Z.current)K();Z.current=[];return}const z=(K,re)=>{K.appendChild(re),Z.current.push(()=>re.remove())},te=K=>{const re=s.createBean(new K);return ie.current.push(re),re},ue=(K,re,lt)=>{z(K,document.createComment(lt)),z(K,te(re).getGui())};ue(M,Ot," AG Fake Horizontal Scroll ");const se=r?.getOverlayWrapperCompClass();se&&ue(M,se," AG Overlay Wrapper "),A.current&&ue(A.current,Nt," AG Fake Vertical Scroll ");const Re={setRowAnimationCssOnBodyViewport:o,setColumnCount:K=>{G.current&&Bt(G.current,K)},setRowCount:K=>{G.current&&At(G.current,K)},setTopHeight:i,setBottomHeight:u,setStickyTopHeight:d,setStickyTopTop:b,setStickyTopWidth:k,setTopInvisible:T,setBottomInvisible:_,setColumnMovingCss:(K,re)=>U.current.toggleCss(K,re),updateLayoutClasses:J,setAlwaysVerticalScrollClass:O,setPinnedTopBottomOverflowY:w,setCellSelectableCss:(K,re)=>W(re?K:null),setBodyViewportWidth:K=>{j.current&&(j.current.style.width=K)},registerBodyViewportResizeListener:K=>{if(j.current){const re=Ke(e,j.current,K);Z.current.push(()=>re())}},setStickyBottomHeight:g,setStickyBottomBottom:F,setStickyBottomWidth:R,setGridRootRole:K=>M.setAttribute("role",K)},je=s.createBean(new St);ie.current.push(je),je.setComp(Re,M,j.current,H.current,Q.current,D.current,L.current)},[]),Ce=t.useMemo(()=>ne("ag-root","ag-unselectable",E),[E]),ve=t.useMemo(()=>ne("ag-body-viewport",n,E,I,S),[n,E,I,S]),$=t.useMemo(()=>ne("ag-body",E),[E]),me=t.useMemo(()=>ne("ag-floating-top",f?"ag-invisible":null,S),[S,f]),ee=t.useMemo(()=>ne("ag-sticky-top",S),[S]),le=t.useMemo(()=>ne("ag-sticky-bottom",y==="0px"?"ag-invisible":null,S),[S,y]),de=t.useMemo(()=>ne("ag-floating-bottom",B?"ag-invisible":null,S),[S,B]),pe=t.useMemo(()=>({height:a,minHeight:a,overflowY:v}),[a,v]),be=t.useMemo(()=>({height:m,top:P,width:h}),[m,P,h]),N=t.useMemo(()=>({height:y,bottom:p,width:x}),[y,p,x]),V=t.useMemo(()=>({height:l,minHeight:l,overflowY:v}),[l,v]),Y=M=>c.createElement(Hs,{name:M,key:`${M}-container`}),q=({section:M,children:z,className:te,style:ue})=>c.createElement("div",{ref:M,className:te,role:"presentation",style:ue},z.map(Y));return c.createElement("div",{ref:fe,className:Ce},c.createElement(Fs,null),q({section:H,className:me,style:pe,children:["topLeft","topCenter","topRight","topFullWidth"]}),c.createElement("div",{className:$,ref:A,role:"presentation"},q({section:j,className:ve,children:["left","center","right","fullWidth"]})),q({section:D,className:ee,style:be,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),q({section:L,className:le,style:N,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),q({section:Q,className:de,style:V,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},Vs=t.memo(Ls),_s=(e,s)=>{const{children:r,eFocusableElement:n,onTabKeyDown:o,gridCtrl:a,forceFocusOutWhenTabGuardsAreEmpty:i,isEmpty:l}=e,{context:u}=t.useContext(X),m=t.useRef(null),d=t.useRef(null),P=t.useRef(),b=p=>{const F=p==null?void 0:parseInt(p,10).toString();for(const x of[m,d])F===void 0?x.current?.removeAttribute("tabindex"):x.current?.setAttribute("tabindex",F)};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(p){P.current?.forceFocusOutOfContainer(p)}}));const h=t.useCallback(()=>{const p=m.current,F=d.current;if(!p&&!F||u.isDestroyed()){P.current=u.destroyBean(P.current);return}if(p&&F){const x={setTabIndex:b};P.current=u.createBean(new wt({comp:x,eTopGuard:p,eBottomGuard:F,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:i,focusInnerElement:R=>a.focusInnerElement(R),isEmpty:l}))}},[]),k=t.useCallback(p=>{m.current=p,h()},[h]),y=t.useCallback(p=>{d.current=p,h()},[h]),g=p=>{const F=p==="top"?Ge.TAB_GUARD_TOP:Ge.TAB_GUARD_BOTTOM;return c.createElement("div",{className:`${Ge.TAB_GUARD} ${F}`,role:"presentation",ref:p==="top"?k:y})};return c.createElement(c.Fragment,null,g("top"),r,g("bottom"))},$s=t.forwardRef(_s),zs=t.memo($s),Ks=({context:e})=>{const[s,r]=t.useState(""),[n,o]=t.useState(""),[a,i]=t.useState(null),[l,u]=t.useState(null),[m,d]=t.useState(!1),[P,b]=t.useState(),h=t.useRef(),k=t.useRef(null),y=t.useRef(),[g,p]=t.useState(null),F=t.useRef(()=>{}),x=t.useRef(),R=t.useRef([]),f=t.useCallback(()=>{},[]);he(" AG Grid ",k);const T=t.useCallback(w=>{if(k.current=w,h.current=w?e.createBean(new bt):e.destroyBean(h.current),!w||e.isDestroyed())return;const S=h.current;F.current=S.focusInnerElement.bind(S);const W={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:E=>{if(!E&&x.current?.isDisplayed()){x.current.forceFocusOutOfContainer(E);return}y.current?.forceFocusOutOfContainer(E)},updateLayoutClasses:o,getFocusableContainers:()=>{const E=[],J=k.current?.querySelector(".ag-root");J&&E.push({getGui:()=>J});for(const U of R.current)U.isDisplayed()&&E.push(U);return E},setCursor:i,setUserSelect:u};S.setComp(W,w,w),d(!0)},[]);t.useEffect(()=>{const w=h.current,S=k.current;if(!P||!w||!g||!S||e.isDestroyed())return;const W=[],{watermarkSelector:E,paginationSelector:J,sideBarSelector:U,statusBarSelector:G,gridHeaderDropZonesSelector:H}=w.getOptionalSelectors(),D=[];if(H){const A=e.createBean(new H.component),j=A.getGui();S.insertAdjacentElement("afterbegin",j),D.push(j),W.push(A)}if(U){const A=e.createBean(new U.component),j=A.getGui(),Q=g.querySelector(".ag-tab-guard-bottom");Q&&(Q.insertAdjacentElement("beforebegin",j),D.push(j)),W.push(A),R.current.push(A)}const L=A=>{const j=e.createBean(new A),Q=j.getGui();return S.insertAdjacentElement("beforeend",Q),D.push(Q),W.push(j),j};if(G&&L(G.component),J){const A=L(J.component);x.current=A,R.current.push(A)}return E&&L(E.component),()=>{e.destroyBeans(W);for(const A of D)A.remove()}},[P,g,e]);const B=t.useMemo(()=>ne("ag-root-wrapper",s,n),[s,n]),_=t.useMemo(()=>ne("ag-root-wrapper-body","ag-focus-managed",n),[n]),I=t.useMemo(()=>({userSelect:l??"",WebkitUserSelect:l??"",cursor:a??""}),[l,a]),O=t.useCallback(w=>{y.current=w,b(w!==null)},[]),v=t.useCallback(()=>!h.current?.isFocusable(),[]);return c.createElement("div",{ref:T,className:B,style:I,role:"presentation"},c.createElement("div",{className:_,ref:p,role:"presentation"},m&&g&&!e.isDestroyed()&&c.createElement(X.Provider,{value:e.getBeans()},c.createElement(zs,{ref:O,eFocusableElement:g,onTabKeyDown:f,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:v},c.createElement(Vs,null)))))},Js=t.memo(Ks),qs=class extends Tt{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(s=>!!s.eGui))}},nt={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Qs={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...nt},ot=new Set(Object.keys(Qs)),Ys=new Set(Object.keys(nt)),at=e=>{const s=t.useRef(),r=t.useRef(null),n=t.useRef(null),o=t.useRef([]),a=t.useRef([]),i=t.useRef(e),l=t.useRef(),u=t.useRef(),m=t.useRef(!1),[d,P]=t.useState(void 0),[,b]=t.useState(0),h=t.useRef(),k=x=>{const R=r.current?.classList,f=(T="")=>T.trim().split(/\s+/g).filter(Boolean);if(h.current!==x){for(const T of f(h.current))R?.contains(T)&&R.remove(T);for(const T of f(x))R?.contains(T)||R?.add(T);h.current=x}};t.useLayoutEffect(()=>{k(e.className)},[e.className]);const y=t.useCallback(x=>{if(r.current=x,k(e.className),!x){for(const S of o.current)S();o.current.length=0;return}const R=e.modules||[];n.current||(n.current=new Cs(()=>b(S=>S+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{n.current?.destroy(),n.current=null}));const f=Mt(e.gridOptions,e,Object.keys(e).filter(S=>!ot.has(S))),T=()=>{if(m.current){const S=()=>l.current?.shouldQueueUpdates()?void 0:a.current.shift();let W=S();for(;W;)W(),W=S()}},B=new tr(T);l.current=B;const _=new qs,I={providedBeanInstances:{frameworkCompWrapper:new Zs(n.current,f),renderStatus:_},modules:R,frameworkOverrides:B,setThemeOnGridDiv:!0},O=S=>{P(S),S.createBean(_),o.current.push(()=>{S.destroy()}),S.getBean("ctrlsSvc").whenReady({addDestroyFunc:W=>{o.current.push(W)}},()=>{if(S.isDestroyed())return;const W=s.current;W&&e.passGridApi?.(W)})},v=S=>{S.getBean("ctrlsSvc").whenReady({addDestroyFunc:W=>{o.current.push(W)}},()=>{for(const W of a.current)W();a.current.length=0,m.current=!0})},w=new kt;f.gridId??(f.gridId=u.current),s.current=w.create(x,f,O,v,I),o.current.push(()=>{s.current=void 0}),s.current&&(u.current=s.current.getGridId())},[]),g=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),p=t.useCallback(x=>{m.current&&!l.current?.shouldQueueUpdates()?x():a.current.push(x)},[]);t.useEffect(()=>{const x=Xs(i.current,e);i.current=e,p(()=>{s.current&&Ft(x,s.current)})},[e]);const F=!c.useSyncExternalStore||Ee(e,"renderingMode")==="legacy"?"legacy":"default";return c.createElement("div",{style:g,ref:y},c.createElement(Ye.Provider,{value:F},d&&!d.isDestroyed()?c.createElement(Js,{key:d.instanceId,context:d}):null,n.current?.getPortals()??null))};function Xs(e,s){const r={};for(const n of Object.keys(s)){if(ot.has(n)){Ys.has(n)&&Ne(274,{prop:n});continue}const o=s[n];e[n]!==o&&(r[n]=o)}return r}var Zs=class extends Wt{constructor(e,s){super(),this.parent=e,this.gridOptions=s}createWrapper(e,s){const r=this.gridOptions;if(Ee(r,"reactiveCustomComponents")){const i=(l=>{switch(l){case"filter":return Ee(r,"enableFilterHandlers")?cs:as;case"floatingFilterComponent":return Ee(r,"enableFilterHandlers")?us:is;case"dateComponent":return ns;case"dragAndDropImageComponent":return os;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return rs;case"statusPanel":return ms;case"toolPanel":return hs;case"menuItem":return ps;case"cellRenderer":return ss;case"innerHeaderComponent":return ds}})(s.name);if(i)return new i(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":We();break}const o=!s.cellRenderer&&s.name!=="toolPanel";return new tt(e,this.parent,s,o)}},er=t.forwardRef((e,s)=>{const r=t.useContext(X),{registry:n,context:o,gos:a,rowModel:i}=r,[l,u]=t.useState(()=>new oe),[m,d]=t.useState(()=>new oe),[P,b]=t.useState(),[h,k]=t.useState(),y=t.useRef(),g=t.useRef(null),p=t.useRef(),F=t.useMemo(()=>pt(e.api.getGridId(),P?.rowModelType??"clientSide"),[e]),x=t.useMemo(()=>l.toString()+" ag-details-row",[l]),R=t.useMemo(()=>m.toString()+" ag-details-grid",[m]);s&&t.useImperativeHandle(s,()=>({refresh(){return y.current?.refresh()??!1}})),e.template&&Ne(230);const f=t.useCallback(B=>{if(g.current=B,!B||o.isDestroyed()){y.current=o.destroyBean(y.current),p.current?.();return}const _={toggleCss:(O,v)=>u(w=>w.setClass(O,v)),toggleDetailGridCss:(O,v)=>d(w=>w.setClass(O,v)),setDetailGrid:O=>b(O),setRowData:O=>k(O),getGui:()=>g.current},I=n.createDynamicBean("detailCellRendererCtrl",!0);if(I&&(o.createBean(I),I.init(_,e),y.current=I,a.get("detailRowAutoHeight"))){const O=()=>{if(g.current==null)return;const v=g.current.clientHeight;v!=null&&v>0&&setTimeout(()=>{e.node.setRowHeight(v),(Et(a)||Pt(a))&&i.onRowHeightChanged()},0)};p.current=Ke(r,B,O),O()}},[]),T=t.useCallback(B=>{y.current?.registerDetailWithMaster(B)},[]);return c.createElement("div",{className:x,ref:f},P&&c.createElement(at,{className:R,...P,modules:F,rowData:h,passGridApi:T}))}),tr=class extends It{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Le,agGroupRowRenderer:Le,agDetailCellRenderer:er},this.wrapIncoming=(s,r)=>r==="ensureVisible"?Qt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return qt()}},sr=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const s of this.apiListeners)s(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return c.createElement(at,{...this.props,passGridApi:this.setGridApi})}};const rr=12;function ct({rowData:e,columnDefs:s}){const r=e.length>rr;return C.jsx("div",{className:r?"table-container-large":"table-container",children:C.jsx(sr,{tooltipShowDelay:0,rowData:e,columnDefs:s,autoSizeStrategy:{type:"fitCellContents"},domLayout:r?"normal":"autoHeight"})})}const Ae=e=>C.jsx(Qe,{n:e.value,ordinal:!1}),nr=e=>e.value?C.jsx("span",{className:"welcome-symbol",children:"ðŸ‘‹"}):C.jsx(C.Fragment,{}),or=[{headerName:"Place Overall",field:"overallPlace",cellRenderer:Ae},{headerName:"Place in Gender",field:"genderPlace",cellRenderer:Ae},{headerName:"Place in Age Group",field:"ageGroupPlace",cellRenderer:Ae},{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Gender",field:"gender"},{headerName:"Pace",field:"pace"},{headerName:"Overall Time",field:"overallTime"},{headerName:"Age",field:"age"},{headerName:"Place in Gender (Age Graded)",field:"ageGradePlace"},{headerName:"Percent (Age Graded)",field:"ageGradePercent"},{headerName:"City",field:"city"},{headerName:"State",field:"stateProvince"},{headerName:"Country",field:"countryCode"}];function ar({eventCode:e,results:s,runners:r}){const n={valueGetter:o=>{const a=o.data?.runnerId;if(a===void 0)return!1;const i=r[a];return Jt(e,i,jt)},cellRenderer:nr,tooltipValueGetter:o=>o.value?"First race with NBR!":""};return C.jsx(ct,{rowData:s,columnDefs:[n,...or]})}function cr({eventCode:e,results:s,gender:r,runners:n}){const o=zt(r,s);if(o===0)return C.jsx(C.Fragment,{});const a=s[r];return C.jsx("div",{className:"gender-finishers bg-white dark:bg-stone-900",children:Object.entries(a).map(([i,l])=>C.jsxs("div",{children:[C.jsx("h4",{children:i==="0"?`Overall ${Be[r]} (${o})`:`Masters ${i}+ (${l.length})`}),C.jsx(ar,{eventCode:e,results:l,runners:n})]},`${r}-${i}`))})}function Te({children:e}){return C.jsx("section",{className:"bg-stone-200 dark:bg-stone-800",children:e})}function lr({data:e}){let s;if(e===void 0)s=C.jsx("p",{children:"Loading..."});else if(e===null)s=C.jsx("p",{children:"Error loading results"});else{const{results:r,runners:n}=e.document;if(r.items.length===0)return C.jsx(C.Fragment,{});const o={};Object.values(r.items).forEach(a=>{o[a.gender]||(o[a.gender]={}),$t(a.age).forEach(l=>{o[a.gender][l]||(o[a.gender][l]=[]),o[a.gender][l].push(a)})}),s=C.jsxs(C.Fragment,{children:[C.jsxs("h2",{children:["Total Finishers (",r.items.length,")"]}),Ut.map(a=>C.jsx(cr,{eventCode:e.document.event.eventCode,results:o,gender:a,runners:n},a))]})}return C.jsx("div",{id:"overall-results",children:C.jsx(Te,{children:s})})}const ir=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Finish Time",field:"finishTime",valueFormatter:e=>qe(e.value)}];function ur({runners:e}){return C.jsx(ct,{rowData:e,columnDefs:ir})}function dr({data:e}){let s;if(e===void 0)s=C.jsx("p",{children:"Loading..."});else if(e===null)s=C.jsx("p",{children:"Error loading awards"});else{const{awards:r}=e.document;if(r.length===0)return C.jsx(C.Fragment,{});s=C.jsxs(C.Fragment,{children:[C.jsx("h2",{children:"Awards"}),r.map(n=>{const o=n.minimumAge===0?`Open Class ${Be[n.teamGender]}`:`Master's ${Be[n.teamGender]} ${n.minimumAge}+`;return C.jsxs("div",{children:[C.jsx("h3",{children:o}),qe(n.summaryTime)," -"," ",C.jsx(Qe,{n:n.teamOrder,ordinal:!0})," Place",C.jsx(ur,{runners:n.runners.items})]},`award-${n.teamCode}-${n.teamGender}-${n.minimumAge}`)})]})}return C.jsx("div",{id:"awards",children:C.jsx(Te,{children:s})})}function pr({data:e}){let s;if(e===void 0)s=C.jsx("p",{children:"Loading..."});else if(e===null)s=C.jsx("p",{children:"Error loading event details"});else{const{event:r}=e.document;s=C.jsxs(C.Fragment,{children:[C.jsxs("p",{children:[C.jsx("b",{children:"Date and Time: "}),r&&new Date(r.startDateTime).toLocaleString("en-US",{dateStyle:"full",timeStyle:"medium"})]}),r?.venue&&C.jsxs("p",{children:[C.jsx("b",{children:"Location: "}),r.venue]}),r?.weather&&C.jsxs("p",{children:[C.jsx("b",{children:"Weather: "}),r.weather]})]})}return C.jsx("div",{id:"event-details",children:C.jsx(Te,{children:s})})}const mr="team-stats-api-teamstats-121655350650",hr="us-east-1",fr=`https://${mr}.s3.${hr}.amazonaws.com`,Cr=Ht.create({baseURL:fr});function gr({eventCode:e}){const s=Lt(async()=>(await Cr.get(`/${e}.json`)).data,[e]);return C.jsxs("div",{className:"content",children:[C.jsx(pr,{data:s}),C.jsx(dr,{data:s}),C.jsx(lr,{data:s})]})}const Sr=it(function(){const{eventCode:s}=ut();return s?C.jsx(gr,{eventCode:s}):C.jsx("div",{children:"Something went wrong"})});export{Sr as default};
