import{y as Rt,p as i,z as St,R as u,a as s,w as wt,A as bt}from"./chunk-WWGJGFF6-BXEJCw1g.js";import{F as Et,G as Be,_ as Pt,b as xt,c as Le,d as nt,C as Me,E as ge,e as ae,H as Ft,f as kt,g as Mt,h as Dt,i as Nt,j as At,k as Gt,R as Bt,l as Tt,T as Ot,m as It,n as jt,o as Wt,p as Lt,q as Ut,r as Ht,s as Pe,t as _t,v as Vt,w as $t,x as zt,y as Kt,z as Jt,B as qt,D as Te,V as Yt,I as Qt,J as Zt,K as ot,L as Xt,O as es,u as ts}from"./main.esm-ClyZmu_I.js";import{a as at,R as ss}from"./index-CKtN93q8.js";var Oe={exports:{}};var Ke;function rs(){return Ke||(Ke=1,(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a="",c=0;c<arguments.length;c++){var l=arguments[c];l&&(a=o(a,n(l)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var c="";for(var l in a)t.call(a,l)&&a[l]&&(c=o(c,l));return c}function o(a,c){return c?a?a+" "+c:a+c:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Oe)),Oe.exports}var ns=rs();const De=Rt(ns);function os(){return i.jsx(St,{to:`mailto:${Et}`,className:De("feedback-overlay","bg-stone-950","dark:bg-stone-200","text-stone-200","dark:text-stone-950","hover:bg-stone-700","dark:hover:bg-stone-400"),children:"Feedback"})}const as=[0,40,50,60,70,80,90,100,110,120],is=e=>as.filter(t=>t<=e),cs=(e,t)=>!t[e]||!t[e][0]?0:t[e][0].length,je={[Be.Women]:"Women",[Be.Men]:"Men",[Be.NonBinary]:"Non-Binary"},ls=e=>{const t=["th","st","nd","rd"],r=e%100;return t[(r-20)%10]||t[r]||t[0]},it=e=>{const t=Math.floor(e/1e3),r=Math.floor(t/3600),n=Math.floor(t%3600/60),o=t%60,a=[];return a.push(r.toString().padStart(2,"0")),a.push(n.toString().padStart(2,"0")),a.push(o.toString().padStart(2,"0")),a.join(":")},us=(e,t,r)=>{try{const n=t.find(o=>o.eventCode===e);return n?!t.some(o=>o.teamCode===r&&new Date(o.startDateTime).valueOf()<new Date(n.startDateTime).valueOf()):!1}catch(n){return console.error("Error in isFirstRaceWithTeam:",{races:t},n),!1}},Je={1:"ðŸ¥‡",2:"ðŸ¥ˆ",3:"ðŸ¥‰"};function ct({n:e,ordinal:t=!1}){return i.jsxs("span",{className:"place",children:[Je[e]?Je[e]+" ":"",e,t?ls(e):""]})}var Z=u.createContext({}),lt=u.createContext("default"),we=(e,t,r,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const a=e.newAgStackInstance();let c,l,d=!1;return a.then(f=>{if(d){t.destroyBean(f);return}c=f,l=c.getGui(),r.appendChild(l),qe(n,c)}),()=>{d=!0,c&&(l?.remove(),t.destroyBean(c),n&&qe(n,void 0))}},qe=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const r=e;r.current=t}},ne=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),oe=class ut{constructor(...t){this.classesMap={};for(const r of t)this.classesMap[r]=!0}setClass(t,r){if(!!this.classesMap[t]==r)return this;const o=new ut;return o.classesMap={...this.classesMap},o.classesMap[t]=r,o}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ve=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,r=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},We=u.version?.split(".")[0],dt=We==="16"||We==="17";function ds(){return We==="19"}var xe=!1;function ps(e){return xe||setTimeout(()=>xe=!1,0),xe=!0,e()}var Se=(e,t)=>{!dt&&e&&!xe?ss.flushSync(t):t()},ms=e=>{dt?e():u.startTransition(e)};function hs(e,t,r){return u.useSyncExternalStore?u.useSyncExternalStore(e,t):r}function ke(e,t,r){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(r||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const n=[],o=[],a=new Map,c=new Map;for(let l=0;l<t.length;l++){const d=t[l];c.set(d.instanceId,d)}for(let l=0;l<e.length;l++){const d=e[l];a.set(d.instanceId,d),c.has(d.instanceId)&&n.push(d)}for(let l=0;l<t.length;l++){const d=t[l],f=d.instanceId;a.has(f)||o.push(d)}return n.length===e.length&&o.length===0?e:n.length===0&&o.length===t.length?t:n.length===0?o:o.length===0?n:[...n,...o]}var pt=s.forwardRef((e,t)=>{const{registry:r,context:n}=s.useContext(Z),o=s.useRef(null),a=s.useRef(null),c=s.useRef(null),l=s.useRef(null),d=s.useRef(null),f=s.useRef(),[p,E]=s.useState(),[C,h]=s.useState(),[F,y]=s.useState(),[v,m]=s.useState(()=>new oe),[k,M]=s.useState(()=>new oe("ag-hidden")),[S,g]=s.useState(()=>new oe("ag-hidden")),[j,G]=s.useState(()=>new oe("ag-invisible"));s.useImperativeHandle(t,()=>({refresh(){return!1}})),s.useLayoutEffect(()=>we(p,n,a.current),[p]);const V=s.useCallback(L=>{if(o.current=L,!L||n.isDestroyed()){f.current=n.destroyBean(f.current);return}const D={setInnerRenderer:(N,H)=>{E(N),y(H)},setChildCount:N=>h(N),toggleCss:(N,H)=>m(A=>A.setClass(N,H)),setContractedDisplayed:N=>g(H=>H.setClass("ag-hidden",!N)),setExpandedDisplayed:N=>M(H=>H.setClass("ag-hidden",!N)),setCheckboxVisible:N=>G(H=>H.setClass("ag-invisible",!N)),setCheckboxSpacing:N=>G(H=>H.setClass("ag-group-checkbox-spacing",N))},U=r.createDynamicBean("groupCellRendererCtrl",!0);U&&(f.current=n.createBean(U),f.current.init(D,L,c.current,l.current,d.current,pt,e))},[]),O=s.useMemo(()=>`ag-cell-wrapper ${v.toString()}`,[v]),B=s.useMemo(()=>`ag-group-expanded ${k.toString()}`,[k]),R=s.useMemo(()=>`ag-group-contracted ${S.toString()}`,[S]),b=s.useMemo(()=>`ag-group-checkbox ${j.toString()}`,[j]),w=p?.componentFromFramework,I=w?p.componentClass:void 0,P=p==null&&F!=null,J=Pt(F);return u.createElement("span",{className:O,ref:V,...e.colDef?{}:{role:f.current?.getCellAriaRole()}},u.createElement("span",{className:B,ref:l}),u.createElement("span",{className:R,ref:d}),u.createElement("span",{className:b,ref:c}),u.createElement("span",{className:"ag-group-value",ref:a},P?J:w?u.createElement(I,{...p.params}):null),u.createElement("span",{className:"ag-group-child-count"},C))}),Ye=pt,Ue=s.createContext({setMethods:()=>{}}),fs=e=>{const{initialProps:t,addUpdateCallback:r,CustomComponentClass:n,setMethods:o}=e,[{key:a,...c},l]=s.useState(t);return s.useEffect(()=>{r(d=>l(d))},[]),u.createElement(Ue.Provider,{value:{setMethods:o}},u.createElement(n,{key:a,...c}))},Cs=s.memo(fs),gs=0;function Qe(){return`agPortalKey_${++gs}`}var mt=class{constructor(e,t,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Qe(),this.portalKey=Qe(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(o=>{this.resolveInstanceCreated=o})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),r=document.createElement(t||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!r){setTimeout(()=>this.callMethod(e,t));return}const n=r[e];if(n)return n.apply(r,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=at.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return s.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Ne(e,t,r){for(const n of e){const o=t[n];o&&(r[n]=o)}}var ie=class extends mt{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Cs}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Ne(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},vs=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ys=class extends ie{refresh(e){this.sourceParams=e,this.refreshProps()}},Rs=class extends ie{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Ss=class extends ie{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:r,shake:n}=this;return e.label=t,e.icon=r,e.shake=n,e}},ws=class extends ie{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new ae(r=>{this.resolveFilterPassCallback=r});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},bs=class extends ie{constructor(){super(...arguments),this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function ht(e,t){e.parentFilterInstance(r=>{(r.setModel(t)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Es=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Ne(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ht(this.floatingFilterParams,e)}},Ps=class extends ie{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ht(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},xs=class extends ie{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Fs=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ks=class extends ie{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Ms=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ds=class extends ie{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function He(){Le(231)}var Ns=1e3,As=class{constructor(e,t,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Ns}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,r){this.portals=[...this.portals,e],this.waitForInstance(t,r),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,r=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Se(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,r)})}}},Gs=({ctrl:e})=>{const t=e.isAlive(),{context:r}=s.useContext(Z),[n,o]=s.useState(),[a,c]=s.useState(),l=s.useRef(),d=s.useRef(null),f=s.useRef(null),p=s.useRef(null),E=s.useRef(),C=s.useRef();t&&!C.current&&(C.current=new Me(()=>d.current));const h=s.useCallback(m=>{if(d.current=m,!m||!e.isAlive()||r.isDestroyed()){l.current=r.destroyBean(l.current);return}l.current=r.createBean(new ge);const k=()=>{const S=e.getSelectAllGui();S&&(f.current?.insertAdjacentElement("afterend",S),l.current.addDestroyFunc(()=>S.remove()))},M={setWidth:S=>{d.current&&(d.current.style.width=S)},toggleCss:(S,g)=>C.current.toggleCss(S,g),setUserStyles:S=>c(S),setAriaSort:S=>{d.current&&(S?_t(d.current,S):Vt(d.current))},setUserCompDetails:S=>o(S),getUserCompInstance:()=>E.current||void 0,refreshSelectAllGui:k,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(M,m,f.current,p.current,l.current),k()},[]);s.useLayoutEffect(()=>we(n,r,p.current,E),[n]),s.useEffect(()=>{e.setDragSource(d.current)},[n]);const F=s.useMemo(()=>!!(n?.componentFromFramework&&ve(n.componentClass)),[n]),y=n?.componentFromFramework,v=n?.componentClass;return u.createElement("div",{ref:h,style:a,className:"ag-header-cell",role:"columnheader"},u.createElement("div",{ref:f,className:"ag-header-cell-resize",role:"presentation"}),u.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},y?F?u.createElement(v,{...n.params}):u.createElement(v,{...n.params,ref:E}):null))},Bs=s.memo(Gs),Ts=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Ne(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Os=({ctrl:e})=>{const{context:t,gos:r}=s.useContext(Z),[n,o]=s.useState(),[a,c]=s.useState(()=>new oe("ag-header-cell","ag-floating-filter")),[l,d]=s.useState(()=>new oe),[f,p]=s.useState(()=>new oe("ag-floating-filter-button","ag-hidden")),[E,C]=s.useState("false"),[h,F]=s.useState(),[,y]=s.useState(1),v=s.useRef(),m=s.useRef(null),k=s.useRef(null),M=s.useRef(null),S=s.useRef(null),g=s.useRef(),j=s.useRef(),G=N=>{N!=null&&g.current&&g.current(N)},V=s.useCallback(N=>{if(m.current=N,!N||!e.isAlive()||t.isDestroyed()){v.current=t.destroyBean(v.current);return}v.current=t.createBean(new ge),j.current=new ae(A=>{g.current=A});const H={toggleCss:(A,W)=>c(Y=>Y.setClass(A,W)),setUserStyles:A=>o(A),addOrRemoveBodyCssClass:(A,W)=>d(Y=>Y.setClass(A,W)),setButtonWrapperDisplayed:A=>{p(W=>W.setClass("ag-hidden",!A)),C(A?"false":"true")},setWidth:A=>{m.current&&(m.current.style.width=A)},setCompDetails:A=>F(A),getFloatingFilterComp:()=>j.current?j.current:null,setMenuIcon:A=>S.current?.appendChild(A)};e.setComp(H,N,S.current,k.current,v.current)},[]);s.useLayoutEffect(()=>we(h,t,k.current,G),[h]);const O=s.useMemo(()=>a.toString(),[a]),B=s.useMemo(()=>l.toString(),[l]),R=s.useMemo(()=>f.toString(),[f]),b=s.useMemo(()=>!!(h&&h.componentFromFramework&&ve(h.componentClass)),[h]),w=s.useMemo(()=>r.get("reactiveCustomComponents"),[]),I=s.useMemo(()=>r.get("enableFilterHandlers"),[]),[P,J]=s.useState();s.useEffect(()=>{if(h?.componentFromFramework)if(w){const N=I?Ts:Es,H=new N(h.params,()=>y(A=>A+1));G(H),J(H)}else He()},[h]);const L=P?.getProps(),D=h?.componentFromFramework,U=h?.componentClass;return u.createElement("div",{ref:V,style:n,className:O,role:"gridcell"},u.createElement("div",{ref:k,className:B,role:"presentation"},D?w?L&&u.createElement(Ue.Provider,{value:{setMethods:N=>P.setMethods(N)}},u.createElement(U,{...L})):u.createElement(U,{...h.params,ref:b?()=>{}:G}):null),u.createElement("div",{ref:M,"aria-hidden":E,className:R,role:"presentation"},u.createElement("button",{ref:S,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Is=s.memo(Os),js=({ctrl:e})=>{const{context:t}=s.useContext(Z),[r,n]=s.useState(),[o,a]=s.useState(()=>new oe),[c,l]=s.useState(()=>new oe),[d,f]=s.useState("false"),[p,E]=s.useState(),[C,h]=s.useState(),F=s.useRef(),y=s.useRef(null),v=s.useRef(null),m=s.useRef(null),k=s.useRef(),M=s.useCallback(O=>{if(y.current=O,!O||!e.isAlive()||t.isDestroyed()){F.current=t.destroyBean(F.current);return}F.current=t.createBean(new ge);const B={setWidth:R=>{y.current&&(y.current.style.width=R)},toggleCss:(R,b)=>a(w=>w.setClass(R,b)),setUserStyles:R=>n(R),setHeaderWrapperHidden:R=>{const b=m.current;b&&(R?b.style.setProperty("display","none"):b.style.removeProperty("display"))},setHeaderWrapperMaxHeight:R=>{const b=m.current;b&&(R!=null?b.style.setProperty("max-height",`${R}px`):b.style.removeProperty("max-height"),b.classList.toggle("ag-header-cell-comp-wrapper-limited-height",R!=null))},setUserCompDetails:R=>h(R),setResizableDisplayed:R=>{l(b=>b.setClass("ag-hidden",!R)),f(R?"false":"true")},setAriaExpanded:R=>E(R),getUserCompInstance:()=>k.current||void 0};e.setComp(B,O,v.current,m.current,F.current)},[]);s.useLayoutEffect(()=>we(C,t,m.current),[C]),s.useEffect(()=>{y.current&&e.setDragSource(y.current)},[C]);const S=s.useMemo(()=>!!(C?.componentFromFramework&&ve(C.componentClass)),[C]),g=s.useMemo(()=>"ag-header-group-cell "+o.toString(),[o]),j=s.useMemo(()=>"ag-header-cell-resize "+c.toString(),[c]),G=C?.componentFromFramework,V=C?.componentClass;return u.createElement("div",{ref:M,style:r,className:g,role:"columnheader","aria-expanded":p},u.createElement("div",{ref:m,className:"ag-header-cell-comp-wrapper",role:"presentation"},G?S?u.createElement(V,{...C.params}):u.createElement(V,{...C.params,ref:k}):null),u.createElement("div",{ref:v,"aria-hidden":d,className:j}))},Ws=s.memo(js),Ls=({ctrl:e})=>{const{gos:t,context:r}=s.useContext(Z),{topOffset:n,rowHeight:o}=s.useMemo(()=>e.getTopAndHeight(),[]),a=s.useMemo(()=>t.get("tabIndex"),[]),[c,l]=s.useState(()=>e.getAriaRowIndex()),d=e.headerRowClass,[f,p]=s.useState(()=>o+"px"),[E,C]=s.useState(()=>n+"px"),h=s.useRef(null),[F,y]=s.useState(()=>e.getUpdatedHeaderCtrls()),v=s.useRef(),m=s.useRef(null),k=s.useCallback(g=>{if(m.current=g,!g||!e.isAlive()||r.isDestroyed()){v.current=r.destroyBean(v.current);return}v.current=r.createBean(new ge);const j={setHeight:G=>p(G),setTop:G=>C(G),setHeaderCtrls:(G,V,O)=>{const B=h.current,R=ke(B,G,V);R!==B&&(h.current=R,Se(O,()=>y(R)))},setWidth:G=>{m.current&&(m.current.style.width=G)},setRowIndex:G=>{l(G)}};e.setComp(j,v.current,!1)},[]),M=s.useMemo(()=>({height:f,top:E}),[f,E]),S=s.useCallback(g=>{switch(e.type){case"group":return u.createElement(Ws,{ctrl:g,key:g.instanceId});case"filter":return u.createElement(Is,{ctrl:g,key:g.instanceId});default:return u.createElement(Bs,{ctrl:g,key:g.instanceId})}},[]);return u.createElement("div",{ref:k,className:d,role:"row",style:M,tabIndex:a,"aria-rowindex":c},F.map(S))},Us=s.memo(Ls),Hs=({pinned:e})=>{const[t,r]=s.useState(!0),[n,o]=s.useState([]),{context:a}=s.useContext(Z),c=s.useRef(null),l=s.useRef(null),d=s.useRef(),f=e==="left",p=e==="right",E=!f&&!p,C=s.useCallback(y=>{if(c.current=y,!y||a.isDestroyed()){d.current=a.destroyBean(d.current);return}d.current=a.createBean(new Ft(e));const v={setDisplayed:r,setCtrls:m=>o(m),setCenterWidth:m=>{l.current&&(l.current.style.width=m)},setViewportScrollLeft:m=>{c.current&&(c.current.scrollLeft=m)},setPinnedContainerWidth:m=>{c.current&&(c.current.style.width=m,c.current.style.minWidth=m,c.current.style.maxWidth=m)}};d.current.setComp(v,c.current)},[]),h=t?"":"ag-hidden",F=()=>n.map(y=>u.createElement(Us,{ctrl:y,key:y.instanceId}));return f?u.createElement("div",{ref:C,className:"ag-pinned-left-header "+h,"aria-hidden":!t,role:"rowgroup"},F()):p?u.createElement("div",{ref:C,className:"ag-pinned-right-header "+h,"aria-hidden":!t,role:"rowgroup"},F()):E?u.createElement("div",{ref:C,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},u.createElement("div",{ref:l,className:"ag-header-container",role:"presentation"},F())):null},Ie=s.memo(Hs),_s=()=>{const[e,t]=s.useState(()=>new oe),[r,n]=s.useState(),{context:o}=s.useContext(Z),a=s.useRef(null),c=s.useRef(),l=s.useCallback(p=>{if(a.current=p,!p||o.isDestroyed()){c.current=o.destroyBean(c.current);return}c.current=o.createBean(new kt);const E={toggleCss:(C,h)=>t(F=>F.setClass(C,h)),setHeightAndMinHeight:C=>n(C)};c.current.setComp(E,p,p)},[]),d=s.useMemo(()=>"ag-header "+e.toString(),[e]),f=s.useMemo(()=>({height:r,minHeight:r}),[r]);return u.createElement("div",{ref:l,className:d,style:f,role:"presentation"},u.createElement(Ie,{pinned:"left"}),u.createElement(Ie,{pinned:null}),u.createElement(Ie,{pinned:"right"}))},Vs=s.memo(_s),$s=(e,t)=>{s.useEffect(()=>{const r=t.current;if(r){const n=r.parentElement;if(n){const o=document.createComment(e);return n.insertBefore(o,r),()=>{o.remove()}}}},[e])},he=$s,zs=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Ne(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},Ks=e=>{const t=s.useRef(e),r=s.useRef(),n=s.useRef(!1),o=s.useRef(!1),[,a]=s.useState(0);n.current&&(o.current=!0),s.useEffect(()=>(n.current||(r.current=t.current(),n.current=!0),a(c=>c+1),()=>{o.current&&r.current?.()}),[])},Js=e=>{const[t,r]=s.useState(),n=s.useContext(Z),{context:o,popupSvc:a,gos:c,editSvc:l}=n,{editDetails:d,cellCtrl:f,eParentCell:p}=e;return Ks(()=>{const{compDetails:E}=d,C=c.get("stopEditingWhenCellsLoseFocus");let h,F;if(!o.isDestroyed()){F=o.createBean(l.createPopupEditorWrapper(E.params));const y=F.getGui();if(e.jsChildComp){const g=e.jsChildComp.getGui();g&&y.appendChild(g)}const{column:v,rowNode:m}=f,k={column:v,rowNode:m,type:"popupCellEditor",eventSource:p,ePopup:y,position:d.popupPosition,keepWithinBounds:!0},M=a?.positionPopupByComponent.bind(a,k),S=a?.addPopup({modal:C,eChild:y,closeOnEsc:!0,closedCallback:()=>{f.onPopupEditorClosed()},anchorToElement:p,positionCallback:M,ariaOwns:p});h=S?S.hideFunc:void 0,r(F),e.jsChildComp?.afterGuiAttached?.()}return()=>{h?.(),o.destroyBean(F)}}),s.useLayoutEffect(()=>()=>{f.isCellFocused()&&t?.getGui().contains(Mt(n))&&p.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?at.createPortal(e.wrappedContent,t.getGui()):null},Ze=s.memo(Js),qs=(e,t,r)=>{const{compProxy:n}=e;r(n);const o=n.getProps(),a=ve(t);return u.createElement(Ue.Provider,{value:{setMethods:c=>n.setMethods(c)}},a?u.createElement(t,{...o}):u.createElement(t,{...o,ref:c=>n.setRef(c)}))},Xe=(e,t,r)=>e.compProxy?qs(e,t,r):u.createElement(t,{...e.compDetails.params,ref:r}),Ys=(e,t,r,n,o)=>{const a=e.compDetails,c=a.componentClass,l=a.componentFromFramework&&!e.popup,d=a.componentFromFramework&&e.popup,f=!a.componentFromFramework&&e.popup;return l?Xe(e,c,t):d?u.createElement(Ze,{editDetails:e,cellCtrl:n,eParentCell:r,wrappedContent:Xe(e,c,t)}):f&&o?u.createElement(Ze,{editDetails:e,cellCtrl:n,eParentCell:r,jsChildComp:o}):null},Qs=(e,t,r,n,o,a,c=!1)=>{const{context:l}=s.useContext(Z),d=s.useCallback(()=>{const f=o.current;if(!f)return;const p=f.getGui();p&&p.parentElement&&p.remove(),l.destroyBean(f),o.current=void 0},[]);s.useEffect(()=>{const f=e!=null&&!c,p=e?.compDetails&&!e.compDetails.componentFromFramework,E=t&&r==null;if(!(f&&p&&!E)){d();return}const h=e.compDetails;if(o.current){const y=o.current,m=y.refresh!=null&&e.force==!1?y.refresh(h.params):!1;if(m===!0||m===void 0)return;d()}h.newAgStackInstance().then(y=>{if(!y)return;const v=y.getGui();if(!v)return;(t?r:a.current).appendChild(v),o.current=y})},[e,t,n,c]),s.useEffect(()=>d,[])},ft=Qs,Zs=({cellCtrl:e,parent:t})=>{const r=s.useRef(),n=s.useMemo(()=>{const{loadingComp:o}=e.getDeferLoadingCellRenderer();return o?{value:void 0,compDetails:o,force:!1}:void 0},[e]);if(ft(n,!1,void 0,1,r,t),n?.compDetails?.componentFromFramework){const o=n.compDetails.componentClass;return u.createElement(o,{...n.compDetails.params})}return u.createElement(u.Fragment,null)},Xs=({cellCtrl:e,printLayout:t,editingCell:r})=>{const n=s.useContext(Z),{context:o}=n,{column:{colIdSanitised:a},instanceId:c}=e,l=s.useRef(),[d,f]=s.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[p,E]=s.useState(),[C,h]=s.useState(1),[F,y]=s.useState(),[v,m]=s.useState(!1),[k,M]=s.useState(!1),[S,g]=s.useState(!1),[j,G]=s.useState(),V=s.useMemo(()=>e.isForceWrapper(),[e]),O=s.useMemo(()=>e.getCellAriaRole(),[e]),B=s.useRef(null),R=s.useRef(null),b=s.useRef(null),w=s.useRef(),I=s.useRef(),P=s.useRef(),J=s.useRef([]),L=s.useRef(),D=s.useRef(),[U,N]=s.useState(0),H=s.useCallback(T=>{D.current=T,N(_=>_+1)},[]),A=d!=null&&(v||S||k)&&(p==null||!!p.popup),W=V||A,Y=s.useMemo(()=>e.getCellValueClass(),[e]),le=s.useCallback(T=>{if(I.current=T,T){const _=T.isCancelBeforeStart&&T.isCancelBeforeStart();setTimeout(()=>{_?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(T))})}},[e]),X=s.useRef();X.current||(X.current=new Me(()=>B.current));const fe=!!p&&!p.popup;ft(d,W,D.current,U,w,B,fe);const Ce=s.useRef();s.useLayoutEffect(()=>{const T=Ce.current,_=d;if(Ce.current=d,T==null||T.compDetails==null||_==null||_.compDetails==null)return;L.current?.refreshVisibility();const Q=T.compDetails,q=_.compDetails;if(Q.componentClass!=q.componentClass||b.current?.refresh==null)return;b.current.refresh(q.params)!=!0&&h(z=>z+1)},[d]),s.useLayoutEffect(()=>{if(!(p&&!p.compDetails.componentFromFramework)||o.isDestroyed())return;const _=p.compDetails,Q=p.popup===!0,q=_.newAgStackInstance();return q.then(x=>{if(!x)return;const z=x.getGui();le(x),Q||((V?P:B).current?.appendChild(z),x.afterGuiAttached?.()),G(x)}),()=>{q.then(x=>{const z=x.getGui();e.disableEditorTooltipFeature(),o.destroyBean(x),le(void 0),G(void 0),z?.remove()})}},[p]);const ye=s.useCallback(T=>{if(P.current=T,!T||o.isDestroyed()||!e.isAlive()){const q=J.current;J.current=[];for(const x of q)x();return}let _;const Q=q=>{q&&(T.insertAdjacentElement("afterbegin",q.getGui()),J.current.push(()=>{$t(q.getGui()),o.destroyBean(q),L.current===_&&(L.current=void 0)}))};v&&Q(e.createSelectionCheckbox()),S&&Q(e.createDndSource()),k&&(_=e.createRowDragComp(),L.current=_,_&&(Q(_),_.refreshVisibility()))},[e,o,S,k,v]),$=s.useCallback(()=>{const T=!e.isCellSpanning()||R.current,_=B.current;if(!_||!T||!e||!e.isAlive()||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new ge);const Q={toggleCss:(x,z)=>X.current.toggleCss(x,z),setUserStyles:x=>y(x),getFocusableElement:()=>B.current,setIncludeSelection:x=>m(x),setIncludeRowDrag:x=>M(x),setIncludeDndSource:x=>g(x),getCellEditor:()=>I.current??null,getCellRenderer:()=>b.current??w.current,getParentOfValue:()=>D.current??P.current??B.current,setRenderDetails:(x,z,te)=>{const ue=()=>{f(se=>se?.compDetails!==x||se?.value!==z||se?.force!==te?{value:z,compDetails:x,force:te}:se)};if(x?.params?.deferRender&&!e.rowNode.group){const{loadingComp:se,onReady:Re}=e.getDeferLoadingCellRenderer();if(se){f({value:void 0,compDetails:se,force:!1}),Re.then(()=>ms(ue));return}}ue()},setEditDetails:(x,z,te,ue)=>{if(x){let se;x.componentFromFramework&&(ue?se=new zs(x.params,()=>h(Re=>Re+1)):He()),E({compDetails:x,popup:z,popupPosition:te,compProxy:se}),z||f(void 0)}else e.hasBrowserFocus()&&Q.getFocusableElement().focus({preventScroll:!0}),I.current=void 0,E(void 0)},refreshEditStyles:(x,z)=>{if(!B.current)return;const{current:te}=X;te.toggleCss("ag-cell-value",!W),te.toggleCss("ag-cell-inline-editing",!!x&&!z),te.toggleCss("ag-cell-popup-editing",!!x&&!!z),te.toggleCss("ag-cell-not-inline-editing",!x||!!z)}},q=P.current||void 0;e.setComp(Q,_,R.current??void 0,q,t,r,l.current)},[]),me=s.useCallback(T=>{B.current=T,$()},[]),ee=s.useCallback(T=>{R.current=T,$()},[]),ce=s.useMemo(()=>!!(d?.compDetails?.componentFromFramework&&ve(d.compDetails.componentClass)),[d]);s.useLayoutEffect(()=>{if(!B.current)return;const{current:T}=X;T.toggleCss("ag-cell-value",!W),T.toggleCss("ag-cell-inline-editing",!!p&&!p.popup),T.toggleCss("ag-cell-popup-editing",!!p&&!!p.popup),T.toggleCss("ag-cell-not-inline-editing",!p||!!p.popup)});const de=()=>{const{compDetails:T,value:_}=d;if(!T)return _?.toString?.()??_;if(T.componentFromFramework){const Q=T.componentClass;return u.createElement(s.Suspense,{fallback:u.createElement(Zs,{cellCtrl:e,parent:B})},ce?u.createElement(Q,{...T.params,key:C}):u.createElement(Q,{...T.params,key:C,ref:b}))}},pe=()=>{const T=()=>d==null?null:W?u.createElement("span",{role:"presentation",id:`cell-${c}`,className:Y,ref:H},de()):de(),_=Q=>Ys(Q,le,B.current,e,j);return p!=null?p.popup?u.createElement(u.Fragment,null,T(),_(p)):_(p):T()},Ee=()=>u.createElement("div",{ref:me,style:F,role:O,"col-id":a},W?u.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ye},pe()):pe());return e.isCellSpanning()?u.createElement("div",{ref:ee,className:"ag-spanned-cell-wrapper",role:"presentation"},Ee()):Ee()},er=s.memo(Xs),tr=({rowCtrl:e,containerType:t})=>{const{context:r,gos:n,editSvc:o}=s.useContext(Z),a=s.useContext(lt)==="default",c=s.useRef(),l=s.useRef(e.getDomOrder()),d=e.isFullWidth(),f=e.rowNode.displayed,[p,E]=s.useState(()=>f?e.rowNode.getRowIndexString():null),[C,h]=s.useState(()=>e.rowId),[F,y]=s.useState(()=>e.businessKey),[v,m]=s.useState(()=>e.rowStyles),k=s.useRef(null),[M,S]=s.useState(()=>null),[g,j]=s.useState(),[G,V]=s.useState(()=>f?e.getInitialRowTop(t):void 0),[O,B]=s.useState(()=>f?e.getInitialTransform(t):void 0),R=s.useRef(null),b=s.useRef(),w=s.useRef(),I=s.useRef(!1),[P,J]=s.useState(0);s.useEffect(()=>{if(I.current||!g||P>10)return;const $=R.current?.firstChild;$?(e.setupDetailRowAutoHeight($),I.current=!0):J(me=>me+1)},[g,P]);const L=s.useRef();L.current||(L.current=new Me(()=>R.current));const D=s.useRef(()=>{}),U=s.useCallback($=>(D.current=$,()=>{D.current=()=>{}}),[]),N=hs(U,()=>k.current,[]),H=a?N:M,A=s.useCallback($=>{if(R.current=$,c.current=$?r.createBean(new ge):r.destroyBean(c.current),!$){e.unsetComp(t);return}if(!e.isAlive()||r.isDestroyed())return;const me={setTop:V,setTransform:B,toggleCss:(ee,ce)=>L.current.toggleCss(ee,ce),setDomOrder:ee=>l.current=ee,setRowIndex:E,setRowId:h,setRowBusinessKey:y,setUserStyles:m,setCellCtrls:(ee,ce)=>{const de=k.current,pe=ke(de,ee,l.current);pe!==de&&(k.current=pe,a?D.current():Se(ce,()=>S(pe)))},showFullWidth:ee=>{w.current=ee.params,j(ee)},getFullWidthCellRenderer:()=>b.current,getFullWidthCellRendererParams:()=>w.current,refreshFullWidth:ee=>{const ce=ee();return w.current=ce,fe.current?(j(de=>({...de,params:ce})),!0):!b.current||!b.current.refresh?!1:b.current.refresh(ce)}};e.setComp(me,$,t,c.current)},[]);s.useLayoutEffect(()=>we(g,r,R.current,b),[g]);const W=s.useMemo(()=>{const $={top:G,transform:O};return Object.assign($,v),$},[G,O,v]),Y=d&&g?.componentFromFramework,le=!d&&H!=null,X=s.useMemo(()=>!!(g?.componentFromFramework&&ve(g.componentClass)),[g]),fe=s.useRef(!1);s.useEffect(()=>{fe.current=X&&!!g&&!!n.get("reactiveCustomComponents")},[X,g]);const Ce=()=>H?.map($=>u.createElement(er,{cellCtrl:$,editingCell:o?.isEditing($,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:$.instanceId})),ye=()=>{const $=g.componentClass;return X?u.createElement($,{...g.params}):u.createElement($,{...g.params,ref:b})};return u.createElement("div",{ref:A,role:"row",style:W,"row-index":p,"row-id":C,"row-business-key":F},le?Ce():Y?ye():null)},et=s.memo(tr),sr=({name:e})=>{const{context:t,gos:r}=s.useContext(Z),n=s.useMemo(()=>Dt(e),[e]),o=s.useRef(null),a=s.useRef(null),c=s.useRef(null),l=s.useRef([]),d=s.useRef([]),[f,p]=s.useState(()=>[]),E=!!r.get("enableCellSpan")&&!!n.getSpannedRowCtrls,C=s.useRef([]),h=s.useRef([]),[F,y]=s.useState(()=>[]),v=s.useRef(!1),m=s.useRef(),k=s.useMemo(()=>ne("ag-viewport",Nt(e)),[e]),M=s.useMemo(()=>ne(At(e)),[e]),S=s.useMemo(()=>ne("ag-spanning-container",Gt(e)),[e]),g=n.type==="center"||E,j=g?o:a;he(" AG Row Container "+e+" ",j);const G=s.useCallback(()=>{const P=!g||o.current!=null,J=a.current!=null,L=!E||c.current!=null;return P&&J&&L},[]),V=s.useCallback(()=>o.current==null&&a.current==null&&c.current==null,[]),O=s.useCallback(()=>{if(V()&&(m.current=t.destroyBean(m.current)),!t.isDestroyed()&&G()){const P=D=>{const U=ke(d.current,l.current,v.current);U!==d.current&&(d.current=U,Se(D,()=>p(U)))},J=D=>{const U=ke(h.current,C.current,v.current);U!==h.current&&(h.current=U,Se(D,()=>y(U)))},L={setHorizontalScroll:D=>{o.current&&(o.current.scrollLeft=D)},setViewportHeight:D=>{o.current&&(o.current.style.height=D)},setRowCtrls:({rowCtrls:D,useFlushSync:U})=>{const N=!!U&&l.current.length>0&&D.length>0;l.current=D,P(N)},setSpannedRowCtrls:(D,U)=>{const N=!!U&&C.current.length>0&&D.length>0;C.current=D,J(N)},setDomOrder:D=>{v.current!=D&&(v.current=D,P(!1))},setContainerWidth:D=>{a.current&&(a.current.style.width=D)},setOffsetTop:D=>{a.current&&(a.current.style.transform=`translateY(${D})`)}};m.current=t.createBean(new Bt(e)),m.current.setComp(L,a.current,c.current??void 0,o.current)}},[G,V]),B=s.useCallback(P=>{a.current=P,O()},[O]),R=s.useCallback(P=>{c.current=P,O()},[O]),b=s.useCallback(P=>{o.current=P,O()},[O]),w=()=>u.createElement("div",{className:M,ref:B,role:g?"presentation":"rowgroup"},f.map(P=>u.createElement(et,{rowCtrl:P,containerType:n.type,key:P.instanceId})));if(!g)return w();const I=()=>u.createElement("div",{className:S,ref:R,role:"presentation"},F.map(P=>u.createElement(et,{rowCtrl:P,containerType:n.type,key:P.instanceId})));return u.createElement("div",{className:k,ref:b,role:"rowgroup"},w(),E?I():null)},rr=s.memo(sr),nr=()=>{const e=s.useContext(Z),{context:t,overlays:r}=e,[n,o]=s.useState(""),[a,c]=s.useState(0),[l,d]=s.useState(0),[f,p]=s.useState("0px"),[E,C]=s.useState("0px"),[h,F]=s.useState("100%"),[y,v]=s.useState("0px"),[m,k]=s.useState("0px"),[M,S]=s.useState("100%"),[g,j]=s.useState(!0),[G,V]=s.useState(!0),[O,B]=s.useState(null),[R,b]=s.useState(""),[w,I]=s.useState(null),[P,J]=s.useState("ag-layout-normal"),L=s.useRef();L.current||(L.current=new Me(()=>D.current));const D=s.useRef(null),U=s.useRef(null),N=s.useRef(null),H=s.useRef(null),A=s.useRef(null),W=s.useRef(null),Y=s.useRef(null),le=s.useRef([]),X=s.useRef([]);he(" AG Grid Body ",D),he(" AG Pinned Top ",U),he(" AG Sticky Top ",N),he(" AG Middle ",W),he(" AG Pinned Bottom ",Y);const fe=s.useCallback(x=>{if(D.current=x,!x||t.isDestroyed()){le.current=t.destroyBeans(le.current);for(const K of X.current)K();X.current=[];return}const z=(K,re)=>{K.appendChild(re),X.current.push(()=>re.remove())},te=K=>{const re=t.createBean(new K);return le.current.push(re),re},ue=(K,re,yt)=>{z(K,document.createComment(yt)),z(K,te(re).getGui())};ue(x,Jt," AG Fake Horizontal Scroll ");const se=r?.getOverlayWrapperCompClass();se&&ue(x,se," AG Overlay Wrapper "),A.current&&ue(A.current,qt," AG Fake Vertical Scroll ");const Re={setRowAnimationCssOnBodyViewport:o,setColumnCount:K=>{D.current&&Kt(D.current,K)},setRowCount:K=>{D.current&&zt(D.current,K)},setTopHeight:c,setBottomHeight:d,setStickyTopHeight:p,setStickyTopTop:C,setStickyTopWidth:F,setTopInvisible:j,setBottomInvisible:V,setColumnMovingCss:(K,re)=>L.current.toggleCss(K,re),updateLayoutClasses:J,setAlwaysVerticalScrollClass:B,setPinnedTopBottomOverflowY:b,setCellSelectableCss:(K,re)=>I(re?K:null),setBodyViewportWidth:K=>{W.current&&(W.current.style.width=K)},registerBodyViewportResizeListener:K=>{if(W.current){const re=nt(e,W.current,K);X.current.push(()=>re())}},setStickyBottomHeight:v,setStickyBottomBottom:k,setStickyBottomWidth:S,setGridRootRole:K=>x.setAttribute("role",K)},ze=t.createBean(new Tt);le.current.push(ze),ze.setComp(Re,x,W.current,U.current,Y.current,N.current,H.current)},[]),Ce=s.useMemo(()=>ne("ag-root","ag-unselectable",P),[P]),ye=s.useMemo(()=>ne("ag-body-viewport",n,P,O,w),[n,P,O,w]),$=s.useMemo(()=>ne("ag-body",P),[P]),me=s.useMemo(()=>ne("ag-floating-top",g?"ag-invisible":null,w),[w,g]),ee=s.useMemo(()=>ne("ag-sticky-top",w),[w]),ce=s.useMemo(()=>ne("ag-sticky-bottom",y==="0px"?"ag-invisible":null,w),[w,y]),de=s.useMemo(()=>ne("ag-floating-bottom",G?"ag-invisible":null,w),[w,G]),pe=s.useMemo(()=>({height:a,minHeight:a,overflowY:R}),[a,R]),Ee=s.useMemo(()=>({height:f,top:E,width:h}),[f,E,h]),T=s.useMemo(()=>({height:y,bottom:m,width:M}),[y,m,M]),_=s.useMemo(()=>({height:l,minHeight:l,overflowY:R}),[l,R]),Q=x=>u.createElement(rr,{name:x,key:`${x}-container`}),q=({section:x,children:z,className:te,style:ue})=>u.createElement("div",{ref:x,className:te,role:"presentation",style:ue},z.map(Q));return u.createElement("div",{ref:fe,className:Ce},u.createElement(Vs,null),q({section:U,className:me,style:pe,children:["topLeft","topCenter","topRight","topFullWidth"]}),u.createElement("div",{className:$,ref:A,role:"presentation"},q({section:W,className:ye,children:["left","center","right","fullWidth"]})),q({section:N,className:ee,style:Ee,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),q({section:H,className:ce,style:T,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),q({section:Y,className:de,style:_,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},or=s.memo(nr),ar=(e,t)=>{const{children:r,eFocusableElement:n,onTabKeyDown:o,gridCtrl:a,forceFocusOutWhenTabGuardsAreEmpty:c,isEmpty:l}=e,{context:d}=s.useContext(Z),f=s.useRef(null),p=s.useRef(null),E=s.useRef(),C=m=>{const k=m==null?void 0:parseInt(m,10).toString();for(const M of[f,p])k===void 0?M.current?.removeAttribute("tabindex"):M.current?.setAttribute("tabindex",k)};s.useImperativeHandle(t,()=>({forceFocusOutOfContainer(m){E.current?.forceFocusOutOfContainer(m)}}));const h=s.useCallback(()=>{const m=f.current,k=p.current;if(!m&&!k||d.isDestroyed()){E.current=d.destroyBean(E.current);return}if(m&&k){const M={setTabIndex:C};E.current=d.createBean(new Ot({comp:M,eTopGuard:m,eBottomGuard:k,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:c,focusInnerElement:S=>a.focusInnerElement(S),isEmpty:l}))}},[]),F=s.useCallback(m=>{f.current=m,h()},[h]),y=s.useCallback(m=>{p.current=m,h()},[h]),v=m=>{const k=m==="top"?Te.TAB_GUARD_TOP:Te.TAB_GUARD_BOTTOM;return u.createElement("div",{className:`${Te.TAB_GUARD} ${k}`,role:"presentation",ref:m==="top"?F:y})};return u.createElement(u.Fragment,null,v("top"),r,v("bottom"))},ir=s.forwardRef(ar),cr=s.memo(ir),lr=({context:e})=>{const[t,r]=s.useState(""),[n,o]=s.useState(""),[a,c]=s.useState(null),[l,d]=s.useState(null),[f,p]=s.useState(!1),[E,C]=s.useState(),h=s.useRef(),F=s.useRef(null),y=s.useRef(),[v,m]=s.useState(null),k=s.useRef(()=>{}),M=s.useRef(),S=s.useRef([]),g=s.useCallback(()=>{},[]);he(" AG Grid ",F);const j=s.useCallback(b=>{if(F.current=b,h.current=b?e.createBean(new It):e.destroyBean(h.current),!b||e.isDestroyed())return;const w=h.current;k.current=w.focusInnerElement.bind(w);const I={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:P=>{if(!P&&M.current?.isDisplayed()){M.current.forceFocusOutOfContainer(P);return}y.current?.forceFocusOutOfContainer(P)},updateLayoutClasses:o,getFocusableContainers:()=>{const P=[],J=F.current?.querySelector(".ag-root");J&&P.push({getGui:()=>J});for(const L of S.current)L.isDisplayed()&&P.push(L);return P},setCursor:c,setUserSelect:d};w.setComp(I,b,b),p(!0)},[]);s.useEffect(()=>{const b=h.current,w=F.current;if(!E||!b||!v||!w||e.isDestroyed())return;const I=[],{watermarkSelector:P,paginationSelector:J,sideBarSelector:L,statusBarSelector:D,gridHeaderDropZonesSelector:U}=b.getOptionalSelectors(),N=[];if(U){const A=e.createBean(new U.component),W=A.getGui();w.insertAdjacentElement("afterbegin",W),N.push(W),I.push(A)}if(L){const A=e.createBean(new L.component),W=A.getGui(),Y=v.querySelector(".ag-tab-guard-bottom");Y&&(Y.insertAdjacentElement("beforebegin",W),N.push(W)),I.push(A),S.current.push(A)}const H=A=>{const W=e.createBean(new A),Y=W.getGui();return w.insertAdjacentElement("beforeend",Y),N.push(Y),I.push(W),W};if(D&&H(D.component),J){const A=H(J.component);M.current=A,S.current.push(A)}return P&&H(P.component),()=>{e.destroyBeans(I);for(const A of N)A.remove()}},[E,v,e]);const G=s.useMemo(()=>ne("ag-root-wrapper",t,n),[t,n]),V=s.useMemo(()=>ne("ag-root-wrapper-body","ag-focus-managed",n),[n]),O=s.useMemo(()=>({userSelect:l??"",WebkitUserSelect:l??"",cursor:a??""}),[l,a]),B=s.useCallback(b=>{y.current=b,C(b!==null)},[]),R=s.useCallback(()=>!h.current?.isFocusable(),[]);return u.createElement("div",{ref:j,className:G,style:O,role:"presentation"},u.createElement("div",{className:V,ref:m,role:"presentation"},f&&v&&!e.isDestroyed()&&u.createElement(Z.Provider,{value:e.getBeans()},u.createElement(cr,{ref:B,eFocusableElement:v,onTabKeyDown:g,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:R},u.createElement(or,null)))))},ur=s.memo(lr),dr=class extends Zt{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},Ct={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},pr={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...Ct},gt=new Set(Object.keys(pr)),mr=new Set(Object.keys(Ct)),vt=e=>{const t=s.useRef(),r=s.useRef(null),n=s.useRef(null),o=s.useRef([]),a=s.useRef([]),c=s.useRef(e),l=s.useRef(),d=s.useRef(),f=s.useRef(!1),[p,E]=s.useState(void 0),[,C]=s.useState(0),h=s.useRef(),F=M=>{const S=r.current?.classList,g=(j="")=>j.trim().split(/\s+/g).filter(Boolean);if(h.current!==M){for(const j of g(h.current))S?.contains(j)&&S.remove(j);for(const j of g(M))S?.contains(j)||S?.add(j);h.current=M}};s.useLayoutEffect(()=>{F(e.className)},[e.className]);const y=s.useCallback(M=>{if(r.current=M,F(e.className),!M){for(const w of o.current)w();o.current.length=0;return}const S=e.modules||[];n.current||(n.current=new As(()=>C(w=>w+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{n.current?.destroy(),n.current=null}));const g=Lt(e.gridOptions,e,Object.keys(e).filter(w=>!gt.has(w))),j=()=>{if(f.current){const w=()=>l.current?.shouldQueueUpdates()?void 0:a.current.shift();let I=w();for(;I;)I(),I=w()}},G=new gr(j);l.current=G;const V=new dr,O={providedBeanInstances:{frameworkCompWrapper:new fr(n.current,g),renderStatus:V},modules:S,frameworkOverrides:G,setThemeOnGridDiv:!0},B=w=>{E(w),w.createBean(V),o.current.push(()=>{w.destroy()}),w.getBean("ctrlsSvc").whenReady({addDestroyFunc:I=>{o.current.push(I)}},()=>{if(w.isDestroyed())return;const I=t.current;I&&e.passGridApi?.(I)})},R=w=>{w.getBean("ctrlsSvc").whenReady({addDestroyFunc:I=>{o.current.push(I)}},()=>{for(const I of a.current)I();a.current.length=0,f.current=!0})},b=new Ut;g.gridId??(g.gridId=d.current),t.current=b.create(M,g,B,R,O),o.current.push(()=>{t.current=void 0}),t.current&&(d.current=t.current.getGridId())},[]),v=s.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),m=s.useCallback(M=>{f.current&&!l.current?.shouldQueueUpdates()?M():a.current.push(M)},[]);s.useEffect(()=>{const M=hr(c.current,e);c.current=e,m(()=>{t.current&&Ht(M,t.current)})},[e]);const k=!u.useSyncExternalStore||Pe(e,"renderingMode")==="legacy"?"legacy":"default";return u.createElement("div",{style:v,ref:y},u.createElement(lt.Provider,{value:k},p&&!p.isDestroyed()?u.createElement(ur,{key:p.instanceId,context:p}):null,n.current?.getPortals()??null))};function hr(e,t){const r={};for(const n of Object.keys(t)){if(gt.has(n)){mr.has(n)&&Le(274,{prop:n});continue}const o=t[n];e[n]!==o&&(r[n]=o)}return r}var fr=class extends Qt{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const r=this.gridOptions;if(Pe(r,"reactiveCustomComponents")){const c=(l=>{switch(l){case"filter":return Pe(r,"enableFilterHandlers")?bs:ws;case"floatingFilterComponent":return Pe(r,"enableFilterHandlers")?xs:Ps;case"dateComponent":return Rs;case"dragAndDropImageComponent":return Ss;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return ys;case"statusPanel":return Ms;case"toolPanel":return Ds;case"menuItem":return ks;case"cellRenderer":return vs;case"innerHeaderComponent":return Fs}})(t.name);if(c)return new c(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":He();break}const o=!t.cellRenderer&&t.name!=="toolPanel";return new mt(e,this.parent,t,o)}},Cr=s.forwardRef((e,t)=>{const r=s.useContext(Z),{registry:n,context:o,gos:a,rowModel:c}=r,[l,d]=s.useState(()=>new oe),[f,p]=s.useState(()=>new oe),[E,C]=s.useState(),[h,F]=s.useState(),y=s.useRef(),v=s.useRef(null),m=s.useRef(),k=s.useMemo(()=>xt(e.api.getGridId(),E?.rowModelType??"clientSide"),[e]),M=s.useMemo(()=>l.toString()+" ag-details-row",[l]),S=s.useMemo(()=>f.toString()+" ag-details-grid",[f]);t&&s.useImperativeHandle(t,()=>({refresh(){return y.current?.refresh()??!1}})),e.template&&Le(230);const g=s.useCallback(G=>{if(v.current=G,!G||o.isDestroyed()){y.current=o.destroyBean(y.current),m.current?.();return}const V={toggleCss:(B,R)=>d(b=>b.setClass(B,R)),toggleDetailGridCss:(B,R)=>p(b=>b.setClass(B,R)),setDetailGrid:B=>C(B),setRowData:B=>F(B),getGui:()=>v.current},O=n.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(o.createBean(O),O.init(V,e),y.current=O,a.get("detailRowAutoHeight"))){const B=()=>{if(v.current==null)return;const R=v.current.clientHeight;R!=null&&R>0&&setTimeout(()=>{e.node.setRowHeight(R),(jt(a)||Wt(a))&&c.onRowHeightChanged()},0)};m.current=nt(r,G,B),B()}},[]),j=s.useCallback(G=>{y.current?.registerDetailWithMaster(G)},[]);return u.createElement("div",{className:M,ref:g},E&&u.createElement(vt,{className:S,...E,modules:k,rowData:h,passGridApi:j}))}),gr=class extends Yt{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Ye,agGroupRowRenderer:Ye,agDetailCellRenderer:Cr},this.wrapIncoming=(t,r)=>r==="ensureVisible"?ps(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return ds()}},vr=class extends s.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return u.createElement(vt,{...this.props,passGridApi:this.setGridApi})}};const yr=12;function Ae({rowData:e,columnDefs:t}){const r=e.length>yr;return i.jsx("div",{className:r?"table-container-large":"table-container",children:i.jsx(vr,{tooltipShowDelay:0,rowData:e,columnDefs:t,autoSizeStrategy:{type:"fitCellContents"},domLayout:r?"normal":"autoHeight"})})}const Fe=e=>i.jsx(ct,{n:e.value,ordinal:!1}),Rr=e=>e.value?i.jsx("span",{className:"welcome-symbol",children:"ðŸ‘‹"}):i.jsx(i.Fragment,{}),Sr=[{headerName:"Place Overall",field:"overallPlace",cellRenderer:Fe},{headerName:"Place in Gender",field:"genderPlace",cellRenderer:Fe},{headerName:"Place in Age Group",field:"ageGroupPlace",cellRenderer:Fe},{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Gender",field:"gender"},{headerName:"Pace",field:"pace"},{headerName:"Overall Time",field:"overallTime"},{headerName:"Age",field:"age"},{headerName:"Place in Gender (Age Graded)",field:"ageGradePlace"},{headerName:"Percent (Age Graded)",field:"ageGradePercent"},{headerName:"City",field:"city"},{headerName:"State",field:"stateProvince"},{headerName:"Country",field:"countryCode"}];function wr({eventCode:e,results:t,runners:r}){const n={valueGetter:o=>{const a=o.data?.runnerId;if(a===void 0)return!1;const c=r[a];return us(e,c,ot)},cellRenderer:Rr,tooltipValueGetter:o=>o.value?"First race with NBR!":""};return i.jsx(Ae,{rowData:t,columnDefs:[n,...Sr]})}function be({children:e}){return i.jsx("section",{className:"bg-stone-200 dark:bg-stone-800 text-stone-950 dark:text-stone-200",children:e})}const _e=De("bg-stone-300","dark:bg-stone-600"),br=De("bg-stone-100","dark:bg-stone-700");function Ge({count:e,className:t}){return i.jsx("div",{className:De("count-badge",t),children:e})}function Er({eventCode:e,results:t,gender:r,runners:n}){const o=cs(r,t);if(o===0)return i.jsx(i.Fragment,{});const a=t[r];return i.jsx("div",{className:"gender-finishers bg-white dark:bg-stone-900",children:Object.entries(a).map(([c,l])=>i.jsxs("div",{className:"level-finishers",children:[i.jsxs("h4",{children:[i.jsx(i.Fragment,{children:c==="0"?`Overall ${je[r]}`:`Masters ${c}+`})," ",i.jsx(Ge,{count:c==="0"?o:l.length,className:br})]}),i.jsx(wr,{eventCode:e,results:l,runners:n})]},`finishers-${r}-${c}`))})}function Pr({data:e}){let t;if(e===void 0)t=i.jsx("p",{children:"Loading..."});else if(e===null)t=i.jsx("p",{children:"Error loading results"});else{const{results:r,runners:n}=e.document;if(r.items.length===0)return i.jsx(i.Fragment,{});const o={};Object.values(r.items).forEach(a=>{o[a.gender]||(o[a.gender]={}),is(a.age).forEach(l=>{o[a.gender][l]||(o[a.gender][l]=[]),o[a.gender][l].push(a)})}),t=i.jsxs(i.Fragment,{children:[i.jsxs("h2",{children:["Total Finishers"," ",i.jsx(Ge,{count:r.items.length,className:_e})]}),Xt.map(a=>i.jsx(Er,{eventCode:e.document.event.eventCode,results:o,gender:a,runners:n},a))]})}return i.jsx("div",{id:"overall-results",children:i.jsx(be,{children:t})})}const xr=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Finish Time",field:"finishTime",valueFormatter:e=>it(e.value)}];function Fr({runners:e}){return i.jsx(Ae,{rowData:e,columnDefs:xr})}function kr({data:e}){let t;if(e===void 0)t=i.jsx("p",{children:"Loading..."});else if(e===null)t=i.jsx("p",{children:"Error loading awards"});else{const{awards:r}=e.document;if(r.length===0)return i.jsx(i.Fragment,{});t=i.jsxs(i.Fragment,{children:[i.jsx("h2",{children:"Awards"}),r.map(n=>{const o=n.minimumAge===0?`Open Class ${je[n.teamGender]}`:`Master's ${je[n.teamGender]} ${n.minimumAge}+`;return i.jsxs("div",{children:[i.jsx("h3",{children:o}),it(n.summaryTime)," -"," ",i.jsx(ct,{n:n.teamOrder,ordinal:!0})," Place",i.jsx(Fr,{runners:n.runners.items})]},`award-${n.teamCode}-${n.teamGender}-${n.minimumAge}`)})]})}return i.jsx("div",{id:"awards",children:i.jsx(be,{children:t})})}function Mr({data:e}){let t;if(e===void 0)t=i.jsx("p",{children:"Loading..."});else if(e===null)t=i.jsx("p",{children:"Error loading event details"});else{const{event:r}=e.document;t=i.jsxs(i.Fragment,{children:[i.jsxs("p",{children:[i.jsx("b",{children:"Date and Time: "}),r&&new Date(r.startDateTime).toLocaleString("en-US",{dateStyle:"full",timeStyle:"medium"})]}),r?.venue&&i.jsxs("p",{children:[i.jsx("b",{children:"Location: "}),r.venue]}),r?.weather&&i.jsxs("p",{children:[i.jsx("b",{children:"Weather: "}),r.weather]})]})}return i.jsx("div",{id:"event-details",children:i.jsx(be,{children:t})})}function Dr({nyrrPrSetters:e,firstTimeWithNBR:t,topTenFinishers:r,firstRaceOfDistanceWithNyrr:n,data:o}){return o===void 0||o===null||e===void 0||e===null||t===void 0||t===null||n===void 0||n===null||r===void 0||r===null||`${JSON.stringify({nyrrPrSetters:e,firstTimeWithNBR:t,topTenFinishers:r},void 0,2)}`.slice(0,1e3),i.jsx(i.Fragment,{})}const tt=e=>{if(e===void 0)return 1/0;const t=e.split(":").map(n=>parseFloat(n));let r=0;return t.length===3?(r+=t[0]*3600,r+=t[1]*60,r+=t[2]):t.length===2?(r+=t[0]*60,r+=t[1]):t.length===1&&(r+=t[0]),r},st=(e,t)=>{const r=tt(e),n=tt(t);return r<n},Ve=(e,t)=>{const r=new Date(e).valueOf(),n=new Date(t).valueOf();return r<n},Nr=e=>{const{event:t,results:r}=e.document,{items:n}=r,{distanceName:o}=t,a=[];return n.forEach(c=>{const{runnerId:l,overallTime:d}=c,f=e.document.runners[l].filter(C=>C.distanceName===o);let p=!0;const E=f.reduce((C,h)=>{if(p){if(h.eventCode===t.eventCode)return C;if(Ve(h.startDateTime,t.startDateTime))if(p&&st(h.actualTime,d)){p=!1;return}else return C===void 0||st(h.actualTime,C.actualTime)?h:C;return C}},void 0);p&&E!==void 0&&a.push({finisher:c,fastestPreviousRace:E})}),a},Ar=(e,t)=>{const{event:r,runners:n}=e.document,o=[];return Object.entries(n).forEach(([a,c])=>{c.some(d=>d.teamCode===t&&Ve(d.startDateTime,r.startDateTime))||o.push(parseInt(a,10))}),o},Gr=e=>{const{event:t,runners:r}=e.document,n=[];return Object.entries(r).forEach(([o,a])=>{a.some(l=>l.distanceName===t.distanceName&&Ve(l.startDateTime,t.startDateTime))||n.push(parseInt(o,10))}),n},Br=e=>e.document.results.items.filter(t=>t.ageGroupPlace<=10).map(t=>t.runnerId),rt=e=>{const t=e.split(":").map(Number);let r=0;return t.length===3?(r+=t[0]*3600,r+=t[1]*60,r+=t[2]):t.length===2?(r+=t[0]*60,r+=t[1]):t.length===1&&(r+=t[0]),r},Tr=e=>{const t=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return[t.toString().padStart(2,"0"),r.toString().padStart(2,"0"),n.toString().padStart(2,"0")].join(":")},Or=[{headerName:"First Name",field:"finisher.firstName"},{headerName:"Last Name",field:"finisher.lastName"},{headerName:"PR Time",field:"finisher.overallTime"},{headerName:"Previous Fastest Time",field:"fastestPreviousRace.actualTime"},{headerName:"Previous Fastest Race",field:"fastestPreviousRace.eventName"},{headerName:"Date of Previous Fastest Race",field:"fastestPreviousRace.startDateTime",valueFormatter:e=>new Date(e.value).toLocaleDateString()},{headerName:"Improvement",valueGetter:e=>{const t=e.data?.finisher?.overallTime,r=e.data?.fastestPreviousRace?.actualTime;if(t&&r){const n=rt(t);return rt(r)-n}return 0},valueFormatter:e=>{const t=e.value;return t>0?Tr(t):"N/A"}}];function Ir({personalRecords:e}){return i.jsx(Ae,{columnDefs:Or,rowData:e})}function jr({data:e,personalRecords:t}){let r;if(e===void 0)r=i.jsx("p",{children:"Loading..."});else if(t===void 0)r=i.jsx("p",{children:"Loading..."});else if(e===null)r=i.jsx("p",{children:"Error loading personal records"});else if(t===null)r=i.jsx("p",{children:"Error loading personal records"});else{if(t.length===0)return i.jsx(i.Fragment,{});r=i.jsxs(i.Fragment,{children:[i.jsxs("h2",{children:["Personal Records (with NYRR)"," ",i.jsx(Ge,{count:t.length,className:_e})]}),i.jsx(Ir,{personalRecords:t})]})}return i.jsx("div",{id:"personal-records",children:i.jsx(be,{children:r})})}function Wr({results:e,finisherIds:t,columns:r}){const n=t.map(o=>e.items.find(a=>a.runnerId===o)).filter(o=>o!==void 0);return i.jsx(Ae,{columnDefs:r,rowData:n})}const Lr=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase();function $e({data:e,finisherIds:t,title:r,columns:n}){let o;if(e===void 0)o=i.jsx("p",{children:"Loading..."});else if(t===void 0)o=i.jsx("p",{children:"Loading..."});else if(e===null)o=i.jsxs("p",{children:["Error loading ",r]});else if(t===null)o=i.jsxs("p",{children:["Error loading ",r]});else{if(t.length===0)return i.jsx(i.Fragment,{});o=i.jsxs(i.Fragment,{children:[i.jsxs("h2",{children:[r," ",i.jsx(Ge,{count:t.length,className:_e})]}),i.jsx(Wr,{results:e.document.results,finisherIds:t,columns:n})]})}return i.jsx("div",{id:Lr(r),children:i.jsx(be,{children:o})})}function Ur({data:e,finisherIds:t}){const r=[{headerName:"Age Group Place",field:"ageGroupPlace",cellRenderer:Fe},{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Age",field:"age"},{headerName:"Gender",field:"gender"},{headerName:"Overall Time",field:"overallTime"}];return i.jsx($e,{finisherIds:t,title:"Top Ten Finishers",columns:r,data:e})}function Hr({data:e,finisherIds:t}){const r=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"}];return i.jsx($e,{finisherIds:t,title:"First Race With NBR",columns:r,data:e})}function _r({data:e,finisherIds:t}){const r=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"}];return i.jsx($e,{finisherIds:t,title:`First ${e?.document.event.distanceUnitCode} With NYRR`,columns:r,data:e})}const Vr="team-stats-api-teamstats-121655350650",$r="us-east-1",zr=`https://${Vr}.s3.${$r}.amazonaws.com`,Kr=es.create({baseURL:zr});function Jr({eventCode:e}){const t=ts(async()=>(await Kr.get(`/${e}.json`)).data,[e]),r=t&&Ar(t,ot),n=t&&Gr(t),o=t&&Nr(t),a=t&&Br(t);return i.jsxs("div",{className:"content",children:[t&&t.document.results.totalItems>100&&i.jsx("section",{className:"bg-red-100",children:"There is a known issue where events with over 100 runners may show duplicate results, due to a bug in data processing."}),i.jsx(Mr,{data:t}),i.jsx(Dr,{data:t,nyrrPrSetters:o,firstTimeWithNBR:r,topTenFinishers:a,firstRaceOfDistanceWithNyrr:n}),i.jsx(kr,{data:t}),i.jsx(jr,{data:t,personalRecords:o}),i.jsx(Ur,{data:t,finisherIds:a}),i.jsx(Hr,{data:t,finisherIds:r}),i.jsx(_r,{data:t,finisherIds:n}),i.jsx(Pr,{data:t})]})}const Zr=wt(function(){const{eventCode:t}=bt();return t?i.jsxs(i.Fragment,{children:[i.jsx(Jr,{eventCode:t}),i.jsx(os,{})]}):i.jsx("div",{children:"Something went wrong"})});export{Zr as default};
