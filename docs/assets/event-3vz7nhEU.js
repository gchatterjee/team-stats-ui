import{y as yt,p,z as Rt,R as l,a as t,w as St,A as wt}from"./chunk-WWGJGFF6-BXEJCw1g.js";import{F as bt,G as Ae,_ as Et,b as Pt,c as We,d as st,C as xe,E as ge,e as ae,H as Ft,f as xt,g as kt,h as Mt,i as Dt,j as At,k as Gt,R as Nt,l as Bt,T as Tt,m as Ot,n as It,o as Wt,p as jt,q as Lt,r as Ut,s as Ee,t as Ht,v as _t,w as Vt,x as $t,y as zt,z as Kt,B as Jt,D as Ge,V as qt,I as Yt,J as Qt,K as rt,L as Xt,O as Zt,u as es}from"./main.esm-ClyZmu_I.js";import{a as nt,R as ts}from"./index-CKtN93q8.js";var Ne={exports:{}};var $e;function ss(){return $e||($e=1,(function(e){(function(){var s={}.hasOwnProperty;function r(){for(var a="",i=0;i<arguments.length;i++){var c=arguments[i];c&&(a=o(a,n(c)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var i="";for(var c in a)s.call(a,c)&&a[c]&&(i=o(i,c));return i}function o(a,i){return i?a?a+" "+i:a+i:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Ne)),Ne.exports}var rs=ss();const ke=yt(rs);function ns(){return p.jsx(Rt,{to:`mailto:${bt}`,className:ke("feedback-overlay","bg-stone-950","dark:bg-stone-200","text-stone-200","dark:text-stone-950","hover:bg-stone-700","dark:hover:bg-stone-400"),children:"Feedback"})}const os=[0,40,50,60,70,80,90,100,110,120],as=e=>os.filter(s=>s<=e),is=(e,s)=>!s[e]||!s[e][0]?0:s[e][0].length,Oe={[Ae.Women]:"Women",[Ae.Men]:"Men",[Ae.NonBinary]:"Non-Binary"},cs=e=>{const s=["th","st","nd","rd"],r=e%100;return s[(r-20)%10]||s[r]||s[0]},ot=e=>{const s=Math.floor(e/1e3),r=Math.floor(s/3600),n=Math.floor(s%3600/60),o=s%60,a=[];return a.push(r.toString().padStart(2,"0")),a.push(n.toString().padStart(2,"0")),a.push(o.toString().padStart(2,"0")),a.join(":")},ls=(e,s,r)=>{try{const n=s.find(o=>o.eventCode===e);return n?!s.some(o=>o.teamCode===r&&new Date(o.startDateTime).valueOf()<new Date(n.startDateTime).valueOf()):!1}catch(n){return console.error("Error in isFirstRaceWithTeam:",{races:s},n),!1}},ze={1:"ðŸ¥‡",2:"ðŸ¥ˆ",3:"ðŸ¥‰"};function at({n:e,ordinal:s=!1}){return p.jsxs("span",{className:"place",children:[ze[e]?ze[e]+" ":"",e,s?cs(e):""]})}var X=l.createContext({}),it=l.createContext("default"),we=(e,s,r,n)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const a=e.newAgStackInstance();let i,c,u=!1;return a.then(f=>{if(u){s.destroyBean(f);return}i=f,c=i.getGui(),r.appendChild(c),Ke(n,i)}),()=>{u=!0,i&&(c?.remove(),s.destroyBean(i),n&&Ke(n,void 0))}},Ke=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},ne=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),oe=class ct{constructor(...s){this.classesMap={};for(const r of s)this.classesMap[r]=!0}setClass(s,r){if(!!this.classesMap[s]==r)return this;const o=new ct;return o.classesMap={...this.classesMap},o.classesMap[s]=r,o}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ve=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},Ie=l.version?.split(".")[0],lt=Ie==="16"||Ie==="17";function us(){return Ie==="19"}var Pe=!1;function ds(e){return Pe||setTimeout(()=>Pe=!1,0),Pe=!0,e()}var Se=(e,s)=>{!lt&&e&&!Pe?ts.flushSync(s):s()},ps=e=>{lt?e():l.startTransition(e)};function ms(e,s,r){return l.useSyncExternalStore?l.useSyncExternalStore(e,s):r}function Fe(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const n=[],o=[],a=new Map,i=new Map;for(let c=0;c<s.length;c++){const u=s[c];i.set(u.instanceId,u)}for(let c=0;c<e.length;c++){const u=e[c];a.set(u.instanceId,u),i.has(u.instanceId)&&n.push(u)}for(let c=0;c<s.length;c++){const u=s[c],f=u.instanceId;a.has(f)||o.push(u)}return n.length===e.length&&o.length===0?e:n.length===0&&o.length===s.length?s:n.length===0?o:o.length===0?n:[...n,...o]}var ut=t.forwardRef((e,s)=>{const{registry:r,context:n}=t.useContext(X),o=t.useRef(null),a=t.useRef(null),i=t.useRef(null),c=t.useRef(null),u=t.useRef(null),f=t.useRef(),[d,E]=t.useState(),[C,h]=t.useState(),[x,y]=t.useState(),[v,m]=t.useState(()=>new oe),[k,M]=t.useState(()=>new oe("ag-hidden")),[S,g]=t.useState(()=>new oe("ag-hidden")),[W,N]=t.useState(()=>new oe("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>we(d,n,a.current),[d]);const V=t.useCallback(L=>{if(o.current=L,!L||n.isDestroyed()){f.current=n.destroyBean(f.current);return}const D={setInnerRenderer:(A,H)=>{E(A),y(H)},setChildCount:A=>h(A),toggleCss:(A,H)=>m(G=>G.setClass(A,H)),setContractedDisplayed:A=>g(H=>H.setClass("ag-hidden",!A)),setExpandedDisplayed:A=>M(H=>H.setClass("ag-hidden",!A)),setCheckboxVisible:A=>N(H=>H.setClass("ag-invisible",!A)),setCheckboxSpacing:A=>N(H=>H.setClass("ag-group-checkbox-spacing",A))},U=r.createDynamicBean("groupCellRendererCtrl",!0);U&&(f.current=n.createBean(U),f.current.init(D,L,i.current,c.current,u.current,ut,e))},[]),O=t.useMemo(()=>`ag-cell-wrapper ${v.toString()}`,[v]),B=t.useMemo(()=>`ag-group-expanded ${k.toString()}`,[k]),R=t.useMemo(()=>`ag-group-contracted ${S.toString()}`,[S]),b=t.useMemo(()=>`ag-group-checkbox ${W.toString()}`,[W]),w=d?.componentFromFramework,I=w?d.componentClass:void 0,P=d==null&&x!=null,J=Et(x);return l.createElement("span",{className:O,ref:V,...e.colDef?{}:{role:f.current?.getCellAriaRole()}},l.createElement("span",{className:B,ref:c}),l.createElement("span",{className:R,ref:u}),l.createElement("span",{className:b,ref:i}),l.createElement("span",{className:"ag-group-value",ref:a},P?J:w?l.createElement(I,{...d.params}):null),l.createElement("span",{className:"ag-group-child-count"},C))}),Je=ut,je=t.createContext({setMethods:()=>{}}),hs=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:n,setMethods:o}=e,[{key:a,...i},c]=t.useState(s);return t.useEffect(()=>{r(u=>c(u))},[]),l.createElement(je.Provider,{value:{setMethods:o}},l.createElement(n,{key:a,...i}))},fs=t.memo(hs),Cs=0;function qe(){return`agPortalKey_${++Cs}`}var dt=class{constructor(e,s,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=qe(),this.portalKey=qe(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(o=>{this.resolveInstanceCreated=o})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const n=r[e];if(n)return n.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{this.componentInstance=s,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=nt.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Me(e,s,r){for(const n of e){const o=s[n];o&&(r[n]=o)}}var ie=class extends dt{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=fs}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Me(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},gs=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},vs=class extends ie{refresh(e){this.sourceParams=e,this.refreshProps()}},ys=class extends ie{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Rs=class extends ie{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:n}=this;return e.label=s,e.icon=r,e.shake=n,e}},Ss=class extends ie{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const s=new ae(r=>{this.resolveFilterPassCallback=r});this.setModel(e).then(()=>{s.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},ws=class extends ie{constructor(){super(...arguments),this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function pt(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var bs=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),pt(this.floatingFilterParams,e)}},Es=class extends ie{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),pt(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Ps=class extends ie{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},Fs=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},xs=class extends ie{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},ks=class extends ie{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ms=class extends ie{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Le(){We(231)}var Ds=1e3,As=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Ds}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Se(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Gs=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(X),[n,o]=t.useState(),[a,i]=t.useState(),c=t.useRef(),u=t.useRef(null),f=t.useRef(null),d=t.useRef(null),E=t.useRef(),C=t.useRef();s&&!C.current&&(C.current=new xe(()=>u.current));const h=t.useCallback(m=>{if(u.current=m,!m||!e.isAlive()||r.isDestroyed()){c.current=r.destroyBean(c.current);return}c.current=r.createBean(new ge);const k=()=>{const S=e.getSelectAllGui();S&&(f.current?.insertAdjacentElement("afterend",S),c.current.addDestroyFunc(()=>S.remove()))},M={setWidth:S=>{u.current&&(u.current.style.width=S)},toggleCss:(S,g)=>C.current.toggleCss(S,g),setUserStyles:S=>i(S),setAriaSort:S=>{u.current&&(S?Ht(u.current,S):_t(u.current))},setUserCompDetails:S=>o(S),getUserCompInstance:()=>E.current||void 0,refreshSelectAllGui:k,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(M,m,f.current,d.current,c.current),k()},[]);t.useLayoutEffect(()=>we(n,r,d.current,E),[n]),t.useEffect(()=>{e.setDragSource(u.current)},[n]);const x=t.useMemo(()=>!!(n?.componentFromFramework&&ve(n.componentClass)),[n]),y=n?.componentFromFramework,v=n?.componentClass;return l.createElement("div",{ref:h,style:a,className:"ag-header-cell",role:"columnheader"},l.createElement("div",{ref:f,className:"ag-header-cell-resize",role:"presentation"}),l.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},y?x?l.createElement(v,{...n.params}):l.createElement(v,{...n.params,ref:E}):null))},Ns=t.memo(Gs),Bs=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Ts=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(X),[n,o]=t.useState(),[a,i]=t.useState(()=>new oe("ag-header-cell","ag-floating-filter")),[c,u]=t.useState(()=>new oe),[f,d]=t.useState(()=>new oe("ag-floating-filter-button","ag-hidden")),[E,C]=t.useState("false"),[h,x]=t.useState(),[,y]=t.useState(1),v=t.useRef(),m=t.useRef(null),k=t.useRef(null),M=t.useRef(null),S=t.useRef(null),g=t.useRef(),W=t.useRef(),N=A=>{A!=null&&g.current&&g.current(A)},V=t.useCallback(A=>{if(m.current=A,!A||!e.isAlive()||s.isDestroyed()){v.current=s.destroyBean(v.current);return}v.current=s.createBean(new ge),W.current=new ae(G=>{g.current=G});const H={toggleCss:(G,j)=>i(Y=>Y.setClass(G,j)),setUserStyles:G=>o(G),addOrRemoveBodyCssClass:(G,j)=>u(Y=>Y.setClass(G,j)),setButtonWrapperDisplayed:G=>{d(j=>j.setClass("ag-hidden",!G)),C(G?"false":"true")},setWidth:G=>{m.current&&(m.current.style.width=G)},setCompDetails:G=>x(G),getFloatingFilterComp:()=>W.current?W.current:null,setMenuIcon:G=>S.current?.appendChild(G)};e.setComp(H,A,S.current,k.current,v.current)},[]);t.useLayoutEffect(()=>we(h,s,k.current,N),[h]);const O=t.useMemo(()=>a.toString(),[a]),B=t.useMemo(()=>c.toString(),[c]),R=t.useMemo(()=>f.toString(),[f]),b=t.useMemo(()=>!!(h&&h.componentFromFramework&&ve(h.componentClass)),[h]),w=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),I=t.useMemo(()=>r.get("enableFilterHandlers"),[]),[P,J]=t.useState();t.useEffect(()=>{if(h?.componentFromFramework)if(w){const A=I?Bs:bs,H=new A(h.params,()=>y(G=>G+1));N(H),J(H)}else Le()},[h]);const L=P?.getProps(),D=h?.componentFromFramework,U=h?.componentClass;return l.createElement("div",{ref:V,style:n,className:O,role:"gridcell"},l.createElement("div",{ref:k,className:B,role:"presentation"},D?w?L&&l.createElement(je.Provider,{value:{setMethods:A=>P.setMethods(A)}},l.createElement(U,{...L})):l.createElement(U,{...h.params,ref:b?()=>{}:N}):null),l.createElement("div",{ref:M,"aria-hidden":E,className:R,role:"presentation"},l.createElement("button",{ref:S,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Os=t.memo(Ts),Is=({ctrl:e})=>{const{context:s}=t.useContext(X),[r,n]=t.useState(),[o,a]=t.useState(()=>new oe),[i,c]=t.useState(()=>new oe),[u,f]=t.useState("false"),[d,E]=t.useState(),[C,h]=t.useState(),x=t.useRef(),y=t.useRef(null),v=t.useRef(null),m=t.useRef(null),k=t.useRef(),M=t.useCallback(O=>{if(y.current=O,!O||!e.isAlive()||s.isDestroyed()){x.current=s.destroyBean(x.current);return}x.current=s.createBean(new ge);const B={setWidth:R=>{y.current&&(y.current.style.width=R)},toggleCss:(R,b)=>a(w=>w.setClass(R,b)),setUserStyles:R=>n(R),setHeaderWrapperHidden:R=>{const b=m.current;b&&(R?b.style.setProperty("display","none"):b.style.removeProperty("display"))},setHeaderWrapperMaxHeight:R=>{const b=m.current;b&&(R!=null?b.style.setProperty("max-height",`${R}px`):b.style.removeProperty("max-height"),b.classList.toggle("ag-header-cell-comp-wrapper-limited-height",R!=null))},setUserCompDetails:R=>h(R),setResizableDisplayed:R=>{c(b=>b.setClass("ag-hidden",!R)),f(R?"false":"true")},setAriaExpanded:R=>E(R),getUserCompInstance:()=>k.current||void 0};e.setComp(B,O,v.current,m.current,x.current)},[]);t.useLayoutEffect(()=>we(C,s,m.current),[C]),t.useEffect(()=>{y.current&&e.setDragSource(y.current)},[C]);const S=t.useMemo(()=>!!(C?.componentFromFramework&&ve(C.componentClass)),[C]),g=t.useMemo(()=>"ag-header-group-cell "+o.toString(),[o]),W=t.useMemo(()=>"ag-header-cell-resize "+i.toString(),[i]),N=C?.componentFromFramework,V=C?.componentClass;return l.createElement("div",{ref:M,style:r,className:g,role:"columnheader","aria-expanded":d},l.createElement("div",{ref:m,className:"ag-header-cell-comp-wrapper",role:"presentation"},N?S?l.createElement(V,{...C.params}):l.createElement(V,{...C.params,ref:k}):null),l.createElement("div",{ref:v,"aria-hidden":u,className:W}))},Ws=t.memo(Is),js=({ctrl:e})=>{const{gos:s,context:r}=t.useContext(X),{topOffset:n,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),a=t.useMemo(()=>s.get("tabIndex"),[]),[i,c]=t.useState(()=>e.getAriaRowIndex()),u=e.headerRowClass,[f,d]=t.useState(()=>o+"px"),[E,C]=t.useState(()=>n+"px"),h=t.useRef(null),[x,y]=t.useState(()=>e.getUpdatedHeaderCtrls()),v=t.useRef(),m=t.useRef(null),k=t.useCallback(g=>{if(m.current=g,!g||!e.isAlive()||r.isDestroyed()){v.current=r.destroyBean(v.current);return}v.current=r.createBean(new ge);const W={setHeight:N=>d(N),setTop:N=>C(N),setHeaderCtrls:(N,V,O)=>{const B=h.current,R=Fe(B,N,V);R!==B&&(h.current=R,Se(O,()=>y(R)))},setWidth:N=>{m.current&&(m.current.style.width=N)},setRowIndex:N=>{c(N)}};e.setComp(W,v.current,!1)},[]),M=t.useMemo(()=>({height:f,top:E}),[f,E]),S=t.useCallback(g=>{switch(e.type){case"group":return l.createElement(Ws,{ctrl:g,key:g.instanceId});case"filter":return l.createElement(Os,{ctrl:g,key:g.instanceId});default:return l.createElement(Ns,{ctrl:g,key:g.instanceId})}},[]);return l.createElement("div",{ref:k,className:u,role:"row",style:M,tabIndex:a,"aria-rowindex":i},x.map(S))},Ls=t.memo(js),Us=({pinned:e})=>{const[s,r]=t.useState(!0),[n,o]=t.useState([]),{context:a}=t.useContext(X),i=t.useRef(null),c=t.useRef(null),u=t.useRef(),f=e==="left",d=e==="right",E=!f&&!d,C=t.useCallback(y=>{if(i.current=y,!y||a.isDestroyed()){u.current=a.destroyBean(u.current);return}u.current=a.createBean(new Ft(e));const v={setDisplayed:r,setCtrls:m=>o(m),setCenterWidth:m=>{c.current&&(c.current.style.width=m)},setViewportScrollLeft:m=>{i.current&&(i.current.scrollLeft=m)},setPinnedContainerWidth:m=>{i.current&&(i.current.style.width=m,i.current.style.minWidth=m,i.current.style.maxWidth=m)}};u.current.setComp(v,i.current)},[]),h=s?"":"ag-hidden",x=()=>n.map(y=>l.createElement(Ls,{ctrl:y,key:y.instanceId}));return f?l.createElement("div",{ref:C,className:"ag-pinned-left-header "+h,"aria-hidden":!s,role:"rowgroup"},x()):d?l.createElement("div",{ref:C,className:"ag-pinned-right-header "+h,"aria-hidden":!s,role:"rowgroup"},x()):E?l.createElement("div",{ref:C,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},l.createElement("div",{ref:c,className:"ag-header-container",role:"presentation"},x())):null},Be=t.memo(Us),Hs=()=>{const[e,s]=t.useState(()=>new oe),[r,n]=t.useState(),{context:o}=t.useContext(X),a=t.useRef(null),i=t.useRef(),c=t.useCallback(d=>{if(a.current=d,!d||o.isDestroyed()){i.current=o.destroyBean(i.current);return}i.current=o.createBean(new xt);const E={toggleCss:(C,h)=>s(x=>x.setClass(C,h)),setHeightAndMinHeight:C=>n(C)};i.current.setComp(E,d,d)},[]),u=t.useMemo(()=>"ag-header "+e.toString(),[e]),f=t.useMemo(()=>({height:r,minHeight:r}),[r]);return l.createElement("div",{ref:c,className:u,style:f,role:"presentation"},l.createElement(Be,{pinned:"left"}),l.createElement(Be,{pinned:null}),l.createElement(Be,{pinned:"right"}))},_s=t.memo(Hs),Vs=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const n=r.parentElement;if(n){const o=document.createComment(e);return n.insertBefore(o,r),()=>{o.remove()}}}},[e])},he=Vs,$s=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},zs=e=>{const s=t.useRef(e),r=t.useRef(),n=t.useRef(!1),o=t.useRef(!1),[,a]=t.useState(0);n.current&&(o.current=!0),t.useEffect(()=>(n.current||(r.current=s.current(),n.current=!0),a(i=>i+1),()=>{o.current&&r.current?.()}),[])},Ks=e=>{const[s,r]=t.useState(),n=t.useContext(X),{context:o,popupSvc:a,gos:i,editSvc:c}=n,{editDetails:u,cellCtrl:f,eParentCell:d}=e;return zs(()=>{const{compDetails:E}=u,C=i.get("stopEditingWhenCellsLoseFocus");let h,x;if(!o.isDestroyed()){x=o.createBean(c.createPopupEditorWrapper(E.params));const y=x.getGui();if(e.jsChildComp){const g=e.jsChildComp.getGui();g&&y.appendChild(g)}const{column:v,rowNode:m}=f,k={column:v,rowNode:m,type:"popupCellEditor",eventSource:d,ePopup:y,position:u.popupPosition,keepWithinBounds:!0},M=a?.positionPopupByComponent.bind(a,k),S=a?.addPopup({modal:C,eChild:y,closeOnEsc:!0,closedCallback:()=>{f.onPopupEditorClosed()},anchorToElement:d,positionCallback:M,ariaOwns:d});h=S?S.hideFunc:void 0,r(x),e.jsChildComp?.afterGuiAttached?.()}return()=>{h?.(),o.destroyBean(x)}}),t.useLayoutEffect(()=>()=>{f.isCellFocused()&&s?.getGui().contains(kt(n))&&d.focus({preventScroll:!0})},[s]),s&&e.wrappedContent?nt.createPortal(e.wrappedContent,s.getGui()):null},Ye=t.memo(Ks),Js=(e,s,r)=>{const{compProxy:n}=e;r(n);const o=n.getProps(),a=ve(s);return l.createElement(je.Provider,{value:{setMethods:i=>n.setMethods(i)}},a?l.createElement(s,{...o}):l.createElement(s,{...o,ref:i=>n.setRef(i)}))},Qe=(e,s,r)=>e.compProxy?Js(e,s,r):l.createElement(s,{...e.compDetails.params,ref:r}),qs=(e,s,r,n,o)=>{const a=e.compDetails,i=a.componentClass,c=a.componentFromFramework&&!e.popup,u=a.componentFromFramework&&e.popup,f=!a.componentFromFramework&&e.popup;return c?Qe(e,i,s):u?l.createElement(Ye,{editDetails:e,cellCtrl:n,eParentCell:r,wrappedContent:Qe(e,i,s)}):f&&o?l.createElement(Ye,{editDetails:e,cellCtrl:n,eParentCell:r,jsChildComp:o}):null},Ys=(e,s,r,n,o,a,i=!1)=>{const{context:c}=t.useContext(X),u=t.useCallback(()=>{const f=o.current;if(!f)return;const d=f.getGui();d&&d.parentElement&&d.remove(),c.destroyBean(f),o.current=void 0},[]);t.useEffect(()=>{const f=e!=null&&!i,d=e?.compDetails&&!e.compDetails.componentFromFramework,E=s&&r==null;if(!(f&&d&&!E)){u();return}const h=e.compDetails;if(o.current){const y=o.current,m=y.refresh!=null&&e.force==!1?y.refresh(h.params):!1;if(m===!0||m===void 0)return;u()}h.newAgStackInstance().then(y=>{if(!y)return;const v=y.getGui();if(!v)return;(s?r:a.current).appendChild(v),o.current=y})},[e,s,n,i]),t.useEffect(()=>u,[])},mt=Ys,Qs=({cellCtrl:e,parent:s})=>{const r=t.useRef(),n=t.useMemo(()=>{const{loadingComp:o}=e.getDeferLoadingCellRenderer();return o?{value:void 0,compDetails:o,force:!1}:void 0},[e]);if(mt(n,!1,void 0,1,r,s),n?.compDetails?.componentFromFramework){const o=n.compDetails.componentClass;return l.createElement(o,{...n.compDetails.params})}return l.createElement(l.Fragment,null)},Xs=({cellCtrl:e,printLayout:s,editingCell:r})=>{const n=t.useContext(X),{context:o}=n,{column:{colIdSanitised:a},instanceId:i}=e,c=t.useRef(),[u,f]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[d,E]=t.useState(),[C,h]=t.useState(1),[x,y]=t.useState(),[v,m]=t.useState(!1),[k,M]=t.useState(!1),[S,g]=t.useState(!1),[W,N]=t.useState(),V=t.useMemo(()=>e.isForceWrapper(),[e]),O=t.useMemo(()=>e.getCellAriaRole(),[e]),B=t.useRef(null),R=t.useRef(null),b=t.useRef(null),w=t.useRef(),I=t.useRef(),P=t.useRef(),J=t.useRef([]),L=t.useRef(),D=t.useRef(),[U,A]=t.useState(0),H=t.useCallback(T=>{D.current=T,A(_=>_+1)},[]),G=u!=null&&(v||S||k)&&(d==null||!!d.popup),j=V||G,Y=t.useMemo(()=>e.getCellValueClass(),[e]),le=t.useCallback(T=>{if(I.current=T,T){const _=T.isCancelBeforeStart&&T.isCancelBeforeStart();setTimeout(()=>{_?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(T))})}},[e]),Z=t.useRef();Z.current||(Z.current=new xe(()=>B.current));const fe=!!d&&!d.popup;mt(u,j,D.current,U,w,B,fe);const Ce=t.useRef();t.useLayoutEffect(()=>{const T=Ce.current,_=u;if(Ce.current=u,T==null||T.compDetails==null||_==null||_.compDetails==null)return;L.current?.refreshVisibility();const Q=T.compDetails,q=_.compDetails;if(Q.componentClass!=q.componentClass||b.current?.refresh==null)return;b.current.refresh(q.params)!=!0&&h(z=>z+1)},[u]),t.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework)||o.isDestroyed())return;const _=d.compDetails,Q=d.popup===!0,q=_.newAgStackInstance();return q.then(F=>{if(!F)return;const z=F.getGui();le(F),Q||((V?P:B).current?.appendChild(z),F.afterGuiAttached?.()),N(F)}),()=>{q.then(F=>{const z=F.getGui();e.disableEditorTooltipFeature(),o.destroyBean(F),le(void 0),N(void 0),z?.remove()})}},[d]);const ye=t.useCallback(T=>{if(P.current=T,!T||o.isDestroyed()||!e.isAlive()){const q=J.current;J.current=[];for(const F of q)F();return}let _;const Q=q=>{q&&(T.insertAdjacentElement("afterbegin",q.getGui()),J.current.push(()=>{Vt(q.getGui()),o.destroyBean(q),L.current===_&&(L.current=void 0)}))};v&&Q(e.createSelectionCheckbox()),S&&Q(e.createDndSource()),k&&(_=e.createRowDragComp(),L.current=_,_&&(Q(_),_.refreshVisibility()))},[e,o,S,k,v]),$=t.useCallback(()=>{const T=!e.isCellSpanning()||R.current,_=B.current;if(!_||!T||!e||!e.isAlive()||o.isDestroyed()){c.current=o.destroyBean(c.current);return}c.current=o.createBean(new ge);const Q={toggleCss:(F,z)=>Z.current.toggleCss(F,z),setUserStyles:F=>y(F),getFocusableElement:()=>B.current,setIncludeSelection:F=>m(F),setIncludeRowDrag:F=>M(F),setIncludeDndSource:F=>g(F),getCellEditor:()=>I.current??null,getCellRenderer:()=>b.current??w.current,getParentOfValue:()=>D.current??P.current??B.current,setRenderDetails:(F,z,te)=>{const ue=()=>{f(se=>se?.compDetails!==F||se?.value!==z||se?.force!==te?{value:z,compDetails:F,force:te}:se)};if(F?.params?.deferRender&&!e.rowNode.group){const{loadingComp:se,onReady:Re}=e.getDeferLoadingCellRenderer();if(se){f({value:void 0,compDetails:se,force:!1}),Re.then(()=>ps(ue));return}}ue()},setEditDetails:(F,z,te,ue)=>{if(F){let se;F.componentFromFramework&&(ue?se=new $s(F.params,()=>h(Re=>Re+1)):Le()),E({compDetails:F,popup:z,popupPosition:te,compProxy:se}),z||f(void 0)}else e.hasBrowserFocus()&&Q.getFocusableElement().focus({preventScroll:!0}),I.current=void 0,E(void 0)},refreshEditStyles:(F,z)=>{if(!B.current)return;const{current:te}=Z;te.toggleCss("ag-cell-value",!j),te.toggleCss("ag-cell-inline-editing",!!F&&!z),te.toggleCss("ag-cell-popup-editing",!!F&&!!z),te.toggleCss("ag-cell-not-inline-editing",!F||!!z)}},q=P.current||void 0;e.setComp(Q,_,R.current??void 0,q,s,r,c.current)},[]),me=t.useCallback(T=>{B.current=T,$()},[]),ee=t.useCallback(T=>{R.current=T,$()},[]),ce=t.useMemo(()=>!!(u?.compDetails?.componentFromFramework&&ve(u.compDetails.componentClass)),[u]);t.useLayoutEffect(()=>{if(!B.current)return;const{current:T}=Z;T.toggleCss("ag-cell-value",!j),T.toggleCss("ag-cell-inline-editing",!!d&&!d.popup),T.toggleCss("ag-cell-popup-editing",!!d&&!!d.popup),T.toggleCss("ag-cell-not-inline-editing",!d||!!d.popup)});const de=()=>{const{compDetails:T,value:_}=u;if(!T)return _?.toString?.()??_;if(T.componentFromFramework){const Q=T.componentClass;return l.createElement(t.Suspense,{fallback:l.createElement(Qs,{cellCtrl:e,parent:B})},ce?l.createElement(Q,{...T.params,key:C}):l.createElement(Q,{...T.params,key:C,ref:b}))}},pe=()=>{const T=()=>u==null?null:j?l.createElement("span",{role:"presentation",id:`cell-${i}`,className:Y,ref:H},de()):de(),_=Q=>qs(Q,le,B.current,e,W);return d!=null?d.popup?l.createElement(l.Fragment,null,T(),_(d)):_(d):T()},be=()=>l.createElement("div",{ref:me,style:x,role:O,"col-id":a},j?l.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ye},pe()):pe());return e.isCellSpanning()?l.createElement("div",{ref:ee,className:"ag-spanned-cell-wrapper",role:"presentation"},be()):be()},Zs=t.memo(Xs),er=({rowCtrl:e,containerType:s})=>{const{context:r,gos:n,editSvc:o}=t.useContext(X),a=t.useContext(it)==="default",i=t.useRef(),c=t.useRef(e.getDomOrder()),u=e.isFullWidth(),f=e.rowNode.displayed,[d,E]=t.useState(()=>f?e.rowNode.getRowIndexString():null),[C,h]=t.useState(()=>e.rowId),[x,y]=t.useState(()=>e.businessKey),[v,m]=t.useState(()=>e.rowStyles),k=t.useRef(null),[M,S]=t.useState(()=>null),[g,W]=t.useState(),[N,V]=t.useState(()=>f?e.getInitialRowTop(s):void 0),[O,B]=t.useState(()=>f?e.getInitialTransform(s):void 0),R=t.useRef(null),b=t.useRef(),w=t.useRef(),I=t.useRef(!1),[P,J]=t.useState(0);t.useEffect(()=>{if(I.current||!g||P>10)return;const $=R.current?.firstChild;$?(e.setupDetailRowAutoHeight($),I.current=!0):J(me=>me+1)},[g,P]);const L=t.useRef();L.current||(L.current=new xe(()=>R.current));const D=t.useRef(()=>{}),U=t.useCallback($=>(D.current=$,()=>{D.current=()=>{}}),[]),A=ms(U,()=>k.current,[]),H=a?A:M,G=t.useCallback($=>{if(R.current=$,i.current=$?r.createBean(new ge):r.destroyBean(i.current),!$){e.unsetComp(s);return}if(!e.isAlive()||r.isDestroyed())return;const me={setTop:V,setTransform:B,toggleCss:(ee,ce)=>L.current.toggleCss(ee,ce),setDomOrder:ee=>c.current=ee,setRowIndex:E,setRowId:h,setRowBusinessKey:y,setUserStyles:m,setCellCtrls:(ee,ce)=>{const de=k.current,pe=Fe(de,ee,c.current);pe!==de&&(k.current=pe,a?D.current():Se(ce,()=>S(pe)))},showFullWidth:ee=>{w.current=ee.params,W(ee)},getFullWidthCellRenderer:()=>b.current,getFullWidthCellRendererParams:()=>w.current,refreshFullWidth:ee=>{const ce=ee();return w.current=ce,fe.current?(W(de=>({...de,params:ce})),!0):!b.current||!b.current.refresh?!1:b.current.refresh(ce)}};e.setComp(me,$,s,i.current)},[]);t.useLayoutEffect(()=>we(g,r,R.current,b),[g]);const j=t.useMemo(()=>{const $={top:N,transform:O};return Object.assign($,v),$},[N,O,v]),Y=u&&g?.componentFromFramework,le=!u&&H!=null,Z=t.useMemo(()=>!!(g?.componentFromFramework&&ve(g.componentClass)),[g]),fe=t.useRef(!1);t.useEffect(()=>{fe.current=Z&&!!g&&!!n.get("reactiveCustomComponents")},[Z,g]);const Ce=()=>H?.map($=>l.createElement(Zs,{cellCtrl:$,editingCell:o?.isEditing($,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:$.instanceId})),ye=()=>{const $=g.componentClass;return Z?l.createElement($,{...g.params}):l.createElement($,{...g.params,ref:b})};return l.createElement("div",{ref:G,role:"row",style:j,"row-index":d,"row-id":C,"row-business-key":x},le?Ce():Y?ye():null)},Xe=t.memo(er),tr=({name:e})=>{const{context:s,gos:r}=t.useContext(X),n=t.useMemo(()=>Mt(e),[e]),o=t.useRef(null),a=t.useRef(null),i=t.useRef(null),c=t.useRef([]),u=t.useRef([]),[f,d]=t.useState(()=>[]),E=!!r.get("enableCellSpan")&&!!n.getSpannedRowCtrls,C=t.useRef([]),h=t.useRef([]),[x,y]=t.useState(()=>[]),v=t.useRef(!1),m=t.useRef(),k=t.useMemo(()=>ne("ag-viewport",Dt(e)),[e]),M=t.useMemo(()=>ne(At(e)),[e]),S=t.useMemo(()=>ne("ag-spanning-container",Gt(e)),[e]),g=n.type==="center"||E,W=g?o:a;he(" AG Row Container "+e+" ",W);const N=t.useCallback(()=>{const P=!g||o.current!=null,J=a.current!=null,L=!E||i.current!=null;return P&&J&&L},[]),V=t.useCallback(()=>o.current==null&&a.current==null&&i.current==null,[]),O=t.useCallback(()=>{if(V()&&(m.current=s.destroyBean(m.current)),!s.isDestroyed()&&N()){const P=D=>{const U=Fe(u.current,c.current,v.current);U!==u.current&&(u.current=U,Se(D,()=>d(U)))},J=D=>{const U=Fe(h.current,C.current,v.current);U!==h.current&&(h.current=U,Se(D,()=>y(U)))},L={setHorizontalScroll:D=>{o.current&&(o.current.scrollLeft=D)},setViewportHeight:D=>{o.current&&(o.current.style.height=D)},setRowCtrls:({rowCtrls:D,useFlushSync:U})=>{const A=!!U&&c.current.length>0&&D.length>0;c.current=D,P(A)},setSpannedRowCtrls:(D,U)=>{const A=!!U&&C.current.length>0&&D.length>0;C.current=D,J(A)},setDomOrder:D=>{v.current!=D&&(v.current=D,P(!1))},setContainerWidth:D=>{a.current&&(a.current.style.width=D)},setOffsetTop:D=>{a.current&&(a.current.style.transform=`translateY(${D})`)}};m.current=s.createBean(new Nt(e)),m.current.setComp(L,a.current,i.current??void 0,o.current)}},[N,V]),B=t.useCallback(P=>{a.current=P,O()},[O]),R=t.useCallback(P=>{i.current=P,O()},[O]),b=t.useCallback(P=>{o.current=P,O()},[O]),w=()=>l.createElement("div",{className:M,ref:B,role:g?"presentation":"rowgroup"},f.map(P=>l.createElement(Xe,{rowCtrl:P,containerType:n.type,key:P.instanceId})));if(!g)return w();const I=()=>l.createElement("div",{className:S,ref:R,role:"presentation"},x.map(P=>l.createElement(Xe,{rowCtrl:P,containerType:n.type,key:P.instanceId})));return l.createElement("div",{className:k,ref:b,role:"rowgroup"},w(),E?I():null)},sr=t.memo(tr),rr=()=>{const e=t.useContext(X),{context:s,overlays:r}=e,[n,o]=t.useState(""),[a,i]=t.useState(0),[c,u]=t.useState(0),[f,d]=t.useState("0px"),[E,C]=t.useState("0px"),[h,x]=t.useState("100%"),[y,v]=t.useState("0px"),[m,k]=t.useState("0px"),[M,S]=t.useState("100%"),[g,W]=t.useState(!0),[N,V]=t.useState(!0),[O,B]=t.useState(null),[R,b]=t.useState(""),[w,I]=t.useState(null),[P,J]=t.useState("ag-layout-normal"),L=t.useRef();L.current||(L.current=new xe(()=>D.current));const D=t.useRef(null),U=t.useRef(null),A=t.useRef(null),H=t.useRef(null),G=t.useRef(null),j=t.useRef(null),Y=t.useRef(null),le=t.useRef([]),Z=t.useRef([]);he(" AG Grid Body ",D),he(" AG Pinned Top ",U),he(" AG Sticky Top ",A),he(" AG Middle ",j),he(" AG Pinned Bottom ",Y);const fe=t.useCallback(F=>{if(D.current=F,!F||s.isDestroyed()){le.current=s.destroyBeans(le.current);for(const K of Z.current)K();Z.current=[];return}const z=(K,re)=>{K.appendChild(re),Z.current.push(()=>re.remove())},te=K=>{const re=s.createBean(new K);return le.current.push(re),re},ue=(K,re,vt)=>{z(K,document.createComment(vt)),z(K,te(re).getGui())};ue(F,Kt," AG Fake Horizontal Scroll ");const se=r?.getOverlayWrapperCompClass();se&&ue(F,se," AG Overlay Wrapper "),G.current&&ue(G.current,Jt," AG Fake Vertical Scroll ");const Re={setRowAnimationCssOnBodyViewport:o,setColumnCount:K=>{D.current&&zt(D.current,K)},setRowCount:K=>{D.current&&$t(D.current,K)},setTopHeight:i,setBottomHeight:u,setStickyTopHeight:d,setStickyTopTop:C,setStickyTopWidth:x,setTopInvisible:W,setBottomInvisible:V,setColumnMovingCss:(K,re)=>L.current.toggleCss(K,re),updateLayoutClasses:J,setAlwaysVerticalScrollClass:B,setPinnedTopBottomOverflowY:b,setCellSelectableCss:(K,re)=>I(re?K:null),setBodyViewportWidth:K=>{j.current&&(j.current.style.width=K)},registerBodyViewportResizeListener:K=>{if(j.current){const re=st(e,j.current,K);Z.current.push(()=>re())}},setStickyBottomHeight:v,setStickyBottomBottom:k,setStickyBottomWidth:S,setGridRootRole:K=>F.setAttribute("role",K)},Ve=s.createBean(new Bt);le.current.push(Ve),Ve.setComp(Re,F,j.current,U.current,Y.current,A.current,H.current)},[]),Ce=t.useMemo(()=>ne("ag-root","ag-unselectable",P),[P]),ye=t.useMemo(()=>ne("ag-body-viewport",n,P,O,w),[n,P,O,w]),$=t.useMemo(()=>ne("ag-body",P),[P]),me=t.useMemo(()=>ne("ag-floating-top",g?"ag-invisible":null,w),[w,g]),ee=t.useMemo(()=>ne("ag-sticky-top",w),[w]),ce=t.useMemo(()=>ne("ag-sticky-bottom",y==="0px"?"ag-invisible":null,w),[w,y]),de=t.useMemo(()=>ne("ag-floating-bottom",N?"ag-invisible":null,w),[w,N]),pe=t.useMemo(()=>({height:a,minHeight:a,overflowY:R}),[a,R]),be=t.useMemo(()=>({height:f,top:E,width:h}),[f,E,h]),T=t.useMemo(()=>({height:y,bottom:m,width:M}),[y,m,M]),_=t.useMemo(()=>({height:c,minHeight:c,overflowY:R}),[c,R]),Q=F=>l.createElement(sr,{name:F,key:`${F}-container`}),q=({section:F,children:z,className:te,style:ue})=>l.createElement("div",{ref:F,className:te,role:"presentation",style:ue},z.map(Q));return l.createElement("div",{ref:fe,className:Ce},l.createElement(_s,null),q({section:U,className:me,style:pe,children:["topLeft","topCenter","topRight","topFullWidth"]}),l.createElement("div",{className:$,ref:G,role:"presentation"},q({section:j,className:ye,children:["left","center","right","fullWidth"]})),q({section:A,className:ee,style:be,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),q({section:H,className:ce,style:T,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),q({section:Y,className:de,style:_,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},nr=t.memo(rr),or=(e,s)=>{const{children:r,eFocusableElement:n,onTabKeyDown:o,gridCtrl:a,forceFocusOutWhenTabGuardsAreEmpty:i,isEmpty:c}=e,{context:u}=t.useContext(X),f=t.useRef(null),d=t.useRef(null),E=t.useRef(),C=m=>{const k=m==null?void 0:parseInt(m,10).toString();for(const M of[f,d])k===void 0?M.current?.removeAttribute("tabindex"):M.current?.setAttribute("tabindex",k)};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(m){E.current?.forceFocusOutOfContainer(m)}}));const h=t.useCallback(()=>{const m=f.current,k=d.current;if(!m&&!k||u.isDestroyed()){E.current=u.destroyBean(E.current);return}if(m&&k){const M={setTabIndex:C};E.current=u.createBean(new Tt({comp:M,eTopGuard:m,eBottomGuard:k,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:i,focusInnerElement:S=>a.focusInnerElement(S),isEmpty:c}))}},[]),x=t.useCallback(m=>{f.current=m,h()},[h]),y=t.useCallback(m=>{d.current=m,h()},[h]),v=m=>{const k=m==="top"?Ge.TAB_GUARD_TOP:Ge.TAB_GUARD_BOTTOM;return l.createElement("div",{className:`${Ge.TAB_GUARD} ${k}`,role:"presentation",ref:m==="top"?x:y})};return l.createElement(l.Fragment,null,v("top"),r,v("bottom"))},ar=t.forwardRef(or),ir=t.memo(ar),cr=({context:e})=>{const[s,r]=t.useState(""),[n,o]=t.useState(""),[a,i]=t.useState(null),[c,u]=t.useState(null),[f,d]=t.useState(!1),[E,C]=t.useState(),h=t.useRef(),x=t.useRef(null),y=t.useRef(),[v,m]=t.useState(null),k=t.useRef(()=>{}),M=t.useRef(),S=t.useRef([]),g=t.useCallback(()=>{},[]);he(" AG Grid ",x);const W=t.useCallback(b=>{if(x.current=b,h.current=b?e.createBean(new Ot):e.destroyBean(h.current),!b||e.isDestroyed())return;const w=h.current;k.current=w.focusInnerElement.bind(w);const I={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:P=>{if(!P&&M.current?.isDisplayed()){M.current.forceFocusOutOfContainer(P);return}y.current?.forceFocusOutOfContainer(P)},updateLayoutClasses:o,getFocusableContainers:()=>{const P=[],J=x.current?.querySelector(".ag-root");J&&P.push({getGui:()=>J});for(const L of S.current)L.isDisplayed()&&P.push(L);return P},setCursor:i,setUserSelect:u};w.setComp(I,b,b),d(!0)},[]);t.useEffect(()=>{const b=h.current,w=x.current;if(!E||!b||!v||!w||e.isDestroyed())return;const I=[],{watermarkSelector:P,paginationSelector:J,sideBarSelector:L,statusBarSelector:D,gridHeaderDropZonesSelector:U}=b.getOptionalSelectors(),A=[];if(U){const G=e.createBean(new U.component),j=G.getGui();w.insertAdjacentElement("afterbegin",j),A.push(j),I.push(G)}if(L){const G=e.createBean(new L.component),j=G.getGui(),Y=v.querySelector(".ag-tab-guard-bottom");Y&&(Y.insertAdjacentElement("beforebegin",j),A.push(j)),I.push(G),S.current.push(G)}const H=G=>{const j=e.createBean(new G),Y=j.getGui();return w.insertAdjacentElement("beforeend",Y),A.push(Y),I.push(j),j};if(D&&H(D.component),J){const G=H(J.component);M.current=G,S.current.push(G)}return P&&H(P.component),()=>{e.destroyBeans(I);for(const G of A)G.remove()}},[E,v,e]);const N=t.useMemo(()=>ne("ag-root-wrapper",s,n),[s,n]),V=t.useMemo(()=>ne("ag-root-wrapper-body","ag-focus-managed",n),[n]),O=t.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:a??""}),[c,a]),B=t.useCallback(b=>{y.current=b,C(b!==null)},[]),R=t.useCallback(()=>!h.current?.isFocusable(),[]);return l.createElement("div",{ref:W,className:N,style:O,role:"presentation"},l.createElement("div",{className:V,ref:m,role:"presentation"},f&&v&&!e.isDestroyed()&&l.createElement(X.Provider,{value:e.getBeans()},l.createElement(ir,{ref:B,eFocusableElement:v,onTabKeyDown:g,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:R},l.createElement(nr,null)))))},lr=t.memo(cr),ur=class extends Qt{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(s=>!!s.eGui))}},ht={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},dr={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...ht},ft=new Set(Object.keys(dr)),pr=new Set(Object.keys(ht)),Ct=e=>{const s=t.useRef(),r=t.useRef(null),n=t.useRef(null),o=t.useRef([]),a=t.useRef([]),i=t.useRef(e),c=t.useRef(),u=t.useRef(),f=t.useRef(!1),[d,E]=t.useState(void 0),[,C]=t.useState(0),h=t.useRef(),x=M=>{const S=r.current?.classList,g=(W="")=>W.trim().split(/\s+/g).filter(Boolean);if(h.current!==M){for(const W of g(h.current))S?.contains(W)&&S.remove(W);for(const W of g(M))S?.contains(W)||S?.add(W);h.current=M}};t.useLayoutEffect(()=>{x(e.className)},[e.className]);const y=t.useCallback(M=>{if(r.current=M,x(e.className),!M){for(const w of o.current)w();o.current.length=0;return}const S=e.modules||[];n.current||(n.current=new As(()=>C(w=>w+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{n.current?.destroy(),n.current=null}));const g=jt(e.gridOptions,e,Object.keys(e).filter(w=>!ft.has(w))),W=()=>{if(f.current){const w=()=>c.current?.shouldQueueUpdates()?void 0:a.current.shift();let I=w();for(;I;)I(),I=w()}},N=new Cr(W);c.current=N;const V=new ur,O={providedBeanInstances:{frameworkCompWrapper:new hr(n.current,g),renderStatus:V},modules:S,frameworkOverrides:N,setThemeOnGridDiv:!0},B=w=>{E(w),w.createBean(V),o.current.push(()=>{w.destroy()}),w.getBean("ctrlsSvc").whenReady({addDestroyFunc:I=>{o.current.push(I)}},()=>{if(w.isDestroyed())return;const I=s.current;I&&e.passGridApi?.(I)})},R=w=>{w.getBean("ctrlsSvc").whenReady({addDestroyFunc:I=>{o.current.push(I)}},()=>{for(const I of a.current)I();a.current.length=0,f.current=!0})},b=new Lt;g.gridId??(g.gridId=u.current),s.current=b.create(M,g,B,R,O),o.current.push(()=>{s.current=void 0}),s.current&&(u.current=s.current.getGridId())},[]),v=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),m=t.useCallback(M=>{f.current&&!c.current?.shouldQueueUpdates()?M():a.current.push(M)},[]);t.useEffect(()=>{const M=mr(i.current,e);i.current=e,m(()=>{s.current&&Ut(M,s.current)})},[e]);const k=!l.useSyncExternalStore||Ee(e,"renderingMode")==="legacy"?"legacy":"default";return l.createElement("div",{style:v,ref:y},l.createElement(it.Provider,{value:k},d&&!d.isDestroyed()?l.createElement(lr,{key:d.instanceId,context:d}):null,n.current?.getPortals()??null))};function mr(e,s){const r={};for(const n of Object.keys(s)){if(ft.has(n)){pr.has(n)&&We(274,{prop:n});continue}const o=s[n];e[n]!==o&&(r[n]=o)}return r}var hr=class extends Yt{constructor(e,s){super(),this.parent=e,this.gridOptions=s}createWrapper(e,s){const r=this.gridOptions;if(Ee(r,"reactiveCustomComponents")){const i=(c=>{switch(c){case"filter":return Ee(r,"enableFilterHandlers")?ws:Ss;case"floatingFilterComponent":return Ee(r,"enableFilterHandlers")?Ps:Es;case"dateComponent":return ys;case"dragAndDropImageComponent":return Rs;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return vs;case"statusPanel":return ks;case"toolPanel":return Ms;case"menuItem":return xs;case"cellRenderer":return gs;case"innerHeaderComponent":return Fs}})(s.name);if(i)return new i(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Le();break}const o=!s.cellRenderer&&s.name!=="toolPanel";return new dt(e,this.parent,s,o)}},fr=t.forwardRef((e,s)=>{const r=t.useContext(X),{registry:n,context:o,gos:a,rowModel:i}=r,[c,u]=t.useState(()=>new oe),[f,d]=t.useState(()=>new oe),[E,C]=t.useState(),[h,x]=t.useState(),y=t.useRef(),v=t.useRef(null),m=t.useRef(),k=t.useMemo(()=>Pt(e.api.getGridId(),E?.rowModelType??"clientSide"),[e]),M=t.useMemo(()=>c.toString()+" ag-details-row",[c]),S=t.useMemo(()=>f.toString()+" ag-details-grid",[f]);s&&t.useImperativeHandle(s,()=>({refresh(){return y.current?.refresh()??!1}})),e.template&&We(230);const g=t.useCallback(N=>{if(v.current=N,!N||o.isDestroyed()){y.current=o.destroyBean(y.current),m.current?.();return}const V={toggleCss:(B,R)=>u(b=>b.setClass(B,R)),toggleDetailGridCss:(B,R)=>d(b=>b.setClass(B,R)),setDetailGrid:B=>C(B),setRowData:B=>x(B),getGui:()=>v.current},O=n.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(o.createBean(O),O.init(V,e),y.current=O,a.get("detailRowAutoHeight"))){const B=()=>{if(v.current==null)return;const R=v.current.clientHeight;R!=null&&R>0&&setTimeout(()=>{e.node.setRowHeight(R),(It(a)||Wt(a))&&i.onRowHeightChanged()},0)};m.current=st(r,N,B),B()}},[]),W=t.useCallback(N=>{y.current?.registerDetailWithMaster(N)},[]);return l.createElement("div",{className:M,ref:g},E&&l.createElement(Ct,{className:S,...E,modules:k,rowData:h,passGridApi:W}))}),Cr=class extends qt{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Je,agGroupRowRenderer:Je,agDetailCellRenderer:fr},this.wrapIncoming=(s,r)=>r==="ensureVisible"?ds(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return us()}},gr=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const s of this.apiListeners)s(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return l.createElement(Ct,{...this.props,passGridApi:this.setGridApi})}};const vr=12;function Ue({rowData:e,columnDefs:s}){const r=e.length>vr;return p.jsx("div",{className:r?"table-container-large":"table-container",children:p.jsx(gr,{tooltipShowDelay:0,rowData:e,columnDefs:s,autoSizeStrategy:{type:"fitCellContents"},domLayout:r?"normal":"autoHeight"})})}const Te=e=>p.jsx(at,{n:e.value,ordinal:!1}),yr=e=>e.value?p.jsx("span",{className:"welcome-symbol",children:"ðŸ‘‹"}):p.jsx(p.Fragment,{}),Rr=[{headerName:"Place Overall",field:"overallPlace",cellRenderer:Te},{headerName:"Place in Gender",field:"genderPlace",cellRenderer:Te},{headerName:"Place in Age Group",field:"ageGroupPlace",cellRenderer:Te},{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Gender",field:"gender"},{headerName:"Pace",field:"pace"},{headerName:"Overall Time",field:"overallTime"},{headerName:"Age",field:"age"},{headerName:"Place in Gender (Age Graded)",field:"ageGradePlace"},{headerName:"Percent (Age Graded)",field:"ageGradePercent"},{headerName:"City",field:"city"},{headerName:"State",field:"stateProvince"},{headerName:"Country",field:"countryCode"}];function Sr({eventCode:e,results:s,runners:r}){const n={valueGetter:o=>{const a=o.data?.runnerId;if(a===void 0)return!1;const i=r[a];return ls(e,i,rt)},cellRenderer:yr,tooltipValueGetter:o=>o.value?"First race with NBR!":""};return p.jsx(Ue,{rowData:s,columnDefs:[n,...Rr]})}function De({children:e}){return p.jsx("section",{className:"bg-stone-200 dark:bg-stone-800 text-stone-950 dark:text-stone-200",children:e})}const gt=ke("bg-stone-300","dark:bg-stone-600"),wr=ke("bg-stone-100","dark:bg-stone-700");function He({count:e,className:s}){return p.jsx("div",{className:ke("count-badge",s),children:e})}function br({eventCode:e,results:s,gender:r,runners:n}){const o=is(r,s);if(o===0)return p.jsx(p.Fragment,{});const a=s[r];return p.jsx("div",{className:"gender-finishers bg-white dark:bg-stone-900",children:Object.entries(a).map(([i,c])=>p.jsxs("div",{className:"level-finishers",children:[p.jsxs("h4",{children:[p.jsx(p.Fragment,{children:i==="0"?`Overall ${Oe[r]}`:`Masters ${i}+`})," ",p.jsx(He,{count:i==="0"?o:c.length,className:wr})]}),p.jsx(Sr,{eventCode:e,results:c,runners:n})]},`finishers-${r}-${i}`))})}function Er({data:e}){let s;if(e===void 0)s=p.jsx("p",{children:"Loading..."});else if(e===null)s=p.jsx("p",{children:"Error loading results"});else{const{results:r,runners:n}=e.document;if(r.items.length===0)return p.jsx(p.Fragment,{});const o={};Object.values(r.items).forEach(a=>{o[a.gender]||(o[a.gender]={}),as(a.age).forEach(c=>{o[a.gender][c]||(o[a.gender][c]=[]),o[a.gender][c].push(a)})}),s=p.jsxs(p.Fragment,{children:[p.jsxs("h2",{children:["Total Finishers"," ",p.jsx(He,{count:r.items.length,className:gt})]}),Xt.map(a=>p.jsx(br,{eventCode:e.document.event.eventCode,results:o,gender:a,runners:n},a))]})}return p.jsx("div",{id:"overall-results",children:p.jsx(De,{children:s})})}const Pr=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Finish Time",field:"finishTime",valueFormatter:e=>ot(e.value)}];function Fr({runners:e}){return p.jsx(Ue,{rowData:e,columnDefs:Pr})}function xr({data:e}){let s;if(e===void 0)s=p.jsx("p",{children:"Loading..."});else if(e===null)s=p.jsx("p",{children:"Error loading awards"});else{const{awards:r}=e.document;if(r.length===0)return p.jsx(p.Fragment,{});s=p.jsxs(p.Fragment,{children:[p.jsx("h2",{children:"Awards"}),r.map(n=>{const o=n.minimumAge===0?`Open Class ${Oe[n.teamGender]}`:`Master's ${Oe[n.teamGender]} ${n.minimumAge}+`;return p.jsxs("div",{children:[p.jsx("h3",{children:o}),ot(n.summaryTime)," -"," ",p.jsx(at,{n:n.teamOrder,ordinal:!0})," Place",p.jsx(Fr,{runners:n.runners.items})]},`award-${n.teamCode}-${n.teamGender}-${n.minimumAge}`)})]})}return p.jsx("div",{id:"awards",children:p.jsx(De,{children:s})})}function kr({data:e}){let s;if(e===void 0)s=p.jsx("p",{children:"Loading..."});else if(e===null)s=p.jsx("p",{children:"Error loading event details"});else{const{event:r}=e.document;s=p.jsxs(p.Fragment,{children:[p.jsxs("p",{children:[p.jsx("b",{children:"Date and Time: "}),r&&new Date(r.startDateTime).toLocaleString("en-US",{dateStyle:"full",timeStyle:"medium"})]}),r?.venue&&p.jsxs("p",{children:[p.jsx("b",{children:"Location: "}),r.venue]}),r?.weather&&p.jsxs("p",{children:[p.jsx("b",{children:"Weather: "}),r.weather]})]})}return p.jsx("div",{id:"event-details",children:p.jsx(De,{children:s})})}const Ze=e=>{if(e===void 0)return 1/0;const s=e.split(":").map(n=>parseFloat(n));let r=0;return s.length===3?(r+=s[0]*3600,r+=s[1]*60,r+=s[2]):s.length===2?(r+=s[0]*60,r+=s[1]):s.length===1&&(r+=s[0]),r},et=(e,s)=>{const r=Ze(e),n=Ze(s);return r<n},_e=(e,s)=>{const r=new Date(e).valueOf(),n=new Date(s).valueOf();return r<n},Mr=e=>{const{event:s,results:r}=e.document,{items:n}=r,{distanceName:o}=s,a=[];return n.forEach(i=>{const{runnerId:c,overallTime:u}=i,f=e.document.runners[c].filter(C=>C.distanceName===o);let d=!0;const E=f.reduce((C,h)=>{if(d){if(h.eventCode===s.eventCode)return C;if(_e(h.startDateTime,s.startDateTime))if(d&&et(h.actualTime,u)){d=!1;return}else return C===void 0||et(h.actualTime,C.actualTime)?h:C;return C}},void 0);d&&E!==void 0&&a.push({finisher:i,fastestPreviousRace:E})}),a},Dr=(e,s)=>{const{event:r,runners:n}=e.document,o=[];return Object.entries(n).forEach(([a,i])=>{i.some(u=>u.teamCode===s&&_e(u.startDateTime,r.startDateTime))||o.push(parseInt(a,10))}),o},Ar=e=>{const{event:s,runners:r}=e.document,n=[];return Object.entries(r).forEach(([o,a])=>{a.some(c=>c.distanceName===s.distanceName&&_e(c.startDateTime,s.startDateTime))||n.push(parseInt(o,10))}),n},Gr=e=>{const{results:s}=e.document,r=[];return s.items.forEach(n=>{n.ageGradePlace<=10&&r.push(n.runnerId)}),r},tt=e=>{const s=e.split(":").map(Number);let r=0;return s.length===3?(r+=s[0]*3600,r+=s[1]*60,r+=s[2]):s.length===2?(r+=s[0]*60,r+=s[1]):s.length===1&&(r+=s[0]),r},Nr=e=>{const s=Math.floor(e/3600),r=Math.floor(e%3600/60),n=e%60;return[s.toString().padStart(2,"0"),r.toString().padStart(2,"0"),n.toString().padStart(2,"0")].join(":")},Br=[{headerName:"First Name",field:"finisher.firstName"},{headerName:"Last Name",field:"finisher.lastName"},{headerName:"PR Time",field:"finisher.overallTime"},{headerName:"Previous Fastest Time",field:"fastestPreviousRace.actualTime"},{headerName:"Previous Fastest Race",field:"fastestPreviousRace.eventName"},{headerName:"Date of Previous Fastest Race",field:"fastestPreviousRace.startDateTime",valueFormatter:e=>new Date(e.value).toLocaleDateString()},{headerName:"Improvement",valueGetter:e=>{const s=e.data?.finisher?.overallTime,r=e.data?.fastestPreviousRace?.actualTime;if(s&&r){const n=tt(s);return tt(r)-n}return 0},valueFormatter:e=>{const s=e.value;return s>0?Nr(s):"N/A"}}];function Tr({personalRecords:e}){return p.jsx(Ue,{columnDefs:Br,rowData:e})}function Or({data:e,personalRecords:s}){let r;return e===void 0?r=p.jsx("p",{children:"Loading..."}):s===void 0?r=p.jsx("p",{children:"Loading..."}):e===null?r=p.jsx("p",{children:"Error loading personal records"}):s===null?r=p.jsx("p",{children:"Error loading personal records"}):r=p.jsxs(p.Fragment,{children:[p.jsxs("h2",{children:["Personal Records (with NYRR)"," ",p.jsx(He,{count:s.length,className:gt})]}),p.jsx(Tr,{personalRecords:s})]}),p.jsx("div",{id:"personal-records",children:p.jsx(De,{children:r})})}const Ir="team-stats-api-teamstats-121655350650",Wr="us-east-1",jr=`https://${Ir}.s3.${Wr}.amazonaws.com`,Lr=Zt.create({baseURL:jr});function Ur({eventCode:e}){const s=es(async()=>(await Lr.get(`/${e}.json`)).data,[e]);s&&Dr(s,rt),s&&Ar(s);const r=s&&Mr(s);return s&&Gr(s),p.jsxs("div",{className:"content",children:[s&&s.document.results.totalItems>100&&p.jsx("section",{className:"bg-red-100",children:"There is a known issue where events with over 100 runners may show duplicate results, due to a bug in data processing."}),p.jsx(kr,{data:s}),p.jsx(xr,{data:s}),p.jsx(Or,{data:s,personalRecords:r}),p.jsx(Er,{data:s})]})}const $r=St(function(){const{eventCode:s}=wt();return s?p.jsxs(p.Fragment,{children:[p.jsx(Ur,{eventCode:s}),p.jsx(ns,{})]}):p.jsx("div",{children:"Something went wrong"})});export{$r as default};
