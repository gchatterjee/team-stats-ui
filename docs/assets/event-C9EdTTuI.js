import{g as lt,R as a,a as t,j as w,w as it,u as ut}from"./chunk-WWGJGFF6-DzD2bybH.js";import{G as xe,_ as dt,a as pt,b as Ne,c as Je,C as ke,E as ge,A as ae,H as mt,d as ht,e as ft,f as Ct,g as gt,h as yt,i as vt,R as Rt,j as St,T as wt,k as bt,l as Et,m as Pt,n as Mt,o as kt,p as Ft,q as Ee,r as xt,s as Dt,t as Gt,u as At,v as Bt,F as Ot,w as Nt,x as De,V as It,B as Wt,y as Tt,z as jt,D as Ut,I as Ht,J as Lt}from"./main.esm-DMYDMKcs.js";import{r as Vt}from"./index-CansKf7j.js";var Ie=Vt();const _t=lt(Ie),$t=[0,40,50,60,70,80,90,100,110,120],zt=e=>$t.filter(s=>s<=e),Jt=(e,s)=>!s[e]||!s[e][0]?0:s[e][0].length,Be={[xe.Women]:"Women",[xe.Men]:"Men",[xe.NonBinary]:"Non-Binary"},Kt=e=>{const s=["th","st","nd","rd"],r=e%100;return s[(r-20)%10]||s[r]||s[0]},Ke=e=>{const s=Math.floor(e/1e3),r=Math.floor(s/3600),n=Math.floor(s%3600/60),o=s%60,c=[];return c.push(r.toString().padStart(2,"0")),c.push(n.toString().padStart(2,"0")),c.push(o.toString().padStart(2,"0")),c.join(":")},qt=(e,s,r)=>{try{const n=s.find(o=>o.eventCode===e);return n?!s.some(o=>o.teamCode===r&&new Date(o.startDateTime).valueOf()<new Date(n.startDateTime).valueOf()):!1}catch(n){return console.error("Error in isFirstRaceWithTeam:",{races:s},n),!1}};var X=a.createContext({}),qe=a.createContext("default"),we=(e,s,r,n)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const c=e.newAgStackInstance();let l,i,u=!1;return c.then(m=>{if(u){s.destroyBean(m);return}l=m,i=l.getGui(),r.appendChild(i),Ue(n,l)}),()=>{u=!0,l&&(i?.remove(),s.destroyBean(l),n&&Ue(n,void 0))}},Ue=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},ne=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),oe=class Qe{constructor(...s){this.classesMap={};for(const r of s)this.classesMap[r]=!0}setClass(s,r){if(!!this.classesMap[s]==r)return this;const o=new Qe;return o.classesMap={...this.classesMap},o.classesMap[s]=r,o}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},ye=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},Oe=a.version?.split(".")[0],Ye=Oe==="16"||Oe==="17";function Qt(){return Oe==="19"}var Pe=!1;function Yt(e){return Pe||setTimeout(()=>Pe=!1,0),Pe=!0,e()}var Se=(e,s)=>{!Ye&&e&&!Pe?_t.flushSync(s):s()},Xt=e=>{Ye?e():a.startTransition(e)};function Zt(e,s,r){return a.useSyncExternalStore?a.useSyncExternalStore(e,s):r}function Me(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const n=[],o=[],c=new Map,l=new Map;for(let i=0;i<s.length;i++){const u=s[i];l.set(u.instanceId,u)}for(let i=0;i<e.length;i++){const u=e[i];c.set(u.instanceId,u),l.has(u.instanceId)&&n.push(u)}for(let i=0;i<s.length;i++){const u=s[i],m=u.instanceId;c.has(m)||o.push(u)}return n.length===e.length&&o.length===0?e:n.length===0&&o.length===s.length?s:n.length===0?o:o.length===0?n:[...n,...o]}var Xe=t.forwardRef((e,s)=>{const{registry:r,context:n}=t.useContext(X),o=t.useRef(null),c=t.useRef(null),l=t.useRef(null),i=t.useRef(null),u=t.useRef(null),m=t.useRef(),[d,P]=t.useState(),[b,h]=t.useState(),[k,g]=t.useState(),[C,p]=t.useState(()=>new oe),[F,x]=t.useState(()=>new oe("ag-hidden")),[v,f]=t.useState(()=>new oe("ag-hidden")),[T,B]=t.useState(()=>new oe("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>we(d,n,c.current),[d]);const _=t.useCallback(U=>{if(o.current=U,!U||n.isDestroyed()){m.current=n.destroyBean(m.current);return}const D={setInnerRenderer:(G,L)=>{P(G),g(L)},setChildCount:G=>h(G),toggleCss:(G,L)=>p(A=>A.setClass(G,L)),setContractedDisplayed:G=>f(L=>L.setClass("ag-hidden",!G)),setExpandedDisplayed:G=>x(L=>L.setClass("ag-hidden",!G)),setCheckboxVisible:G=>B(L=>L.setClass("ag-invisible",!G)),setCheckboxSpacing:G=>B(L=>L.setClass("ag-group-checkbox-spacing",G))},H=r.createDynamicBean("groupCellRendererCtrl",!0);H&&(m.current=n.createBean(H),m.current.init(D,U,l.current,i.current,u.current,Xe,e))},[]),I=t.useMemo(()=>`ag-cell-wrapper ${C.toString()}`,[C]),O=t.useMemo(()=>`ag-group-expanded ${F.toString()}`,[F]),y=t.useMemo(()=>`ag-group-contracted ${v.toString()}`,[v]),S=t.useMemo(()=>`ag-group-checkbox ${T.toString()}`,[T]),R=d?.componentFromFramework,W=R?d.componentClass:void 0,E=d==null&&k!=null,K=dt(k);return a.createElement("span",{className:I,ref:_,...e.colDef?{}:{role:m.current?.getCellAriaRole()}},a.createElement("span",{className:O,ref:i}),a.createElement("span",{className:y,ref:u}),a.createElement("span",{className:S,ref:l}),a.createElement("span",{className:"ag-group-value",ref:c},E?K:R?a.createElement(W,{...d.params}):null),a.createElement("span",{className:"ag-group-child-count"},b))}),He=Xe,We=t.createContext({setMethods:()=>{}}),es=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:n,setMethods:o}=e,[{key:c,...l},i]=t.useState(s);return t.useEffect(()=>{r(u=>i(u))},[]),a.createElement(We.Provider,{value:{setMethods:o}},a.createElement(n,{key:c,...l}))},ts=t.memo(es),ss=0;function Le(){return`agPortalKey_${++ss}`}var Ze=class{constructor(e,s,r,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Le(),this.portalKey=Le(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(o=>{this.resolveInstanceCreated=o})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const n=r[e];if(n)return n.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{this.componentInstance=s,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Ie.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Fe(e,s,r){for(const n of e){const o=s[n];o&&(r[n]=o)}}var ce=class extends Ze{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=ts}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Fe(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},rs=class extends ce{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ns=class extends ce{refresh(e){this.sourceParams=e,this.refreshProps()}},os=class extends ce{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},as=class extends ce{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:n}=this;return e.label=s,e.icon=r,e.shake=n,e}},cs=class extends ce{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const s=new ae(r=>{this.resolveFilterPassCallback=r});this.setModel(e).then(()=>{s.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},ls=class extends ce{constructor(){super(...arguments),this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function et(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var is=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),et(this.floatingFilterParams,e)}},us=class extends ce{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),et(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},ds=class extends ce{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},ps=class extends ce{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ms=class extends ce{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},hs=class extends ce{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},fs=class extends ce{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Te(){Ne(231)}var Cs=1e3,gs=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Cs}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Se(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},ys=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(X),[n,o]=t.useState(),[c,l]=t.useState(),i=t.useRef(),u=t.useRef(null),m=t.useRef(null),d=t.useRef(null),P=t.useRef(),b=t.useRef();s&&!b.current&&(b.current=new ke(()=>u.current));const h=t.useCallback(p=>{if(u.current=p,!p||!e.isAlive()||r.isDestroyed()){i.current=r.destroyBean(i.current);return}i.current=r.createBean(new ge);const F=()=>{const v=e.getSelectAllGui();v&&(m.current?.insertAdjacentElement("afterend",v),i.current.addDestroyFunc(()=>v.remove()))},x={setWidth:v=>{u.current&&(u.current.style.width=v)},toggleCss:(v,f)=>b.current.toggleCss(v,f),setUserStyles:v=>l(v),setAriaSort:v=>{u.current&&(v?xt(u.current,v):Dt(u.current))},setUserCompDetails:v=>o(v),getUserCompInstance:()=>P.current||void 0,refreshSelectAllGui:F,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(x,p,m.current,d.current,i.current),F()},[]);t.useLayoutEffect(()=>we(n,r,d.current,P),[n]),t.useEffect(()=>{e.setDragSource(u.current)},[n]);const k=t.useMemo(()=>!!(n?.componentFromFramework&&ye(n.componentClass)),[n]),g=n?.componentFromFramework,C=n?.componentClass;return a.createElement("div",{ref:h,style:c,className:"ag-header-cell",role:"columnheader"},a.createElement("div",{ref:m,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:d,className:"ag-header-cell-comp-wrapper",role:"presentation"},g?k?a.createElement(C,{...n.params}):a.createElement(C,{...n.params,ref:P}):null))},vs=t.memo(ys),Rs=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},Ss=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(X),[n,o]=t.useState(),[c,l]=t.useState(()=>new oe("ag-header-cell","ag-floating-filter")),[i,u]=t.useState(()=>new oe),[m,d]=t.useState(()=>new oe("ag-floating-filter-button","ag-hidden")),[P,b]=t.useState("false"),[h,k]=t.useState(),[,g]=t.useState(1),C=t.useRef(),p=t.useRef(null),F=t.useRef(null),x=t.useRef(null),v=t.useRef(null),f=t.useRef(),T=t.useRef(),B=G=>{G!=null&&f.current&&f.current(G)},_=t.useCallback(G=>{if(p.current=G,!G||!e.isAlive()||s.isDestroyed()){C.current=s.destroyBean(C.current);return}C.current=s.createBean(new ge),T.current=new ae(A=>{f.current=A});const L={toggleCss:(A,j)=>l(Q=>Q.setClass(A,j)),setUserStyles:A=>o(A),addOrRemoveBodyCssClass:(A,j)=>u(Q=>Q.setClass(A,j)),setButtonWrapperDisplayed:A=>{d(j=>j.setClass("ag-hidden",!A)),b(A?"false":"true")},setWidth:A=>{p.current&&(p.current.style.width=A)},setCompDetails:A=>k(A),getFloatingFilterComp:()=>T.current?T.current:null,setMenuIcon:A=>v.current?.appendChild(A)};e.setComp(L,G,v.current,F.current,C.current)},[]);t.useLayoutEffect(()=>we(h,s,F.current,B),[h]);const I=t.useMemo(()=>c.toString(),[c]),O=t.useMemo(()=>i.toString(),[i]),y=t.useMemo(()=>m.toString(),[m]),S=t.useMemo(()=>!!(h&&h.componentFromFramework&&ye(h.componentClass)),[h]),R=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),W=t.useMemo(()=>r.get("enableFilterHandlers"),[]),[E,K]=t.useState();t.useEffect(()=>{if(h?.componentFromFramework)if(R){const G=W?Rs:is,L=new G(h.params,()=>g(A=>A+1));B(L),K(L)}else Te()},[h]);const U=E?.getProps(),D=h?.componentFromFramework,H=h?.componentClass;return a.createElement("div",{ref:_,style:n,className:I,role:"gridcell"},a.createElement("div",{ref:F,className:O,role:"presentation"},D?R?U&&a.createElement(We.Provider,{value:{setMethods:G=>E.setMethods(G)}},a.createElement(H,{...U})):a.createElement(H,{...h.params,ref:S?()=>{}:B}):null),a.createElement("div",{ref:x,"aria-hidden":P,className:y,role:"presentation"},a.createElement("button",{ref:v,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},ws=t.memo(Ss),bs=({ctrl:e})=>{const{context:s}=t.useContext(X),[r,n]=t.useState(),[o,c]=t.useState(()=>new oe),[l,i]=t.useState(()=>new oe),[u,m]=t.useState("false"),[d,P]=t.useState(),[b,h]=t.useState(),k=t.useRef(),g=t.useRef(null),C=t.useRef(null),p=t.useRef(null),F=t.useRef(),x=t.useCallback(I=>{if(g.current=I,!I||!e.isAlive()||s.isDestroyed()){k.current=s.destroyBean(k.current);return}k.current=s.createBean(new ge);const O={setWidth:y=>{g.current&&(g.current.style.width=y)},toggleCss:(y,S)=>c(R=>R.setClass(y,S)),setUserStyles:y=>n(y),setHeaderWrapperHidden:y=>{const S=p.current;S&&(y?S.style.setProperty("display","none"):S.style.removeProperty("display"))},setHeaderWrapperMaxHeight:y=>{const S=p.current;S&&(y!=null?S.style.setProperty("max-height",`${y}px`):S.style.removeProperty("max-height"),S.classList.toggle("ag-header-cell-comp-wrapper-limited-height",y!=null))},setUserCompDetails:y=>h(y),setResizableDisplayed:y=>{i(S=>S.setClass("ag-hidden",!y)),m(y?"false":"true")},setAriaExpanded:y=>P(y),getUserCompInstance:()=>F.current||void 0};e.setComp(O,I,C.current,p.current,k.current)},[]);t.useLayoutEffect(()=>we(b,s,p.current),[b]),t.useEffect(()=>{g.current&&e.setDragSource(g.current)},[b]);const v=t.useMemo(()=>!!(b?.componentFromFramework&&ye(b.componentClass)),[b]),f=t.useMemo(()=>"ag-header-group-cell "+o.toString(),[o]),T=t.useMemo(()=>"ag-header-cell-resize "+l.toString(),[l]),B=b?.componentFromFramework,_=b?.componentClass;return a.createElement("div",{ref:x,style:r,className:f,role:"columnheader","aria-expanded":d},a.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},B?v?a.createElement(_,{...b.params}):a.createElement(_,{...b.params,ref:F}):null),a.createElement("div",{ref:C,"aria-hidden":u,className:T}))},Es=t.memo(bs),Ps=({ctrl:e})=>{const{gos:s,context:r}=t.useContext(X),{topOffset:n,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),c=t.useMemo(()=>s.get("tabIndex"),[]),[l,i]=t.useState(()=>e.getAriaRowIndex()),u=e.headerRowClass,[m,d]=t.useState(()=>o+"px"),[P,b]=t.useState(()=>n+"px"),h=t.useRef(null),[k,g]=t.useState(()=>e.getUpdatedHeaderCtrls()),C=t.useRef(),p=t.useRef(null),F=t.useCallback(f=>{if(p.current=f,!f||!e.isAlive()||r.isDestroyed()){C.current=r.destroyBean(C.current);return}C.current=r.createBean(new ge);const T={setHeight:B=>d(B),setTop:B=>b(B),setHeaderCtrls:(B,_,I)=>{const O=h.current,y=Me(O,B,_);y!==O&&(h.current=y,Se(I,()=>g(y)))},setWidth:B=>{p.current&&(p.current.style.width=B)},setRowIndex:B=>{i(B)}};e.setComp(T,C.current,!1)},[]),x=t.useMemo(()=>({height:m,top:P}),[m,P]),v=t.useCallback(f=>{switch(e.type){case"group":return a.createElement(Es,{ctrl:f,key:f.instanceId});case"filter":return a.createElement(ws,{ctrl:f,key:f.instanceId});default:return a.createElement(vs,{ctrl:f,key:f.instanceId})}},[]);return a.createElement("div",{ref:F,className:u,role:"row",style:x,tabIndex:c,"aria-rowindex":l},k.map(v))},Ms=t.memo(Ps),ks=({pinned:e})=>{const[s,r]=t.useState(!0),[n,o]=t.useState([]),{context:c}=t.useContext(X),l=t.useRef(null),i=t.useRef(null),u=t.useRef(),m=e==="left",d=e==="right",P=!m&&!d,b=t.useCallback(g=>{if(l.current=g,!g||c.isDestroyed()){u.current=c.destroyBean(u.current);return}u.current=c.createBean(new mt(e));const C={setDisplayed:r,setCtrls:p=>o(p),setCenterWidth:p=>{i.current&&(i.current.style.width=p)},setViewportScrollLeft:p=>{l.current&&(l.current.scrollLeft=p)},setPinnedContainerWidth:p=>{l.current&&(l.current.style.width=p,l.current.style.minWidth=p,l.current.style.maxWidth=p)}};u.current.setComp(C,l.current)},[]),h=s?"":"ag-hidden",k=()=>n.map(g=>a.createElement(Ms,{ctrl:g,key:g.instanceId}));return m?a.createElement("div",{ref:b,className:"ag-pinned-left-header "+h,"aria-hidden":!s,role:"rowgroup"},k()):d?a.createElement("div",{ref:b,className:"ag-pinned-right-header "+h,"aria-hidden":!s,role:"rowgroup"},k()):P?a.createElement("div",{ref:b,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},a.createElement("div",{ref:i,className:"ag-header-container",role:"presentation"},k())):null},Ge=t.memo(ks),Fs=()=>{const[e,s]=t.useState(()=>new oe),[r,n]=t.useState(),{context:o}=t.useContext(X),c=t.useRef(null),l=t.useRef(),i=t.useCallback(d=>{if(c.current=d,!d||o.isDestroyed()){l.current=o.destroyBean(l.current);return}l.current=o.createBean(new ht);const P={toggleCss:(b,h)=>s(k=>k.setClass(b,h)),setHeightAndMinHeight:b=>n(b)};l.current.setComp(P,d,d)},[]),u=t.useMemo(()=>"ag-header "+e.toString(),[e]),m=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:i,className:u,style:m,role:"presentation"},a.createElement(Ge,{pinned:"left"}),a.createElement(Ge,{pinned:null}),a.createElement(Ge,{pinned:"right"}))},xs=t.memo(Fs),Ds=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const n=r.parentElement;if(n){const o=document.createComment(e);return n.insertBefore(o,r),()=>{o.remove()}}}},[e])},he=Ds,Gs=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},As=e=>{const s=t.useRef(e),r=t.useRef(),n=t.useRef(!1),o=t.useRef(!1),[,c]=t.useState(0);n.current&&(o.current=!0),t.useEffect(()=>(n.current||(r.current=s.current(),n.current=!0),c(l=>l+1),()=>{o.current&&r.current?.()}),[])},Bs=e=>{const[s,r]=t.useState(),n=t.useContext(X),{context:o,popupSvc:c,gos:l,editSvc:i}=n,{editDetails:u,cellCtrl:m,eParentCell:d}=e;return As(()=>{const{compDetails:P}=u,b=l.get("stopEditingWhenCellsLoseFocus");let h,k;if(!o.isDestroyed()){k=o.createBean(i.createPopupEditorWrapper(P.params));const g=k.getGui();if(e.jsChildComp){const f=e.jsChildComp.getGui();f&&g.appendChild(f)}const{column:C,rowNode:p}=m,F={column:C,rowNode:p,type:"popupCellEditor",eventSource:d,ePopup:g,position:u.popupPosition,keepWithinBounds:!0},x=c?.positionPopupByComponent.bind(c,F),v=c?.addPopup({modal:b,eChild:g,closeOnEsc:!0,closedCallback:()=>{m.onPopupEditorClosed()},anchorToElement:d,positionCallback:x,ariaOwns:d});h=v?v.hideFunc:void 0,r(k),e.jsChildComp?.afterGuiAttached?.()}return()=>{h?.(),o.destroyBean(k)}}),t.useLayoutEffect(()=>()=>{m.isCellFocused()&&s?.getGui().contains(ft(n))&&d.focus({preventScroll:!0})},[s]),s&&e.wrappedContent?Ie.createPortal(e.wrappedContent,s.getGui()):null},Ve=t.memo(Bs),Os=(e,s,r)=>{const{compProxy:n}=e;r(n);const o=n.getProps(),c=ye(s);return a.createElement(We.Provider,{value:{setMethods:l=>n.setMethods(l)}},c?a.createElement(s,{...o}):a.createElement(s,{...o,ref:l=>n.setRef(l)}))},_e=(e,s,r)=>e.compProxy?Os(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}),Ns=(e,s,r,n,o)=>{const c=e.compDetails,l=c.componentClass,i=c.componentFromFramework&&!e.popup,u=c.componentFromFramework&&e.popup,m=!c.componentFromFramework&&e.popup;return i?_e(e,l,s):u?a.createElement(Ve,{editDetails:e,cellCtrl:n,eParentCell:r,wrappedContent:_e(e,l,s)}):m&&o?a.createElement(Ve,{editDetails:e,cellCtrl:n,eParentCell:r,jsChildComp:o}):null},Is=(e,s,r,n,o,c,l=!1)=>{const{context:i}=t.useContext(X),u=t.useCallback(()=>{const m=o.current;if(!m)return;const d=m.getGui();d&&d.parentElement&&d.remove(),i.destroyBean(m),o.current=void 0},[]);t.useEffect(()=>{const m=e!=null&&!l,d=e?.compDetails&&!e.compDetails.componentFromFramework,P=s&&r==null;if(!(m&&d&&!P)){u();return}const h=e.compDetails;if(o.current){const g=o.current,p=g.refresh!=null&&e.force==!1?g.refresh(h.params):!1;if(p===!0||p===void 0)return;u()}h.newAgStackInstance().then(g=>{if(!g)return;const C=g.getGui();if(!C)return;(s?r:c.current).appendChild(C),o.current=g})},[e,s,n,l]),t.useEffect(()=>u,[])},tt=Is,Ws=({cellCtrl:e,parent:s})=>{const r=t.useRef(),n=t.useMemo(()=>{const{loadingComp:o}=e.getDeferLoadingCellRenderer();return o?{value:void 0,compDetails:o,force:!1}:void 0},[e]);if(tt(n,!1,void 0,1,r,s),n?.compDetails?.componentFromFramework){const o=n.compDetails.componentClass;return a.createElement(o,{...n.compDetails.params})}return a.createElement(a.Fragment,null)},Ts=({cellCtrl:e,printLayout:s,editingCell:r})=>{const n=t.useContext(X),{context:o}=n,{column:{colIdSanitised:c},instanceId:l}=e,i=t.useRef(),[u,m]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[d,P]=t.useState(),[b,h]=t.useState(1),[k,g]=t.useState(),[C,p]=t.useState(!1),[F,x]=t.useState(!1),[v,f]=t.useState(!1),[T,B]=t.useState(),_=t.useMemo(()=>e.isForceWrapper(),[e]),I=t.useMemo(()=>e.getCellAriaRole(),[e]),O=t.useRef(null),y=t.useRef(null),S=t.useRef(null),R=t.useRef(),W=t.useRef(),E=t.useRef(),K=t.useRef([]),U=t.useRef(),D=t.useRef(),[H,G]=t.useState(0),L=t.useCallback(N=>{D.current=N,G(V=>V+1)},[]),A=u!=null&&(C||v||F)&&(d==null||!!d.popup),j=_||A,Q=t.useMemo(()=>e.getCellValueClass(),[e]),ie=t.useCallback(N=>{if(W.current=N,N){const V=N.isCancelBeforeStart&&N.isCancelBeforeStart();setTimeout(()=>{V?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(N))})}},[e]),Z=t.useRef();Z.current||(Z.current=new ke(()=>O.current));const fe=!!d&&!d.popup;tt(u,j,D.current,H,R,O,fe);const Ce=t.useRef();t.useLayoutEffect(()=>{const N=Ce.current,V=u;if(Ce.current=u,N==null||N.compDetails==null||V==null||V.compDetails==null)return;U.current?.refreshVisibility();const Y=N.compDetails,q=V.compDetails;if(Y.componentClass!=q.componentClass||S.current?.refresh==null)return;S.current.refresh(q.params)!=!0&&h(z=>z+1)},[u]),t.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework)||o.isDestroyed())return;const V=d.compDetails,Y=d.popup===!0,q=V.newAgStackInstance();return q.then(M=>{if(!M)return;const z=M.getGui();ie(M),Y||((_?E:O).current?.appendChild(z),M.afterGuiAttached?.()),B(M)}),()=>{q.then(M=>{const z=M.getGui();e.disableEditorTooltipFeature(),o.destroyBean(M),ie(void 0),B(void 0),z?.remove()})}},[d]);const ve=t.useCallback(N=>{if(E.current=N,!N||o.isDestroyed()||!e.isAlive()){const q=K.current;K.current=[];for(const M of q)M();return}let V;const Y=q=>{q&&(N.insertAdjacentElement("afterbegin",q.getGui()),K.current.push(()=>{Gt(q.getGui()),o.destroyBean(q),U.current===V&&(U.current=void 0)}))};C&&Y(e.createSelectionCheckbox()),v&&Y(e.createDndSource()),F&&(V=e.createRowDragComp(),U.current=V,V&&(Y(V),V.refreshVisibility()))},[e,o,v,F,C]),$=t.useCallback(()=>{const N=!e.isCellSpanning()||y.current,V=O.current;if(!V||!N||!e||!e.isAlive()||o.isDestroyed()){i.current=o.destroyBean(i.current);return}i.current=o.createBean(new ge);const Y={toggleCss:(M,z)=>Z.current.toggleCss(M,z),setUserStyles:M=>g(M),getFocusableElement:()=>O.current,setIncludeSelection:M=>p(M),setIncludeRowDrag:M=>x(M),setIncludeDndSource:M=>f(M),getCellEditor:()=>W.current??null,getCellRenderer:()=>S.current??R.current,getParentOfValue:()=>D.current??E.current??O.current,setRenderDetails:(M,z,te)=>{const ue=()=>{m(se=>se?.compDetails!==M||se?.value!==z||se?.force!==te?{value:z,compDetails:M,force:te}:se)};if(M?.params?.deferRender&&!e.rowNode.group){const{loadingComp:se,onReady:Re}=e.getDeferLoadingCellRenderer();if(se){m({value:void 0,compDetails:se,force:!1}),Re.then(()=>Xt(ue));return}}ue()},setEditDetails:(M,z,te,ue)=>{if(M){let se;M.componentFromFramework&&(ue?se=new Gs(M.params,()=>h(Re=>Re+1)):Te()),P({compDetails:M,popup:z,popupPosition:te,compProxy:se}),z||m(void 0)}else e.hasBrowserFocus()&&Y.getFocusableElement().focus({preventScroll:!0}),W.current=void 0,P(void 0)},refreshEditStyles:(M,z)=>{if(!O.current)return;const{current:te}=Z;te.toggleCss("ag-cell-value",!j),te.toggleCss("ag-cell-inline-editing",!!M&&!z),te.toggleCss("ag-cell-popup-editing",!!M&&!!z),te.toggleCss("ag-cell-not-inline-editing",!M||!!z)}},q=E.current||void 0;e.setComp(Y,V,y.current??void 0,q,s,r,i.current)},[]),me=t.useCallback(N=>{O.current=N,$()},[]),ee=t.useCallback(N=>{y.current=N,$()},[]),le=t.useMemo(()=>!!(u?.compDetails?.componentFromFramework&&ye(u.compDetails.componentClass)),[u]);t.useLayoutEffect(()=>{if(!O.current)return;const{current:N}=Z;N.toggleCss("ag-cell-value",!j),N.toggleCss("ag-cell-inline-editing",!!d&&!d.popup),N.toggleCss("ag-cell-popup-editing",!!d&&!!d.popup),N.toggleCss("ag-cell-not-inline-editing",!d||!!d.popup)});const de=()=>{const{compDetails:N,value:V}=u;if(!N)return V?.toString?.()??V;if(N.componentFromFramework){const Y=N.componentClass;return a.createElement(t.Suspense,{fallback:a.createElement(Ws,{cellCtrl:e,parent:O})},le?a.createElement(Y,{...N.params,key:b}):a.createElement(Y,{...N.params,key:b,ref:S}))}},pe=()=>{const N=()=>u==null?null:j?a.createElement("span",{role:"presentation",id:`cell-${l}`,className:Q,ref:L},de()):de(),V=Y=>Ns(Y,ie,O.current,e,T);return d!=null?d.popup?a.createElement(a.Fragment,null,N(),V(d)):V(d):N()},be=()=>a.createElement("div",{ref:me,style:k,role:I,"col-id":c},j?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ve},pe()):pe());return e.isCellSpanning()?a.createElement("div",{ref:ee,className:"ag-spanned-cell-wrapper",role:"presentation"},be()):be()},js=t.memo(Ts),Us=({rowCtrl:e,containerType:s})=>{const{context:r,gos:n,editSvc:o}=t.useContext(X),c=t.useContext(qe)==="default",l=t.useRef(),i=t.useRef(e.getDomOrder()),u=e.isFullWidth(),m=e.rowNode.displayed,[d,P]=t.useState(()=>m?e.rowNode.getRowIndexString():null),[b,h]=t.useState(()=>e.rowId),[k,g]=t.useState(()=>e.businessKey),[C,p]=t.useState(()=>e.rowStyles),F=t.useRef(null),[x,v]=t.useState(()=>null),[f,T]=t.useState(),[B,_]=t.useState(()=>m?e.getInitialRowTop(s):void 0),[I,O]=t.useState(()=>m?e.getInitialTransform(s):void 0),y=t.useRef(null),S=t.useRef(),R=t.useRef(),W=t.useRef(!1),[E,K]=t.useState(0);t.useEffect(()=>{if(W.current||!f||E>10)return;const $=y.current?.firstChild;$?(e.setupDetailRowAutoHeight($),W.current=!0):K(me=>me+1)},[f,E]);const U=t.useRef();U.current||(U.current=new ke(()=>y.current));const D=t.useRef(()=>{}),H=t.useCallback($=>(D.current=$,()=>{D.current=()=>{}}),[]),G=Zt(H,()=>F.current,[]),L=c?G:x,A=t.useCallback($=>{if(y.current=$,l.current=$?r.createBean(new ge):r.destroyBean(l.current),!$){e.unsetComp(s);return}if(!e.isAlive()||r.isDestroyed())return;const me={setTop:_,setTransform:O,toggleCss:(ee,le)=>U.current.toggleCss(ee,le),setDomOrder:ee=>i.current=ee,setRowIndex:P,setRowId:h,setRowBusinessKey:g,setUserStyles:p,setCellCtrls:(ee,le)=>{const de=F.current,pe=Me(de,ee,i.current);pe!==de&&(F.current=pe,c?D.current():Se(le,()=>v(pe)))},showFullWidth:ee=>{R.current=ee.params,T(ee)},getFullWidthCellRenderer:()=>S.current,getFullWidthCellRendererParams:()=>R.current,refreshFullWidth:ee=>{const le=ee();return R.current=le,fe.current?(T(de=>({...de,params:le})),!0):!S.current||!S.current.refresh?!1:S.current.refresh(le)}};e.setComp(me,$,s,l.current)},[]);t.useLayoutEffect(()=>we(f,r,y.current,S),[f]);const j=t.useMemo(()=>{const $={top:B,transform:I};return Object.assign($,C),$},[B,I,C]),Q=u&&f?.componentFromFramework,ie=!u&&L!=null,Z=t.useMemo(()=>!!(f?.componentFromFramework&&ye(f.componentClass)),[f]),fe=t.useRef(!1);t.useEffect(()=>{fe.current=Z&&!!f&&!!n.get("reactiveCustomComponents")},[Z,f]);const Ce=()=>L?.map($=>a.createElement(js,{cellCtrl:$,editingCell:o?.isEditing($,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:$.instanceId})),ve=()=>{const $=f.componentClass;return Z?a.createElement($,{...f.params}):a.createElement($,{...f.params,ref:S})};return a.createElement("div",{ref:A,role:"row",style:j,"row-index":d,"row-id":b,"row-business-key":k},ie?Ce():Q?ve():null)},$e=t.memo(Us),Hs=({name:e})=>{const{context:s,gos:r}=t.useContext(X),n=t.useMemo(()=>Ct(e),[e]),o=t.useRef(null),c=t.useRef(null),l=t.useRef(null),i=t.useRef([]),u=t.useRef([]),[m,d]=t.useState(()=>[]),P=!!r.get("enableCellSpan")&&!!n.getSpannedRowCtrls,b=t.useRef([]),h=t.useRef([]),[k,g]=t.useState(()=>[]),C=t.useRef(!1),p=t.useRef(),F=t.useMemo(()=>ne("ag-viewport",gt(e)),[e]),x=t.useMemo(()=>ne(yt(e)),[e]),v=t.useMemo(()=>ne("ag-spanning-container",vt(e)),[e]),f=n.type==="center"||P,T=f?o:c;he(" AG Row Container "+e+" ",T);const B=t.useCallback(()=>{const E=!f||o.current!=null,K=c.current!=null,U=!P||l.current!=null;return E&&K&&U},[]),_=t.useCallback(()=>o.current==null&&c.current==null&&l.current==null,[]),I=t.useCallback(()=>{if(_()&&(p.current=s.destroyBean(p.current)),!s.isDestroyed()&&B()){const E=D=>{const H=Me(u.current,i.current,C.current);H!==u.current&&(u.current=H,Se(D,()=>d(H)))},K=D=>{const H=Me(h.current,b.current,C.current);H!==h.current&&(h.current=H,Se(D,()=>g(H)))},U={setHorizontalScroll:D=>{o.current&&(o.current.scrollLeft=D)},setViewportHeight:D=>{o.current&&(o.current.style.height=D)},setRowCtrls:({rowCtrls:D,useFlushSync:H})=>{const G=!!H&&i.current.length>0&&D.length>0;i.current=D,E(G)},setSpannedRowCtrls:(D,H)=>{const G=!!H&&b.current.length>0&&D.length>0;b.current=D,K(G)},setDomOrder:D=>{C.current!=D&&(C.current=D,E(!1))},setContainerWidth:D=>{c.current&&(c.current.style.width=D)},setOffsetTop:D=>{c.current&&(c.current.style.transform=`translateY(${D})`)}};p.current=s.createBean(new Rt(e)),p.current.setComp(U,c.current,l.current??void 0,o.current)}},[B,_]),O=t.useCallback(E=>{c.current=E,I()},[I]),y=t.useCallback(E=>{l.current=E,I()},[I]),S=t.useCallback(E=>{o.current=E,I()},[I]),R=()=>a.createElement("div",{className:x,ref:O,role:f?"presentation":"rowgroup"},m.map(E=>a.createElement($e,{rowCtrl:E,containerType:n.type,key:E.instanceId})));if(!f)return R();const W=()=>a.createElement("div",{className:v,ref:y,role:"presentation"},k.map(E=>a.createElement($e,{rowCtrl:E,containerType:n.type,key:E.instanceId})));return a.createElement("div",{className:F,ref:S,role:"rowgroup"},R(),P?W():null)},Ls=t.memo(Hs),Vs=()=>{const e=t.useContext(X),{context:s,overlays:r}=e,[n,o]=t.useState(""),[c,l]=t.useState(0),[i,u]=t.useState(0),[m,d]=t.useState("0px"),[P,b]=t.useState("0px"),[h,k]=t.useState("100%"),[g,C]=t.useState("0px"),[p,F]=t.useState("0px"),[x,v]=t.useState("100%"),[f,T]=t.useState(!0),[B,_]=t.useState(!0),[I,O]=t.useState(null),[y,S]=t.useState(""),[R,W]=t.useState(null),[E,K]=t.useState("ag-layout-normal"),U=t.useRef();U.current||(U.current=new ke(()=>D.current));const D=t.useRef(null),H=t.useRef(null),G=t.useRef(null),L=t.useRef(null),A=t.useRef(null),j=t.useRef(null),Q=t.useRef(null),ie=t.useRef([]),Z=t.useRef([]);he(" AG Grid Body ",D),he(" AG Pinned Top ",H),he(" AG Sticky Top ",G),he(" AG Middle ",j),he(" AG Pinned Bottom ",Q);const fe=t.useCallback(M=>{if(D.current=M,!M||s.isDestroyed()){ie.current=s.destroyBeans(ie.current);for(const J of Z.current)J();Z.current=[];return}const z=(J,re)=>{J.appendChild(re),Z.current.push(()=>re.remove())},te=J=>{const re=s.createBean(new J);return ie.current.push(re),re},ue=(J,re,ct)=>{z(J,document.createComment(ct)),z(J,te(re).getGui())};ue(M,Ot," AG Fake Horizontal Scroll ");const se=r?.getOverlayWrapperCompClass();se&&ue(M,se," AG Overlay Wrapper "),A.current&&ue(A.current,Nt," AG Fake Vertical Scroll ");const Re={setRowAnimationCssOnBodyViewport:o,setColumnCount:J=>{D.current&&Bt(D.current,J)},setRowCount:J=>{D.current&&At(D.current,J)},setTopHeight:l,setBottomHeight:u,setStickyTopHeight:d,setStickyTopTop:b,setStickyTopWidth:k,setTopInvisible:T,setBottomInvisible:_,setColumnMovingCss:(J,re)=>U.current.toggleCss(J,re),updateLayoutClasses:K,setAlwaysVerticalScrollClass:O,setPinnedTopBottomOverflowY:S,setCellSelectableCss:(J,re)=>W(re?J:null),setBodyViewportWidth:J=>{j.current&&(j.current.style.width=J)},registerBodyViewportResizeListener:J=>{if(j.current){const re=Je(e,j.current,J);Z.current.push(()=>re())}},setStickyBottomHeight:C,setStickyBottomBottom:F,setStickyBottomWidth:v,setGridRootRole:J=>M.setAttribute("role",J)},je=s.createBean(new St);ie.current.push(je),je.setComp(Re,M,j.current,H.current,Q.current,G.current,L.current)},[]),Ce=t.useMemo(()=>ne("ag-root","ag-unselectable",E),[E]),ve=t.useMemo(()=>ne("ag-body-viewport",n,E,I,R),[n,E,I,R]),$=t.useMemo(()=>ne("ag-body",E),[E]),me=t.useMemo(()=>ne("ag-floating-top",f?"ag-invisible":null,R),[R,f]),ee=t.useMemo(()=>ne("ag-sticky-top",R),[R]),le=t.useMemo(()=>ne("ag-sticky-bottom",g==="0px"?"ag-invisible":null,R),[R,g]),de=t.useMemo(()=>ne("ag-floating-bottom",B?"ag-invisible":null,R),[R,B]),pe=t.useMemo(()=>({height:c,minHeight:c,overflowY:y}),[c,y]),be=t.useMemo(()=>({height:m,top:P,width:h}),[m,P,h]),N=t.useMemo(()=>({height:g,bottom:p,width:x}),[g,p,x]),V=t.useMemo(()=>({height:i,minHeight:i,overflowY:y}),[i,y]),Y=M=>a.createElement(Ls,{name:M,key:`${M}-container`}),q=({section:M,children:z,className:te,style:ue})=>a.createElement("div",{ref:M,className:te,role:"presentation",style:ue},z.map(Y));return a.createElement("div",{ref:fe,className:Ce},a.createElement(xs,null),q({section:H,className:me,style:pe,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:$,ref:A,role:"presentation"},q({section:j,className:ve,children:["left","center","right","fullWidth"]})),q({section:G,className:ee,style:be,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),q({section:L,className:le,style:N,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),q({section:Q,className:de,style:V,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},_s=t.memo(Vs),$s=(e,s)=>{const{children:r,eFocusableElement:n,onTabKeyDown:o,gridCtrl:c,forceFocusOutWhenTabGuardsAreEmpty:l,isEmpty:i}=e,{context:u}=t.useContext(X),m=t.useRef(null),d=t.useRef(null),P=t.useRef(),b=p=>{const F=p==null?void 0:parseInt(p,10).toString();for(const x of[m,d])F===void 0?x.current?.removeAttribute("tabindex"):x.current?.setAttribute("tabindex",F)};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(p){P.current?.forceFocusOutOfContainer(p)}}));const h=t.useCallback(()=>{const p=m.current,F=d.current;if(!p&&!F||u.isDestroyed()){P.current=u.destroyBean(P.current);return}if(p&&F){const x={setTabIndex:b};P.current=u.createBean(new wt({comp:x,eTopGuard:p,eBottomGuard:F,eFocusableElement:n,onTabKeyDown:o,forceFocusOutWhenTabGuardsAreEmpty:l,focusInnerElement:v=>c.focusInnerElement(v),isEmpty:i}))}},[]),k=t.useCallback(p=>{m.current=p,h()},[h]),g=t.useCallback(p=>{d.current=p,h()},[h]),C=p=>{const F=p==="top"?De.TAB_GUARD_TOP:De.TAB_GUARD_BOTTOM;return a.createElement("div",{className:`${De.TAB_GUARD} ${F}`,role:"presentation",ref:p==="top"?k:g})};return a.createElement(a.Fragment,null,C("top"),r,C("bottom"))},zs=t.forwardRef($s),Js=t.memo(zs),Ks=({context:e})=>{const[s,r]=t.useState(""),[n,o]=t.useState(""),[c,l]=t.useState(null),[i,u]=t.useState(null),[m,d]=t.useState(!1),[P,b]=t.useState(),h=t.useRef(),k=t.useRef(null),g=t.useRef(),[C,p]=t.useState(null),F=t.useRef(()=>{}),x=t.useRef(),v=t.useRef([]),f=t.useCallback(()=>{},[]);he(" AG Grid ",k);const T=t.useCallback(S=>{if(k.current=S,h.current=S?e.createBean(new bt):e.destroyBean(h.current),!S||e.isDestroyed())return;const R=h.current;F.current=R.focusInnerElement.bind(R);const W={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:E=>{if(!E&&x.current?.isDisplayed()){x.current.forceFocusOutOfContainer(E);return}g.current?.forceFocusOutOfContainer(E)},updateLayoutClasses:o,getFocusableContainers:()=>{const E=[],K=k.current?.querySelector(".ag-root");K&&E.push({getGui:()=>K});for(const U of v.current)U.isDisplayed()&&E.push(U);return E},setCursor:l,setUserSelect:u};R.setComp(W,S,S),d(!0)},[]);t.useEffect(()=>{const S=h.current,R=k.current;if(!P||!S||!C||!R||e.isDestroyed())return;const W=[],{watermarkSelector:E,paginationSelector:K,sideBarSelector:U,statusBarSelector:D,gridHeaderDropZonesSelector:H}=S.getOptionalSelectors(),G=[];if(H){const A=e.createBean(new H.component),j=A.getGui();R.insertAdjacentElement("afterbegin",j),G.push(j),W.push(A)}if(U){const A=e.createBean(new U.component),j=A.getGui(),Q=C.querySelector(".ag-tab-guard-bottom");Q&&(Q.insertAdjacentElement("beforebegin",j),G.push(j)),W.push(A),v.current.push(A)}const L=A=>{const j=e.createBean(new A),Q=j.getGui();return R.insertAdjacentElement("beforeend",Q),G.push(Q),W.push(j),j};if(D&&L(D.component),K){const A=L(K.component);x.current=A,v.current.push(A)}return E&&L(E.component),()=>{e.destroyBeans(W);for(const A of G)A.remove()}},[P,C,e]);const B=t.useMemo(()=>ne("ag-root-wrapper",s,n),[s,n]),_=t.useMemo(()=>ne("ag-root-wrapper-body","ag-focus-managed",n),[n]),I=t.useMemo(()=>({userSelect:i??"",WebkitUserSelect:i??"",cursor:c??""}),[i,c]),O=t.useCallback(S=>{g.current=S,b(S!==null)},[]),y=t.useCallback(()=>!h.current?.isFocusable(),[]);return a.createElement("div",{ref:T,className:B,style:I,role:"presentation"},a.createElement("div",{className:_,ref:p,role:"presentation"},m&&C&&!e.isDestroyed()&&a.createElement(X.Provider,{value:e.getBeans()},a.createElement(Js,{ref:O,eFocusableElement:C,onTabKeyDown:f,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:y},a.createElement(_s,null)))))},qs=t.memo(Ks),Qs=class extends Tt{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(s=>!!s.eGui))}},st={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Ys={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...st},rt=new Set(Object.keys(Ys)),Xs=new Set(Object.keys(st)),nt=e=>{const s=t.useRef(),r=t.useRef(null),n=t.useRef(null),o=t.useRef([]),c=t.useRef([]),l=t.useRef(e),i=t.useRef(),u=t.useRef(),m=t.useRef(!1),[d,P]=t.useState(void 0),[,b]=t.useState(0),h=t.useRef(),k=x=>{const v=r.current?.classList,f=(T="")=>T.trim().split(/\s+/g).filter(Boolean);if(h.current!==x){for(const T of f(h.current))v?.contains(T)&&v.remove(T);for(const T of f(x))v?.contains(T)||v?.add(T);h.current=x}};t.useLayoutEffect(()=>{k(e.className)},[e.className]);const g=t.useCallback(x=>{if(r.current=x,k(e.className),!x){for(const R of o.current)R();o.current.length=0;return}const v=e.modules||[];n.current||(n.current=new gs(()=>b(R=>R+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),o.current.push(()=>{n.current?.destroy(),n.current=null}));const f=Mt(e.gridOptions,e,Object.keys(e).filter(R=>!rt.has(R))),T=()=>{if(m.current){const R=()=>i.current?.shouldQueueUpdates()?void 0:c.current.shift();let W=R();for(;W;)W(),W=R()}},B=new sr(T);i.current=B;const _=new Qs,I={providedBeanInstances:{frameworkCompWrapper:new er(n.current,f),renderStatus:_},modules:v,frameworkOverrides:B,setThemeOnGridDiv:!0},O=R=>{P(R),R.createBean(_),o.current.push(()=>{R.destroy()}),R.getBean("ctrlsSvc").whenReady({addDestroyFunc:W=>{o.current.push(W)}},()=>{if(R.isDestroyed())return;const W=s.current;W&&e.passGridApi?.(W)})},y=R=>{R.getBean("ctrlsSvc").whenReady({addDestroyFunc:W=>{o.current.push(W)}},()=>{for(const W of c.current)W();c.current.length=0,m.current=!0})},S=new kt;f.gridId??(f.gridId=u.current),s.current=S.create(x,f,O,y,I),o.current.push(()=>{s.current=void 0}),s.current&&(u.current=s.current.getGridId())},[]),C=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),p=t.useCallback(x=>{m.current&&!i.current?.shouldQueueUpdates()?x():c.current.push(x)},[]);t.useEffect(()=>{const x=Zs(l.current,e);l.current=e,p(()=>{s.current&&Ft(x,s.current)})},[e]);const F=!a.useSyncExternalStore||Ee(e,"renderingMode")==="legacy"?"legacy":"default";return a.createElement("div",{style:C,ref:g},a.createElement(qe.Provider,{value:F},d&&!d.isDestroyed()?a.createElement(qs,{key:d.instanceId,context:d}):null,n.current?.getPortals()??null))};function Zs(e,s){const r={};for(const n of Object.keys(s)){if(rt.has(n)){Xs.has(n)&&Ne(274,{prop:n});continue}const o=s[n];e[n]!==o&&(r[n]=o)}return r}var er=class extends Wt{constructor(e,s){super(),this.parent=e,this.gridOptions=s}createWrapper(e,s){const r=this.gridOptions;if(Ee(r,"reactiveCustomComponents")){const l=(i=>{switch(i){case"filter":return Ee(r,"enableFilterHandlers")?ls:cs;case"floatingFilterComponent":return Ee(r,"enableFilterHandlers")?ds:us;case"dateComponent":return os;case"dragAndDropImageComponent":return as;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return ns;case"statusPanel":return hs;case"toolPanel":return fs;case"menuItem":return ms;case"cellRenderer":return rs;case"innerHeaderComponent":return ps}})(s.name);if(l)return new l(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Te();break}const o=!s.cellRenderer&&s.name!=="toolPanel";return new Ze(e,this.parent,s,o)}},tr=t.forwardRef((e,s)=>{const r=t.useContext(X),{registry:n,context:o,gos:c,rowModel:l}=r,[i,u]=t.useState(()=>new oe),[m,d]=t.useState(()=>new oe),[P,b]=t.useState(),[h,k]=t.useState(),g=t.useRef(),C=t.useRef(null),p=t.useRef(),F=t.useMemo(()=>pt(e.api.getGridId(),P?.rowModelType??"clientSide"),[e]),x=t.useMemo(()=>i.toString()+" ag-details-row",[i]),v=t.useMemo(()=>m.toString()+" ag-details-grid",[m]);s&&t.useImperativeHandle(s,()=>({refresh(){return g.current?.refresh()??!1}})),e.template&&Ne(230);const f=t.useCallback(B=>{if(C.current=B,!B||o.isDestroyed()){g.current=o.destroyBean(g.current),p.current?.();return}const _={toggleCss:(O,y)=>u(S=>S.setClass(O,y)),toggleDetailGridCss:(O,y)=>d(S=>S.setClass(O,y)),setDetailGrid:O=>b(O),setRowData:O=>k(O),getGui:()=>C.current},I=n.createDynamicBean("detailCellRendererCtrl",!0);if(I&&(o.createBean(I),I.init(_,e),g.current=I,c.get("detailRowAutoHeight"))){const O=()=>{if(C.current==null)return;const y=C.current.clientHeight;y!=null&&y>0&&setTimeout(()=>{e.node.setRowHeight(y),(Et(c)||Pt(c))&&l.onRowHeightChanged()},0)};p.current=Je(r,B,O),O()}},[]),T=t.useCallback(B=>{g.current?.registerDetailWithMaster(B)},[]);return a.createElement("div",{className:x,ref:f},P&&a.createElement(nt,{className:v,...P,modules:F,rowData:h,passGridApi:T}))}),sr=class extends It{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:He,agGroupRowRenderer:He,agDetailCellRenderer:tr},this.wrapIncoming=(s,r)=>r==="ensureVisible"?Yt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Qt()}},ot=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const s of this.apiListeners)s(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(nt,{...this.props,passGridApi:this.setGridApi})}};const ze={1:"",2:"",3:""};function at({n:e,ordinal:s=!1}){return w.jsxs("span",{className:"place",children:[ze[e]?ze[e]+" ":"",e,s?Kt(e):""]})}const Ae=e=>w.jsx(at,{n:e.value,ordinal:!1}),rr=e=>e.value?w.jsx("span",{className:"welcome-symbol",children:""}):w.jsx(w.Fragment,{}),nr=[{headerName:"Place Overall",field:"overallPlace",cellRenderer:Ae},{headerName:"Place in Gender",field:"genderPlace",cellRenderer:Ae},{headerName:"Place in Age Group",field:"ageGroupPlace",cellRenderer:Ae},{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Gender",field:"gender"},{headerName:"Pace",field:"pace"},{headerName:"Overall Time",field:"overallTime"},{headerName:"Age",field:"age"},{headerName:"Place in Gender (Age Graded)",field:"ageGradePlace"},{headerName:"Percent (Age Graded)",field:"ageGradePercent"},{headerName:"City",field:"city"},{headerName:"State",field:"stateProvince"},{headerName:"Country",field:"countryCode"}];function or({eventCode:e,results:s,runners:r}){const n={valueGetter:c=>{const l=c.data?.runnerId;if(l===void 0)return!1;const i=r[l];return qt(e,i,jt)},cellRenderer:rr,tooltipValueGetter:c=>c.value?"First race with NBR!":""},o=s.length>12;return w.jsx("div",{className:o?"table-container-large":"table-container",children:w.jsx(ot,{tooltipShowDelay:0,rowData:s,columnDefs:[n,...nr],autoSizeStrategy:{type:"fitCellContents"},domLayout:o?"normal":"autoHeight"})})}function ar({eventCode:e,results:s,gender:r,runners:n}){const o=Jt(r,s);if(o===0)return w.jsx(w.Fragment,{});const c=s[r];return w.jsx("div",{className:"gender-finishers",children:Object.entries(c).map(([l,i])=>w.jsxs("div",{children:[w.jsx("h4",{children:l==="0"?`Overall ${Be[r]} (${o})`:`Masters ${l}+ (${i.length})`}),w.jsx(or,{eventCode:e,results:i,runners:n})]},`${r}-${l}`))})}function cr({eventCode:e,results:s,runners:r}){if(s===void 0||r===void 0)return w.jsx("section",{children:w.jsx("p",{children:"Loading..."})});if(s===null||r===null)return w.jsx("section",{children:w.jsx("p",{children:"Error loading results"})});if(s.items.length===0)return w.jsx(w.Fragment,{});const n={};return Object.values(s.items).forEach(o=>{n[o.gender]||(n[o.gender]={}),zt(o.age).forEach(l=>{n[o.gender][l]||(n[o.gender][l]=[]),n[o.gender][l].push(o)})}),w.jsxs("section",{children:[w.jsxs("h2",{children:["Total Finishers (",s.items.length,")"]}),Ut.map(o=>w.jsx(ar,{eventCode:e,results:n,gender:o,runners:r},o))]})}const lr=[{headerName:"First Name",field:"firstName"},{headerName:"Last Name",field:"lastName"},{headerName:"Finish Time",field:"finishTime",valueFormatter:e=>Ke(e.value)}];function ir({runners:e}){const s=e.length>12;return w.jsx("div",{className:s?"table-container-large":"table-container",children:w.jsx(ot,{rowData:e,columnDefs:lr,autoSizeStrategy:{type:"fitCellContents"},domLayout:s?"normal":"autoHeight"})})}function ur({awards:e}){return e===void 0?w.jsx("section",{children:w.jsx("p",{children:"Loading..."})}):e===null?w.jsx("section",{children:w.jsx("p",{children:"Error loading awards"})}):e.length===0?w.jsx(w.Fragment,{}):w.jsxs("section",{children:[w.jsx("h2",{children:"Awards"}),e.map(s=>{const r=s.minimumAge===0?`Open Class ${Be[s.teamGender]}`:`Master's ${Be[s.teamGender]} ${s.minimumAge}+`;return w.jsxs("div",{children:[w.jsx("h3",{children:r}),Ke(s.summaryTime)," -"," ",w.jsx(at,{n:s.teamOrder,ordinal:!0})," Place",w.jsx(ir,{runners:s.runners.items})]},`award-${s.teamCode}-${s.teamGender}-${s.minimumAge}`)})]})}function dr({event:e}){let s;return e===void 0?s="Loading...":e===null?s="Error loading event details":s=w.jsxs(w.Fragment,{children:[w.jsxs("p",{children:[w.jsx("b",{children:"Date and Time: "}),e&&new Date(e.startDateTime).toLocaleString("en-US",{dateStyle:"full",timeStyle:"medium"})]}),e?.venue&&w.jsxs("p",{children:[w.jsx("b",{children:"Location: "}),e.venue]}),e?.weather&&w.jsxs("p",{children:[w.jsx("b",{children:"Weather: "}),e.weather]})]}),w.jsx("section",{className:"race-details",children:s})}const pr="team-stats-api-teamstats-121655350650",mr="us-east-1",hr=`https://${pr}.s3.${mr}.amazonaws.com`,fr=Ht.create({baseURL:hr});function Cr({eventCode:e}){const s=Lt(async()=>(await fr.get(`/${e}.json`)).data,[e]);return w.jsxs("div",{className:"content",children:[w.jsx(dr,{event:s&&s.document.event}),w.jsx(ur,{runners:s&&s.document.runners,awards:s&&s.document.awards}),w.jsx(cr,{eventCode:e,results:s&&s.document.results,runners:s&&s.document.runners})]})}const Rr=it(function(){const{eventCode:s}=ut();return s?w.jsx(Cr,{eventCode:s}):w.jsx("div",{children:"Something went wrong"})});export{Rr as default};
